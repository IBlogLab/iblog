{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"709f69d0-54da-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.234.125.103","x-forwarded-proto":"https","x-real-ip":"18.234.125.103","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T00:01:18.107Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"774b2d50-54da-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T00:01:29.297Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4363350-54da-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T00:02:44.670Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"25fbc9e0-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.173.83","x-forwarded-proto":"https","x-real-ip":"3.91.173.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T00:06:22.384Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2f8754c0-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T00:06:38.386Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"440155e0-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T00:07:12.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d17668c0-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T00:11:10.067Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e2fe04e0-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T00:11:39.492Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fb861430-54db-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.159.154","x-forwarded-proto":"https","x-real-ip":"35.171.159.154","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"119ms"},"msg":"","time":"2019-04-02T00:12:20.717Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"807b8df0-54dc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.173.83","x-forwarded-proto":"https","x-real-ip":"3.91.173.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T00:16:03.727Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9ae57ca0-54dc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T00:16:48.017Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a689d560-54dc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T00:17:07.561Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"404dfff0-54dd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T00:21:25.523Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4e86e640-54dd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T00:21:49.397Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5456c8b0-54dd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T00:21:59.167Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dca44710-54dd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T00:25:47.817Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f79fc760-54dd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T00:26:33.088Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0a388560-54de-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T00:27:04.296Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a2d40e70-54de-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.159.154","x-forwarded-proto":"https","x-real-ip":"35.171.159.154","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T00:31:20.318Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"489f2420-54df-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T00:35:58.471Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54692d50-54df-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T00:36:18.254Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8ad5fa30-54df-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T00:37:49.567Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e3506dd0-54df-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T00:40:18.002Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0e70c5f0-54e0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T00:41:30.356Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"221eeb90-54e0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T00:42:03.379Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aea42030-54e0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T00:45:59.130Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b25b82e0-54e0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T00:46:05.363Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dacfcdd0-54e0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"134ms"},"msg":"","time":"2019-04-02T00:47:13.332Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"57e96880-54e1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T00:50:43.140Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"78890050-54e1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T00:51:37.859Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b8715280-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"203.208.60.14","x-forwarded-proto":"http","x-real-ip":"203.208.60.14","host":"lancexlab.cn","connection":"close","accept":"text/plain,text/html,*/*","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/robots.txt","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"65"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T00:53:25.034Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b8fb9120-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"203.208.60.101","x-forwarded-proto":"https","x-real-ip":"203.208.60.101","host":"lancexlab.cn","connection":"close","accept":"text/plain,text/html,*/*","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T00:53:25.940Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b9389a20-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"203.208.60.88","x-forwarded-proto":"http","x-real-ip":"203.208.60.88","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/html; charset=utf-8","content-length":"98"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T00:53:26.341Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba07f810-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"203.208.60.89","x-forwarded-proto":"https","x-real-ip":"203.208.60.89","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"74e2-xq7dT8+963M4EHdkuw5OlHzE8RI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T00:53:27.752Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bbab47d0-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"203.208.60.1","x-forwarded-proto":"https","x-real-ip":"203.208.60.1","host":"lancexlab.cn","connection":"close","accept-language":"en-US","referer":"https://lancexlab.cn/","accept":"*/*","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 AppleWebKit/537.36 (KHTML, like Gecko; compatible; Googlebot/2.1; +http://www.google.com/bot.html) Safari/537.36","accept-encoding":"gzip,deflate,br"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T00:53:30.450Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef102be0-54e1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"203.208.60.81","x-forwarded-proto":"https","x-real-ip":"203.208.60.81","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6477-00sd9ZSU/0VgSaEQezMSNmZ5Izw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T00:54:56.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fdc59530-54e1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T00:55:21.402Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0d77fc20-54e2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.173.83","x-forwarded-proto":"https","x-real-ip":"3.91.173.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T00:55:47.734Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"281e0970-54e2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T00:56:32.445Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3ea00f90-54e2-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T00:57:10.157Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3eae1950-54e2-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T00:57:10.249Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"msg":"amp.parse https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/ 230ms ","time":"2019-04-02T00:57:10.252Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3e870950-54e2-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","params":{},"headers":{"x-forwarded-for":"203.208.60.81","x-forwarded-proto":"https","x-real-ip":"203.208.60.81","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,text/html,application/xhtml+xml,application/signed-exchange;v=b3,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","id":"5ca1e0cf72737b08a9e9f0d6","uuid":"9231c8f4-0622-4eb0-aec2-945d574daeac","title":"spring-cloud-gateway之架构设计","html":"<p>spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。</p><p>一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/--_001.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway-core 依赖项截图</figcaption></figure><!--kg-card-end: image--><p>二、工程结构解读</p><p>如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway 工程结构</figcaption></figure><!--kg-card-end: image-->","comment_id":"5ca1e0cf72737b08a9e9f0d6","feature_image":null,"featured":true,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-01T17:58:39.000+08:00","updated_at":"2019-04-01T19:11:17.000+08:00","published_at":"2019-04-01T18:11:52.000+08:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"47bb-aQQxM63LYXqibH+BCDyoxViCG88\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"271ms"},"msg":"","time":"2019-04-02T00:57:10.263Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5ac65440-54e2-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"203.208.60.12","x-forwarded-proto":"https","x-real-ip":"203.208.60.12","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,text/html,application/xhtml+xml,application/signed-exchange;v=b3,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6477-00sd9ZSU/0VgSaEQezMSNmZ5Izw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T00:57:57.447Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a9ec79a0-54e2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T01:00:10.216Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c4c5cbf0-54e2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T01:00:55.259Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"42678260-54e3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T01:04:26.043Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"45f4a0c0-54e3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T01:04:32.007Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"66fe4500-54e3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T01:05:27.417Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7b578d0-54e3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T01:09:03.384Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3a88dd0-54e3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"145ms"},"msg":"","time":"2019-04-02T01:09:23.520Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"10fb6ba0-54e4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T01:10:12.628Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"94935130-54e4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T01:13:53.416Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a09bea00-54e4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T01:14:13.616Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aaeebc80-54e4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.39.201","x-forwarded-proto":"https","x-real-ip":"100.25.39.201","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T01:14:30.896Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"37286930-54e5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T01:18:26.172Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3eedda10-54e5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.153.213.219","x-forwarded-proto":"https","x-real-ip":"35.153.213.219","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T01:18:39.215Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6407af60-54e5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.173.83","x-forwarded-proto":"https","x-real-ip":"3.91.173.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T01:19:41.443Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7c6cc00-54e5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T01:23:22.497Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f1c14550-54e5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T01:23:39.214Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"135ddac0-54e6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.80.105.53","x-forwarded-proto":"https","x-real-ip":"3.80.105.53","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T01:24:35.606Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8f3642e0-54e6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T01:28:03.388Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a8422830-54e6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T01:28:45.415Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dc90a8f0-54e6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T01:30:13.155Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d101930-54e7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T01:33:21.905Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6dd401e0-54e7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T01:34:16.866Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7931dbc0-54e7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T01:34:35.951Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e84f9920-54e7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T01:37:42.378Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1289aff0-54e8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"127ms"},"msg":"","time":"2019-04-02T01:38:53.298Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3206e7d0-54e8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T01:39:46.045Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"89d982b0-54e8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T01:42:13.381Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba7d9910-54e8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T01:43:34.983Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f7de5600-54e8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T01:45:17.957Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3689e270-54e9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T01:47:03.110Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"57a783e0-54e9-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"78.85.246.129","x-forwarded-proto":"https","x-real-ip":"78.85.246.129","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6 (.NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)","accept":"image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*","cache-control":"no-store,no-cache","pragma":"no-cache"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"25719","etag":"W/\"6477-00sd9ZSU/0VgSaEQezMSNmZ5Izw\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T01:47:58.698Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5cbb9060-54e9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.61.79","x-forwarded-proto":"https","x-real-ip":"34.227.61.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T01:48:07.186Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ae6c3130-54e9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T01:50:24.232Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7d56370-54e9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T01:51:33.722Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"25a45d40-54ea-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.61.79","x-forwarded-proto":"https","x-real-ip":"34.227.61.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T01:53:44.254Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"572c43f0-54ea-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.61.79","x-forwarded-proto":"https","x-real-ip":"34.227.61.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T01:55:07.377Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"91b0e300-54ea-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T01:56:45.538Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cb555b40-54ea-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T01:58:22.245Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f35ba220-54ea-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T01:59:29.383Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d0c24c0-54eb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T02:01:59.860Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7ad22170-54eb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.61.79","x-forwarded-proto":"https","x-real-ip":"34.227.61.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T02:03:16.679Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7fca8fa0-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://github.com/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"74e2-xq7dT8+963M4EHdkuw5OlHzE8RI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T02:03:25.019Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7ffe97f0-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"text/css,*/*;q=0.1","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"92ms"},"msg":"","time":"2019-04-02T02:03:25.389Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80121ff3-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:01:21 GMT","etag":"W/\"1ccd-169b4830c20\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T02:03:25.430Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8011f8e1-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"9ms"},"msg":"","time":"2019-04-02T02:03:25.432Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80121ff0-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"*/*","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"10ms"},"msg":"","time":"2019-04-02T02:03:25.433Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80121ff2-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/infinitescroll.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/infinitescroll.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"*/*","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"3f0-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","content-length":1008,"vary":"Accept-Encoding"},"statusCode":200,"responseTime":"20ms"},"msg":"","time":"2019-04-02T02:03:25.445Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8011f8e0-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:02:24 GMT","etag":"W/\"1ccd-169b484051c\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"26ms"},"msg":"","time":"2019-04-02T02:03:25.449Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80121ff1-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"27ms"},"msg":"","time":"2019-04-02T02:03:25.452Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80d0dc10-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","method":"GET","originalUrl":"/content/images/size/w2000/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 13:57:23 GMT","etag":"W/\"2d430-169b524360a\"","content-type":"image/jpeg","content-length":185392},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T02:03:26.677Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"84172d70-54eb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:03:32.170Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"becd15b0-54eb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T02:05:10.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fe6aca50-54eb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T02:06:57.435Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2d7220a0-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19817-rYOzxMC1ONpCFvhVpxubzm2LdGM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"69ms"},"msg":"","time":"2019-04-02T02:08:16.379Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4cb07ac0-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4602","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息。\\n2. config\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-01T11:11:17.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-01T10:58:22.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-01T10:58:22.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"17fd-Ye7MatbM1c0PNzxvS9zPjF85Cm4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"225ms"},"msg":"","time":"2019-04-02T02:09:08.944Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5de9a8c0-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19bae-tAUdLN8/lnCeO42tPS14vf3Cw1c\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T02:09:37.658Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7ede3e60-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4717","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息。其中有个POST（/routes/{id}）可以运行时添加route配置。\\n2. config\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:09:08.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1842-88vvJhuBsnS+MSzsAIPUi/vGJEY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"177ms"},"msg":"","time":"2019-04-02T02:10:33.083Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"81d02e30-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4717","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。\\n2. config\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:10:32.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1842-yRNhVpRhoRe/KRmpkaUtvci1LDY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"151ms"},"msg":"","time":"2019-04-02T02:10:37.996Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b08e6d90-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19c7d-eU7B5aN663Tmegv2IkU5S2LDeQE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T02:11:56.340Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7ad1390-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19c7d-eU7B5aN663Tmegv2IkU5S2LDeQE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"86ms"},"msg":"","time":"2019-04-02T02:13:01.985Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec749870-54ec-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4851","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n2. config\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:10:37.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"18c8-/WpUbcu4OcmcE2SFkeuAbEmo2YE\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"114ms"},"msg":"","time":"2019-04-02T02:13:36.877Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"09214b30-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19e0f-b/0R7/2JTZQlKfakgNJuS9QUK9k\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T02:14:24.918Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3c670e80-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"48200","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryBEL0dWrUIhAQ8D4c","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-sHehRk9Thd/HHP1giWX4iIk5vHU\""},"statusCode":201,"responseTime":"145ms"},"msg":"","time":"2019-04-02T02:15:51.035Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"40e061a0-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4941","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:13:36.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"190e-3XAmPA0W48aq4Lg4y2nH/AXEp88\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"191ms"},"msg":"","time":"2019-04-02T02:15:58.591Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4279ed60-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6477-00sd9ZSU/0VgSaEQezMSNmZ5Izw\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6799-GhOJMS8/s0HG0PBThmHPhUNlxHw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"167ms"},"msg":"","time":"2019-04-02T02:16:01.246Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"429da200-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T02:16:01.315Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"42b2b0a0-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:16:01.453Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"49f6bc80-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6799-GhOJMS8/s0HG0PBThmHPhUNlxHw\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"6799-GhOJMS8/s0HG0PBThmHPhUNlxHw\""},"statusCode":304,"responseTime":"55ms"},"msg":"","time":"2019-04-02T02:16:13.697Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4a165270-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:16:13.851Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5be3aa20-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"4948","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    \\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:15:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1915-nGnWu5AabOj+XSNNflsBMMnmmJQ\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"135ms"},"msg":"","time":"2019-04-02T02:16:43.852Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6f930840-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19f65-b8aW3xY0I+nRN91CqSspPfYWsbQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T02:17:16.780Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"796698a0-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"22889","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryBBuTA1TzeIbmPd5e","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-MLdj2fDLckl3xSNBz3jx878Lr5I\""},"statusCode":201,"responseTime":"43ms"},"msg":"","time":"2019-04-02T02:17:33.270Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7f0ea7c0-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5031","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:16:43.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1954-/4inLCkZBUsMN316/r+PQQ7/i2g\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"143ms"},"msg":"","time":"2019-04-02T02:17:42.862Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8037be70-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"19f55-H3UH6opgPQ3Lv2cewXWDDfwEXqo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T02:17:44.729Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"811b1990-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6799-GhOJMS8/s0HG0PBThmHPhUNlxHw\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"67ff-k7hJ7OoC7g1jl8i8ki/X1M2ARL4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T02:17:46.215Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"812f16c0-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:17:46.287Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"813e8010-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T02:17:46.387Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ad4eb670-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5138","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:17:42.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"19bf-5X0TKAyW3706MS7iEqCKI1hsEKM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"115ms"},"msg":"","time":"2019-04-02T02:19:00.432Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b237bb50-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a094-K2ew16f0g4eJNZ/Bx2CkWAlJtnI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T02:19:08.595Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dd1f5030-54ed-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5215","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n*     GatewayClassPathWarning\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:19:00.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1a0c-Jk/AGMDu0Rja/fbhLC9F8CYQLPc\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"124ms"},"msg":"","time":"2019-04-02T02:20:20.659Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"defd8610-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"67ff-k7hJ7OoC7g1jl8i8ki/X1M2ARL4\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6906-QIn8VFP8XIYK8sWXoYVfJ9LF3ns\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T02:20:23.735Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"df229a40-54ed-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T02:20:23.911Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"174db8f0-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.108.227","x-forwarded-proto":"https","x-real-ip":"54.198.108.227","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a1ed-wDMxE3xykLh714eiIBL48ojS9sA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"34ms"},"msg":"","time":"2019-04-02T02:21:58.179Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"46b6b740-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a1ed-wDMxE3xykLh714eiIBL48ojS9sA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T02:23:17.721Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"61dace30-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a1ed-wDMxE3xykLh714eiIBL48ojS9sA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T02:24:03.278Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"746422e0-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5630","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n*     GatewayClassPathWarningAutoConfiguration.java\\n*     GatewayEnvironmentPostProcessor.java\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n*     GatewayMetricsAutoConfiguration.java\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n*     GatewayProperties.java\\n*     GatewayRedisAutoConfiguration.java\\n*     GlobalCorsProperties.java\\n*     LoadBalancerProperties.java\\n*     PropertiesRouteDefinitionLocator.java\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:20:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1bab-IpB+h3CaoQMOwnZBBbKcwSLQG04\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"132ms"},"msg":"","time":"2019-04-02T02:24:34.454Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8d9df600-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5665","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n*     GatewayClassPathWarningAutoConfiguration.java\\n*     GatewayEnvironmentPostProcessor.java\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n*     GatewayMetricsAutoConfiguration.java\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n*     GatewayProperties.java\\n*     GatewayRedisAutoConfiguration.java\\n*     GlobalCorsProperties.java\\n*     LoadBalancerProperties.java\\n*     PropertiesRouteDefinitionLocator.java\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:24:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1bce-vmjG5JZcgXSndeUh4yKQ6T3/7Fk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"160ms"},"msg":"","time":"2019-04-02T02:25:16.803Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4a817e0-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5713","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n*     GatewayClassPathWarningAutoConfiguration.java\\n*     GatewayEnvironmentPostProcessor.java\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n*     GatewayMetricsAutoConfiguration.java\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n*     GatewayProperties.java\\n*     GatewayRedisAutoConfiguration.java\\n*     GlobalCorsProperties.java\\n*     LoadBalancerProperties.java\\n*     PropertiesRouteDefinitionLocator.java\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:25:16.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1bfe-c/ReEe8+pQSdO/L3YvzyAJNIh24\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"237ms"},"msg":"","time":"2019-04-02T02:25:55.537Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b2e67c70-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5746","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:25:55.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1c1f-kBX8Ps/5HIjqaGDS/sPoW/qjmYU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"201ms"},"msg":"","time":"2019-04-02T02:26:19.396Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b432d290-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5749","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:26:19.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1c22-EyHBAM5BFiMhD9jX/M1zG1Wonrs\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"150ms"},"msg":"","time":"2019-04-02T02:26:21.521Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dd3b6e40-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a96a-Rzg+sZ1CBvmXetimcPuws6BpFNg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T02:27:30.262Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc34f730-54ee-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a96a-Rzg+sZ1CBvmXetimcPuws6BpFNg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T02:28:22.237Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0b2ee390-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1a96a-Rzg+sZ1CBvmXetimcPuws6BpFNg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T02:28:47.360Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"244eed20-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"43083","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundary3mlgOPMGIzhMdwBE","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-lbhF7KfEDtQ2zmTVvuOfr9rdi3g\""},"statusCode":201,"responseTime":"72ms"},"msg":"","time":"2019-04-02T02:29:29.531Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"25101a40-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5836","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:26:21.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1c65-X7wHOU6/Jr9cynyehTserkbf+w8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"209ms"},"msg":"","time":"2019-04-02T02:29:30.936Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2665bf30-54ef-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6906-QIn8VFP8XIYK8sWXoYVfJ9LF3ns\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6c5d-k1TMhZE7NNJGuAVrreO+Qr2gZTg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"86ms"},"msg":"","time":"2019-04-02T02:29:33.050Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"267d8cf0-54ef-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T02:29:33.121Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"268f4030-54ef-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T02:29:33.237Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4e44f610-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"5939","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:29:30.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1ccc-nwkY45tM/jyIIHHRTWC8DPxGe3M\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"176ms"},"msg":"","time":"2019-04-02T02:30:40.036Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8343db10-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6061","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:30:39.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1d46-nkhJbZCK6Olwv5gkku3l7BvwKN0\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T02:32:08.920Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a675dd90-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1acb1-vmIUYd0HgsIs+RKKRVe94PtUD38\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T02:33:07.874Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ac385280-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6149","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解，spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关。AutoConfigureBefore\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:32:08.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1d9e-kEP27Xt8zlevgm5FMP+/RiyQIbU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"246ms"},"msg":"","time":"2019-04-02T02:33:17.728Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6eb6d70-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1adba-jDDu4BWMeIeOboZbXiET8DLpvrU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T02:33:35.486Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bdf35ab0-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.196.227.218","x-forwarded-proto":"https","x-real-ip":"54.196.227.218","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1adba-jDDu4BWMeIeOboZbXiET8DLpvrU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T02:33:47.272Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eef71d40-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6261","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:33:17.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1e0e-hqN67sX8oPGTmkYy8NfuD6AQ6xw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"179ms"},"msg":"","time":"2019-04-02T02:35:09.641Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f172f2b0-54ef-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6c5d-k1TMhZE7NNJGuAVrreO+Qr2gZTg\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6e02-k/cs+5mNt3ku3mAjaqwzSQ9QWGw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T02:35:13.688Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f197dfd0-54ef-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:35:13.873Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa46ed60-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6261","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:35:09.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"1e0e-hqN67sX8oPGTmkYy8NfuD6AQ6xw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"95ms"},"msg":"","time":"2019-04-02T02:35:28.536Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa99a140-54ef-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6261","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:35:09.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"1e0e-hqN67sX8oPGTmkYy8NfuD6AQ6xw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"110ms"},"msg":"","time":"2019-04-02T02:35:29.092Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"455b0cf0-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6356","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:35:09.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1e6d-9VLJBTtdvuBerwBon1cfW76vs2k\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"137ms"},"msg":"","time":"2019-04-02T02:37:34.539Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"46fe0e90-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6356","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的。\\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:37:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"1e6d-9VLJBTtdvuBerwBon1cfW76vs2k\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"83ms"},"msg":"","time":"2019-04-02T02:37:37.232Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"49ce93b0-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6363","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:37:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1e74-rWUKqSobgKciwhKsoph2ipwdpk8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"140ms"},"msg":"","time":"2019-04-02T02:37:42.009Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c172420-54f0-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6e02-k/cs+5mNt3ku3mAjaqwzSQ9QWGw\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6e61-W4rSdSi/QYt9rn6l8NsCpn3Xtvk\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T02:37:45.763Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c3cfba0-54f0-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T02:37:45.948Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5a017540-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b032-4mmQlXIwhbAG15ZYVOMrs7Ss7Ak\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T02:38:09.094Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7860ba00-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.76.240","x-forwarded-proto":"https","x-real-ip":"34.227.76.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b032-4mmQlXIwhbAG15ZYVOMrs7Ss7Ak\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T02:39:00.050Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"790cd880-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.233.224.240","x-forwarded-proto":"https","x-real-ip":"18.233.224.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b032-4mmQlXIwhbAG15ZYVOMrs7Ss7Ak\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T02:39:01.177Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8c7087a0-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6485","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:37:41.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1eee-JkJYWqGY0kqpbWsPPCvTk/sBYsA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"122ms"},"msg":"","time":"2019-04-02T02:39:33.783Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8cbe3270-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6485","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:39:33.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"1eee-JkJYWqGY0kqpbWsPPCvTk/sBYsA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"297ms"},"msg":"","time":"2019-04-02T02:39:34.468Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a781d9e0-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6571","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:39:33.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"1f44-qBvlq5ClHpx5XN3Muqt7GTNOCYM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"145ms"},"msg":"","time":"2019-04-02T02:40:19.218Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f4f12780-54f0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.233.224.240","x-forwarded-proto":"https","x-real-ip":"18.233.224.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b2a2-TrhqXyVbD/VPEV3JgNEIpszG5LM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T02:42:29.038Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"273fb990-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.233.224.240","x-forwarded-proto":"https","x-real-ip":"18.233.224.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b2a2-TrhqXyVbD/VPEV3JgNEIpszG5LM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T02:43:53.434Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3472c8a0-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.233.224.240","x-forwarded-proto":"https","x-real-ip":"18.233.224.240","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b2a2-TrhqXyVbD/VPEV3JgNEIpszG5LM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T02:44:15.570Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"738eca20-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"74815","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryAlM4PIASanbJXkhS","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-pIz7kIk1GqjvFlRsIqRqTWsZxXM\""},"statusCode":201,"responseTime":"106ms"},"msg":"","time":"2019-04-02T02:46:01.517Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"77ead140-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"6845","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:40:19.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2042-gYdIFcFHQsGFIcib2U2kQu/afJ4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"158ms"},"msg":"","time":"2019-04-02T02:46:08.886Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7940c450-54f1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"6e61-W4rSdSi/QYt9rn6l8NsCpn3Xtvk\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7049-JRnudjjeMF4Y8XdQBxu1QT3seTk\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T02:46:11.022Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"79538900-54f1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:46:11.092Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"79671100-54f1-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T02:46:11.219Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c11bb1e0-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b563-wIfDKQECb8nlgpmK4VXr2pffz70\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T02:48:11.555Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c6d57440-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b563-wIfDKQECb8nlgpmK4VXr2pffz70\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T02:48:21.165Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d0b33dd0-54f1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b563-wIfDKQECb8nlgpmK4VXr2pffz70\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T02:48:37.719Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69bf14e0-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b563-wIfDKQECb8nlgpmK4VXr2pffz70\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T02:52:54.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"75c25680-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7030","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:46:08.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"20fb-h4TI142nqLbAc7RYZu5tVkwb51o\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"135ms"},"msg":"","time":"2019-04-02T02:53:14.737Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"762b7890-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7030","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:53:14.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"20fb-h4TI142nqLbAc7RYZu5tVkwb51o\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"98ms"},"msg":"","time":"2019-04-02T02:53:15.390Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d9d9950-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b793-wjW78u+MVmziGtNAlORmzLTx8xk\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T02:53:27.842Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"89cb6d60-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1b793-wjW78u+MVmziGtNAlORmzLTx8xk\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T02:53:48.253Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a7b756e0-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7115","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:53:14.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2150-zSDCiDH8IXoDZUmj59LiBhv8V0c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"244ms"},"msg":"","time":"2019-04-02T02:54:38.663Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d5b37ec0-54f2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7181","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:54:38.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2192-n7/qh9LA5oDLG9nh4qYsFXMbKjA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"225ms"},"msg":"","time":"2019-04-02T02:55:55.792Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08019ba0-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7232","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:55:55.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"21c5-dt2e6HWqVrA9zRcOM7rszSm8J84\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"169ms"},"msg":"","time":"2019-04-02T02:57:20.133Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"17d51f20-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7265","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:57:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"21e6-r+/RxG/yW1FwBmlERiUb4mwHcY0\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"152ms"},"msg":"","time":"2019-04-02T02:57:46.670Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26c5bcb0-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ba5e-cmiGHk6Y4iUWXJMau/qrogxismg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T02:58:11.638Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2c719c60-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ba5e-cmiGHk6Y4iUWXJMau/qrogxismg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T02:58:21.172Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4f3d6300-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ba5e-cmiGHk6Y4iUWXJMau/qrogxismg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T02:59:19.552Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"81fe8d00-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7301","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T02:57:46.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"220a-SKxHuUHMWYlTE6mFUIUQbN2yXq8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"132ms"},"msg":"","time":"2019-04-02T03:00:44.760Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"981eeb20-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7355","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:00:44.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2240-lx4MpewVtO/KILYlCuq8zeOqiBY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"144ms"},"msg":"","time":"2019-04-02T03:01:21.893Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b8054510-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7400","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:01:21.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"226d-cO5cAZglQmjOi2JlE6nNorWhNoo\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"131ms"},"msg":"","time":"2019-04-02T03:02:15.398Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf5d5fe0-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1bbfe-7UPakdpqPEmBV6BsuvhCS1FPjzE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"148ms"},"msg":"","time":"2019-04-02T03:02:54.580Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e859b4d0-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1bbfe-7UPakdpqPEmBV6BsuvhCS1FPjzE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T03:03:36.408Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8dc6410-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1bbfe-7UPakdpqPEmBV6BsuvhCS1FPjzE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T03:04:04.107Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fcded980-54f3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7602","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制。\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:02:15.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2337-rLaLofIEReoBvwlzcKSgBHQirYA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"150ms"},"msg":"","time":"2019-04-02T03:04:10.929Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07ecbea0-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7641","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:04:10.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"235e-suXKciOTadapX7GzaJGr0h/FFBE\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"137ms"},"msg":"","time":"2019-04-02T03:04:29.463Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e46f170-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7707","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:04:29.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"23a0-c3HkHUH6p0wY8jOUVShR4B67A0M\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"186ms"},"msg":"","time":"2019-04-02T03:05:07.029Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3f790540-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7745","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:05:06.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"23c6-bjYf/Xv6zydPTjhaCIlQQT3ozHY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"141ms"},"msg":"","time":"2019-04-02T03:06:02.659Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4129e990-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7752","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:06:02.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"23cd-XtRznX1KJAKOZC4eOR4PBz/MJO8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"132ms"},"msg":"","time":"2019-04-02T03:06:05.487Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6829e400-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c01b-FGn5GuV6ZzCa/ONGABrPmP5MFjA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T03:07:10.853Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"85ea9ed0-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7855","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:06:05.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2434-SKJxtaMm4vBsbcDdGa8r4vrKz/c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"133ms"},"msg":"","time":"2019-04-02T03:08:00.836Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8869a890-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7862","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    \\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:08:00.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"243b-eeGNJmLqqowdVUa9KBKxhP89DCs\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"199ms"},"msg":"","time":"2019-04-02T03:08:05.092Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90badeb0-54f4-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7049-JRnudjjeMF4Y8XdQBxu1QT3seTk\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7440-mNiSxgFE1GBb96HZfNA9zZTNekA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T03:08:18.901Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90e019f0-54f4-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:08:19.091Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95362da0-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c15c-pco/sp03+VwRlA0lPS/s8VINnew\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T03:08:26.408Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b9b6a920-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7920","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:08:04.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T02:09:08.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T02:09:08.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2475-vyk2YUmItKaLY7iK2qpjtmLVsro\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"232ms"},"msg":"","time":"2019-04-02T03:09:27.839Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba94fb30-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c21d-PfYwmrxPW6oUtXjPZrwZKRFCklY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T03:09:29.108Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bcbce440-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7927","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:09:27.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"247c-nTs+K5dqUyrVYOFKuYNRS9hHYto\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"150ms"},"msg":"","time":"2019-04-02T03:09:32.828Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d943bf80-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7982","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:09:32.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"24b3-j95XUE3Df3oaOHgN7Yy8uvWxt9c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"127ms"},"msg":"","time":"2019-04-02T03:10:20.666Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"db333370-54f4-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7982","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:10:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"24b3-j95XUE3Df3oaOHgN7Yy8uvWxt9c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T03:10:23.867Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"15c036f0-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c2c9-h3eIu4itP6uqPLwh9IiV/eruWDY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T03:12:02.077Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21cf3860-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8098","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性。\\n\\n*     HttpClientProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:10:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2527-CVVnEw3fW2uYu/i0+AMSGBJH1xE\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"141ms"},"msg":"","time":"2019-04-02T03:12:22.390Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2a5c3f00-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8110","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（use404）。\\n\\n*     HttpClientProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:12:22.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2533-S5YU5E+bKIFROrjF6LB1d03wvJI\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"166ms"},"msg":"","time":"2019-04-02T03:12:36.760Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3330fd00-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8126","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    \\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:12:36.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2543-aV/MWCHWwQJvgQ6ivbaQ18QbOKw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"150ms"},"msg":"","time":"2019-04-02T03:12:51.561Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"563d00f0-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c4a3-eNQVWn/lotUicQrxlcyvGBa/DPg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T03:13:50.246Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5ce84f40-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c4a3-eNQVWn/lotUicQrxlcyvGBa/DPg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T03:14:01.465Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9371f2f0-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7","if-none-match":"W/\"74e2-xq7dT8+963M4EHdkuw5OlHzE8RI\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"75a3-etnL1AO1UXEPx9SC3xhIqzRTL8I\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"143ms"},"msg":"","time":"2019-04-02T03:15:33.044Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"949a4650-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8342","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:12:51.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"261b-iqnSvbTrksVfU1oBPg2wqUTkkKY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"119ms"},"msg":"","time":"2019-04-02T03:15:34.959Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95896140-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/welcome/","method":"GET","originalUrl":"/welcome/","params":{"slug":"welcome"},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"69c8-U40CPpbhEQvrae7HBK80j0zbuJw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"69ms"},"msg":"","time":"2019-04-02T03:15:36.474Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95ae9c80-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/welcome/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T03:15:36.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95c88d20-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/welcome/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"1285b-169b487c5c4\"","content-type":"image/jpeg","content-length":75867},"statusCode":200,"responseTime":"26ms"},"msg":"","time":"2019-04-02T03:15:36.846Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ab017170-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/admin-settings/","method":"GET","originalUrl":"/admin-settings/","params":{"slug":"admin-settings"},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/welcome/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"6da6-k/BHP6My9VYdx0LiNaWXXiasmyE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"86ms"},"msg":"","time":"2019-04-02T03:16:12.510Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"afebfcf0-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/author/ghost/","method":"GET","originalUrl":"/author/ghost/","params":{"slug":"ghost"},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/admin-settings/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"65cf-6A7RXAE5eKUINr34ohVSp+/IR34\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"82ms"},"msg":"","time":"2019-04-02T03:16:20.754Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b16d1eb0-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/about/","method":"GET","originalUrl":"/about/","params":{"slug":"about"},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/author/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3649-szQY1RYXL77PacRxZZDZKn71tNc\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"30ms"},"msg":"","time":"2019-04-02T03:16:23.227Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b1851380-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c73e-E8R2d9vq+BOpSH9nPh+iDv1ATcU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T03:16:23.406Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b186e840-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/03/307C03A9-4368-4F43-829A-AD71CEE01706.jpeg","method":"GET","originalUrl":"/content/images/size/w2000/2019/03/307C03A9-4368-4F43-829A-AD71CEE01706.jpeg","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","dnt":"1","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/about/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:16:24 GMT","etag":"W/\"1c000-169dc0c3fc1\"","content-type":"image/jpeg","content-length":114688},"statusCode":200,"responseTime":"768ms"},"msg":"","time":"2019-04-02T03:16:24.134Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b77f1330-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8378","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n4. event\\n5. filter\\n6. handler\\n7. route\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:15:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"263f-LbTqZrdgz9INV3Goe0+MpS5e2gg\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"170ms"},"msg":"","time":"2019-04-02T03:16:33.551Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bdb92920-54f5-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8393","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:16:33.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"264e-p0PpGMyVr7yW1deU2Ez8zMYbcA4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"183ms"},"msg":"","time":"2019-04-02T03:16:44.013Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c0bbe1d0-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7440-mNiSxgFE1GBb96HZfNA9zZTNekA\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"92ms"},"msg":"","time":"2019-04-02T03:16:48.971Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c0e6e970-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:16:49.162Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cdfab0b0-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\""},"statusCode":304,"responseTime":"83ms"},"msg":"","time":"2019-04-02T03:17:11.184Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ce1df020-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:17:11.333Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d5919780-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"712a-LqmpTaEnPDQAtCJLBkG30MmNVsc\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"75a3-2gHoO9C2dbavlqemcmYcwnZ3bGo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T03:17:23.899Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d8d99690-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\""},"statusCode":304,"responseTime":"58ms"},"msg":"","time":"2019-04-02T03:17:29.396Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8fb6120-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4108-cJfFI7Nr8kQuGkgtOYo55J7vYfQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T03:17:56.445Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e90f5e50-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w2000/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:17:56 GMT","etag":"W/\"15d6-169dc0da8dd\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T03:17:56.580Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e9bae090-54f5-11e9-a41f-1dc48d552e2c","userId":null},"url":"/wang-guan-ying-yong-chu-tan/","method":"GET","originalUrl":"/wang-guan-ying-yong-chu-tan/","params":{"slug":"wang-guan-ying-yong-chu-tan"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8495-sPqPItWf8jTDX67Ek4iGpw63q5I\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9299-fnFIia8LAOO9X7yzL+Wxs4erGtE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"181ms"},"msg":"","time":"2019-04-02T03:17:57.844Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0d9b99a0-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c842-AP7oDIxvZ1Kl53ReJQA0YWHeOEA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T03:18:57.897Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1cc6f640-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8446","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"https://images.unsplash.com/photo-1453872898249-3e8bf97c227f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjExNzczfQ","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:16:43.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"26e7-GwXoUgbfMdXQKxxHuYriDSJYW90\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"103ms"},"msg":"","time":"2019-04-02T03:19:23.406Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21583e30-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8546","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"https://images.unsplash.com/photo-1453872898249-3e8bf97c227f?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjExNzczfQ","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:19:23.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"26e7-GwXoUgbfMdXQKxxHuYriDSJYW90\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"102ms"},"msg":"","time":"2019-04-02T03:19:31.069Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21b07050-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c8db-ysyzR+tYNBtzU4SxJd4Vqal7MPQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T03:19:31.596Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2314e250-54f6-11e9-a41f-1dc48d552e2c","userId":null},"url":"/wang-guan-ying-yong-chu-tan/","method":"GET","originalUrl":"/wang-guan-ying-yong-chu-tan/","params":{"slug":"wang-guan-ying-yong-chu-tan"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"9299-fnFIia8LAOO9X7yzL+Wxs4erGtE\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9866-34G7n6vWxpkO3yvWPoX6+KTRgjQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"92ms"},"msg":"","time":"2019-04-02T03:19:33.971Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"260fd2d0-54f6-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/wang-guan-ying-yong-chu-tan/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"4108-cJfFI7Nr8kQuGkgtOYo55J7vYfQ\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"46d5-k52BmqEeGbvZqlfzlmxBA+i3TLg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T03:19:38.914Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2c764ff0-54f6-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/wang-guan-ying-yong-chu-tan/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"46d5-k52BmqEeGbvZqlfzlmxBA+i3TLg\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"46d5-k52BmqEeGbvZqlfzlmxBA+i3TLg\""},"statusCode":304,"responseTime":"35ms"},"msg":"","time":"2019-04-02T03:19:49.652Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7425c0b0-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c8db-ysyzR+tYNBtzU4SxJd4Vqal7MPQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T03:21:49.926Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ca391f60-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c8db-ysyzR+tYNBtzU4SxJd4Vqal7MPQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T03:24:14.337Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d6a0c820-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8291","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:19:23.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"264e-/34YrgqYV+yop32MpQ4znXtH8sk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"104ms"},"msg":"","time":"2019-04-02T03:24:35.212Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d8c52ec0-54f6-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"103.85.25.12","x-forwarded-proto":"https","x-real-ip":"103.85.25.12","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/about/","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7","if-none-match":"W/\"75a3-etnL1AO1UXEPx9SC3xhIqzRTL8I\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"75a3-2gHoO9C2dbavlqemcmYcwnZ3bGo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T03:24:38.762Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e61f9bf0-54f6-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c842-U/10drOh+7YxtNXrNIvbqEenMnc\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T03:25:01.168Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec6daf10-54f6-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:25:11.684Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"06feadc0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"960896","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryYmqwCIx3JYE9a9Q6","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-9wfaQIS04A52W+xV1TO3fjcltqs\""},"statusCode":201,"responseTime":"147ms"},"msg":"","time":"2019-04-02T03:25:56.400Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"072325b0-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:25:56 GMT","etag":"W/\"ea85d-169dc14fb2d\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T03:25:56.542Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"071e91d0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8354","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:24:35.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"268b-HySJrxZDWeRJ/WidBtM8Y2d5lM4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"113ms"},"msg":"","time":"2019-04-02T03:25:56.577Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0a09f1f0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8454","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:25:56.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"268b-HySJrxZDWeRJ/WidBtM8Y2d5lM4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"224ms"},"msg":"","time":"2019-04-02T03:26:01.586Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0f26b100-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/wang-guan-ying-yong-chu-tan/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"46d5-k52BmqEeGbvZqlfzlmxBA+i3TLg\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4385-3Ad5ONzpFvqj9+tBQKmhem0oQso\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T03:26:09.980Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0f381620-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"145ms"},"msg":"","time":"2019-04-02T03:26:10.197Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1121bdb0-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"76a1-Au0dk2aqm5SNLukD1j4G58uZtmM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7b89-OovjewS0AQMc3dKi2HLBAtuXaOQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"85ms"},"msg":"","time":"2019-04-02T03:26:13.346Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"123b4400-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7b89-OovjewS0AQMc3dKi2HLBAtuXaOQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"90ms"},"msg":"","time":"2019-04-02T03:26:15.196Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"130c4fa0-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7b89-OovjewS0AQMc3dKi2HLBAtuXaOQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"95ms"},"msg":"","time":"2019-04-02T03:26:16.571Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"136fa550-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w2000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:17 GMT","etag":"W/\"ea85d-169dc154cbd\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"160ms"},"msg":"","time":"2019-04-02T03:26:17.287Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"40421a40-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8530","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n    actuate\n    包下GatewayCon","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:25:56.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"26d3-HqDorR3d1NV8uca/24jKxHcmuTQ\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"191ms"},"msg":"","time":"2019-04-02T03:27:32.519Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"417fa350-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.80.34","x-forwarded-proto":"https","x-real-ip":"3.87.80.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c8fc-sFnpc8Xv0+IlCBljALGr0050OQY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T03:27:34.452Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"42eb6850-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7b89-OovjewS0AQMc3dKi2HLBAtuXaOQ\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7ba4-rPKLzdoj9nndNeuHfV6HKBkdzJo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T03:27:36.852Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4312c670-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:27:37.050Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6d80e590-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"209.17.97.66","x-forwarded-proto":"https","x-real-ip":"209.17.97.66","host":"www.lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (compatible; Nimbostratus-Bot/v1.3.2; http://cloudsystemnetworks.com)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"30767","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"87ms"},"msg":"","time":"2019-04-02T03:28:48.322Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"836af170-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1c8fc-sFnpc8Xv0+IlCBljALGr0050OQY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T03:29:25.057Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8c7405e0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8578","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:27:32.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2707-A0wKJVS2oHqfcv5DLObeiWYOSio\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"153ms"},"msg":"","time":"2019-04-02T03:29:40.314Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a2544dc0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8650","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:29:40.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"274f-JCzqjKOvkb5iVZG0wqhypD9ssUI\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"197ms"},"msg":"","time":"2019-04-02T03:30:17.062Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a8eab480-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ca6e-jiltlbQR11sX5z659Hu2vfEUR+E\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T03:30:27.970Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bf3e3090-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8629","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryp4VqboVPgMYq07BP","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-/wXi8pw0AGb/qt/4i9OT+5fpi7Y\""},"statusCode":201,"responseTime":"33ms"},"msg":"","time":"2019-04-02T03:31:05.403Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c05286c0-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8740","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:30:16.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2795-qF3IJ1B/dGGBHaqBFpEsgq7I7zg\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"181ms"},"msg":"","time":"2019-04-02T03:31:07.364Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c1e311d0-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"14.17.3.64","x-forwarded-proto":"https","x-real-ip":"14.17.3.64","host":"www.lancexlab.cn","connection":"close","accept-encoding":"deflate, gzip","referer":"http://www.lancexlab.cn/","accept":"*/*","accept-language":"zh-cn","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_4 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13G35 QQ/6.5.3.410 V1_IPH_SQ_6.5.3_1_APP_A Pixel/750 Core/UIWebView NetType/2G Mem/117"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"108ms"},"msg":"","time":"2019-04-02T03:31:09.914Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c1f36580-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7ba4-rPKLzdoj9nndNeuHfV6HKBkdzJo\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7c84-WPerur9u7uP/xs/hGX12O7zIXPU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T03:31:09.974Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c206ed80-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:31:10.043Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c2159380-54f7-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:31:10.140Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"efb23640-54f7-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"83ms"},"msg":"","time":"2019-04-02T03:32:26.749Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"43afad40-54f8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"142ms"},"msg":"","time":"2019-04-02T03:34:47.717Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"46ef9600-54f8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T03:34:53.071Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b09a36f0-54f8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T03:37:50.363Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f63fa6e0-54f8-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T03:39:47.192Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07eb45c0-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cb11-18FsgZc+MhbS5emYrmAZJpR7+Q4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T03:40:16.855Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"10d7d180-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"8962","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能。\\n    \\n*     \\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:31:07.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2873-2Nawzqzs7qMX0IVSkqXocg9bR+E\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"153ms"},"msg":"","time":"2019-04-02T03:40:31.924Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"310fcde0-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9068","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；\\n    \\n*     \\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:40:31.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"28dd-td8ST9I5RbtEa+Z5wfPKwzxXqfk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"198ms"},"msg":"","time":"2019-04-02T03:41:26.024Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"46f82c10-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9110","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     \\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:41:25.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2907-hv4GD8HidbTRq4cCml1OMP4hDSw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"165ms"},"msg":"","time":"2019-04-02T03:42:02.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"474ba340-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9110","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     \\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:42:02.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"2907-hv4GD8HidbTRq4cCml1OMP4hDSw\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"140ms"},"msg":"","time":"2019-04-02T03:42:03.267Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"73786250-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T03:43:17.279Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9eefb410-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T03:44:30.209Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a79d6210-54f9-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T03:44:44.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"40543b50-54fa-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T03:49:00.980Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51209dc0-54fa-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T03:49:29.157Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"66a77b00-54fa-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"130ms"},"msg":"","time":"2019-04-02T03:50:05.365Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e9bb3c70-54fa-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T03:53:45.222Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ee134bf0-54fa-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T03:53:52.501Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2627d560-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T03:55:26.571Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"82804680-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.201.129.242","x-forwarded-proto":"https","x-real-ip":"34.201.129.242","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1cf9e-ANz7IZGxc3gV7QkOqPLOCBFq5KA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T03:58:01.499Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8e7138a0-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"107443","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundarygwKIiYFB7I4Jp5nl","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-OCdBP3I2ZhUxceB3ltnanIkgEt0\""},"statusCode":201,"responseTime":"137ms"},"msg":"","time":"2019-04-02T03:58:21.621Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8f354bf0-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9305","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    \\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:42:02.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"29b6-skGc1KQKY1m9zXQSoKQIFVE9LDs\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"166ms"},"msg":"","time":"2019-04-02T03:58:22.937Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"905f7410-54fb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7c84-WPerur9u7uP/xs/hGX12O7zIXPU\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7f23-FCVamMtKrprZRM6oEgqdYuuABRA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"128ms"},"msg":"","time":"2019-04-02T03:58:24.850Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"907cc010-54fb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T03:58:24.917Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90a29790-54fb-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T03:58:25.167Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"adeb1520-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T03:59:14.341Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"be91c720-54fb-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T03:59:42.281Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b9c6db0-54fc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T04:03:12.082Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6c229bd0-54fc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T04:04:33.469Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6e9a79a0-54fc-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T04:04:37.612Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0883df70-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"135ms"},"msg":"","time":"2019-04-02T04:08:55.922Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"092c5470-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T04:08:56.939Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0b90aa40-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"88ms"},"msg":"","time":"2019-04-02T04:09:00.989Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b05b8e00-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T04:13:37.418Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c9d9bd20-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T04:14:20.201Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d1df9260-54fd-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T04:14:33.664Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5d9f7b30-54fe-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T04:18:28.120Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7c743e10-54fe-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T04:19:19.842Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7e39e2e0-54fe-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.158.2.173","x-forwarded-proto":"https","x-real-ip":"54.158.2.173","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T04:19:22.825Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"18557c40-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T04:23:41.380Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1dd19960-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T04:23:50.584Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"343edf00-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T04:24:28.193Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bcc372f0-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T04:28:17.229Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e98a4f20-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.176.64","x-forwarded-proto":"https","x-real-ip":"18.232.176.64","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T04:29:32.365Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa9456d0-54ff-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T04:30:00.936Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5e847210-5500-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T04:32:48.624Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a72c2580-5500-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T04:34:50.502Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ad305e60-5500-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"128ms"},"msg":"","time":"2019-04-02T04:35:00.685Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"052611a0-5501-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T04:37:28.174Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4117ae30-5501-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T04:39:08.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69fd5890-5501-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T04:40:17.349Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bd2270f0-5501-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T04:42:36.855Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01fb9030-5502-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T04:44:32.348Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2c080750-5502-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T04:45:42.931Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d93bb00-5502-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T04:47:59.703Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c6a553d0-5502-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T04:50:02.305Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ddedb730-5502-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T04:50:41.394Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"280a7e70-5503-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.61.97","x-forwarded-proto":"https","x-real-ip":"3.84.61.97","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T04:52:45.702Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"73082fd0-5503-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T04:54:51.510Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7db86490-5503-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T04:55:09.439Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f2f29dc0-5503-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T04:58:26.127Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"35621000-5504-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T05:00:17.577Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"35a2e990-5504-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T05:00:18.013Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b8753530-5504-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.27.17.91","x-forwarded-proto":"https","x-real-ip":"100.27.17.91","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T05:03:57.481Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef06c820-5504-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"124ms"},"msg":"","time":"2019-04-02T05:05:29.121Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f46d8880-5504-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T05:05:38.104Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"592b5400-5505-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T05:08:27.113Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4875200-5505-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T05:10:33.558Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4900490-5505-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T05:10:33.599Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"200b0a70-5506-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T05:14:00.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"56335440-5506-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T05:15:31.648Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"70a00210-5506-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T05:16:15.970Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c56e0f80-5506-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T05:18:38.237Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1830bc90-5507-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T05:20:57.099Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3aca4fa0-5507-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T05:21:55.141Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7f95da50-5507-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T05:23:50.564Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e5720e20-5507-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T05:26:41.450Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0592d900-5508-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T05:27:35.351Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2418b890-5508-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T05:28:26.570Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a41faf30-5508-11e9-a41f-1dc48d552e2c","userId":null},"url":"/rss/","method":"GET","originalUrl":"/rss/","params":{},"headers":{"x-forwarded-for":"62.210.215.110","x-forwarded-proto":"https","x-real-ip":"62.210.215.110","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.66 Safari/537.36","cache-control":"max-age=0, no-cache","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/xml; charset=utf-8","etag":"W/\"a0b0-vEYWrFKvQ65wBwuqe7jB/k/Pmxo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"100ms"},"msg":"","time":"2019-04-02T05:32:01.417Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a67055f0-5508-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"125ms"},"msg":"","time":"2019-04-02T05:32:05.326Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c1e720c0-5508-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T05:32:51.343Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d228a850-5508-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T05:33:18.612Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5fae35f0-5509-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.152.95","x-forwarded-proto":"https","x-real-ip":"54.146.152.95","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T05:37:16.030Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"654750f0-5509-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.211.223","x-forwarded-proto":"https","x-real-ip":"52.90.211.223","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T05:37:25.429Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"97e0ceb0-5509-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T05:38:50.323Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0839f240-550a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T05:41:58.799Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e922940-550a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T05:42:36.295Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3a968e10-550a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"87ms"},"msg":"","time":"2019-04-02T05:43:23.338Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"be994360-550a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T05:47:04.789Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ce8cd200-550a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T05:47:31.537Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"024c5930-550b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T05:48:58.357Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"665ddf20-550b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T05:51:46.254Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7548d760-550b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T05:52:11.301Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a0a686a0-550b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T05:53:24.032Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"066a7780-550c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"194ms"},"msg":"","time":"2019-04-02T05:56:14.913Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21e84730-550c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T05:57:00.881Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"551c0920-550c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T05:58:26.778Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ab261900-550c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T06:00:51.161Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e1d51f00-550c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T06:02:22.884Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"077b55d0-550d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T06:03:26.054Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5095c840-550d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T06:05:28.691Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9326a530-550d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T06:07:20.366Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d2e639b0-550d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T06:09:07.329Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f989e350-550d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T06:10:12.142Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"36614c00-550e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.174.101","x-forwarded-proto":"https","x-real-ip":"34.239.174.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T06:11:54.215Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9bc6c930-550e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T06:14:44.338Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"afc531b0-550e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T06:15:17.873Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cfad3950-550e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T06:16:11.419Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5220c320-550f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T06:19:50.291Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"61ec5760-550f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T06:20:16.768Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"77354140-550f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T06:20:52.496Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff4abfb0-550f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"119ms"},"msg":"","time":"2019-04-02T06:24:40.869Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"280d9fd0-5510-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T06:25:49.181Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"285ecd10-5510-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T06:25:49.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b5f6aa30-5510-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T06:29:47.268Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf88d680-5510-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T06:30:30.163Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7884320-5510-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T06:30:43.592Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"720c6250-5511-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T06:35:02.836Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"81330400-5511-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T06:35:28.242Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"19e5e5a0-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T06:39:44.450Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"221e3c90-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T06:39:58.212Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"27f76dd0-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T06:40:08.025Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bb41e160-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T06:44:15.150Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d55af0f0-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T06:44:58.922Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7fcc4f0-5512-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.101.179","x-forwarded-proto":"https","x-real-ip":"18.212.101.179","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T06:45:03.340Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6d72f220-5513-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T06:49:14.111Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"732e6230-5513-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T06:49:23.707Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9c139760-5513-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T06:50:32.326Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3235bc00-5514-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"119ms"},"msg":"","time":"2019-04-02T06:54:44.283Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b9a36e0-5514-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T06:54:59.984Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51ad4e90-5514-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.228.200.83","x-forwarded-proto":"https","x-real-ip":"34.228.200.83","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T06:55:37.013Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ea24d4e0-5514-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T06:59:52.823Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f78f6eb0-5514-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T07:00:15.309Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01181360-5515-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T07:00:31.310Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a6f837b0-5515-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T07:05:09.597Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"acbe7d30-5515-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T07:05:19.300Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc4d0870-5515-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"222.180.149.236","x-forwarded-proto":"http","x-real-ip":"222.180.149.236","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","accept-encoding":"","accept-language":"zh-CN,zh;q=0.8","cache-control":"max-age=0"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/html; charset=utf-8","content-length":"98"},"statusCode":301,"responseTime":"0ms"},"msg":"","time":"2019-04-02T07:05:45.337Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ca8615d0-5515-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T07:06:09.269Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"46fb5a30-5516-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T07:09:38.066Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6ef4f6e0-5516-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T07:10:45.142Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"783484a0-5516-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T07:11:00.632Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0a25a9c0-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T07:15:05.508Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1aa1a240-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T07:15:33.164Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26a5a730-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T07:15:53.317Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"af246ec0-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T07:19:42.413Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bb5b1c70-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"69ms"},"msg":"","time":"2019-04-02T07:20:02.814Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef1a5580-5517-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.58.54","x-forwarded-proto":"https","x-real-ip":"3.84.58.54","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T07:21:29.604Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"47d04b80-5518-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T07:23:58.457Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8556b8e0-5518-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T07:25:41.657Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8adc24d0-5518-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.175.183.159","x-forwarded-proto":"https","x-real-ip":"54.175.183.159","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T07:25:50.924Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0631ef70-5519-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T07:29:17.844Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2f72d930-5519-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T07:30:27.057Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4b453180-5519-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T07:31:13.749Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c9f21660-5519-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T07:34:46.256Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ed9b1da0-5519-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T07:35:46.086Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0ff11800-551a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/rss","method":"GET","originalUrl":"/rss","params":{},"headers":{"x-forwarded-for":"62.210.215.110","x-forwarded-proto":"https","x-real-ip":"62.210.215.110","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.66 Safari/537.36","cache-control":"max-age=0, no-cache","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"/rss/"},"statusCode":301,"responseTime":"10ms"},"msg":"","time":"2019-04-02T07:36:43.659Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"10f05f90-551a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/rss/","method":"GET","originalUrl":"/rss/","params":{},"headers":{"x-forwarded-for":"62.210.215.110","x-forwarded-proto":"https","x-real-ip":"62.210.215.110","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.66 Safari/537.36","cache-control":"max-age=0, no-cache","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/xml; charset=utf-8","etag":"W/\"a0b0-vEYWrFKvQ65wBwuqe7jB/k/Pmxo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T07:36:45.382Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"126bb4f0-551a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T07:36:47.868Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7b0dbf80-551a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T07:39:43.404Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a5b9f910-551a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T07:40:55.007Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b01c0dd0-551a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T07:41:12.414Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1d2fca60-551b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"146ms"},"msg":"","time":"2019-04-02T07:44:15.513Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4b781670-551b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T07:45:33.059Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7bb15d10-551b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T07:46:53.983Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dac803d0-551b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T07:49:33.496Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e60f9690-551b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T07:49:52.437Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"310c5d90-551c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T07:51:58.231Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8dbb0500-551c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T07:54:33.726Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9eece000-551c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T07:55:02.588Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d8c7aa80-551c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T07:56:39.650Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"40e34700-551d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T07:59:34.307Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"678bab90-551d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T08:00:39.167Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a221fde0-551d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T08:02:17.443Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"00df3a00-551e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T08:04:56.400Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"12e702a0-551e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T08:05:26.662Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"638ee600-551e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T08:07:41.958Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b9e679a0-551e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T08:10:06.824Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"baae0f60-551e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T08:10:08.153Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2221ac10-551f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"47.100.38.9","x-forwarded-proto":"https","x-real-ip":"47.100.38.9","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:36.0) Gecko/20100101 Firefox/36.0","accept":"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"30767","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T08:13:01.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26997890-551f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T08:13:09.192Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"67bd30f0-551f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T08:14:58.471Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6ba67910-551f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T08:15:05.034Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e11e5780-551f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.237.124.21","x-forwarded-proto":"https","x-real-ip":"34.237.124.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T08:18:22.113Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c602c10-5520-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"106ms"},"msg":"","time":"2019-04-02T08:20:01.597Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2048b0e0-5520-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T08:20:08.096Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26911eb0-5520-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"106.15.229.102","x-forwarded-proto":"https","x-real-ip":"106.15.229.102","host":"www.lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:36.0) Gecko/20100101 Firefox/36.0","accept":"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"30767","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T08:20:18.652Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5561d4a0-5520-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"47.92.125.35","x-forwarded-proto":"http","x-real-ip":"47.92.125.35","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:36.0) Gecko/20100101 Firefox/36.0","accept":"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/html; charset=utf-8","content-length":"98"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T08:21:37.132Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"556b7190-5520-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"47.92.125.35","x-forwarded-proto":"https","x-real-ip":"47.92.125.35","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:36.0) Gecko/20100101 Firefox/36.0","accept":"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"30767","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"101ms"},"msg":"","time":"2019-04-02T08:21:37.296Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"755044e0-5520-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.132.102.45","x-forwarded-proto":"https","x-real-ip":"101.132.102.45","host":"www.lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:36.0) Gecko/20100101 Firefox/36.0","accept":"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"30767","etag":"W/\"782f-YYlzm4cwKYc4+2Nkvxxnu2CxxYg\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T08:22:30.777Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9ab2e300-5520-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T08:23:33.470Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bb712660-5520-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T08:24:28.395Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dba997f0-5520-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T08:25:22.468Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"37448570-5521-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T08:27:56.162Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"76620d90-5521-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"124ms"},"msg":"","time":"2019-04-02T08:29:42.119Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7dd65130-5521-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T08:29:54.545Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f7e03ae0-5521-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d1c7-IWg5sKjuD1nx8mYn6Q8XS1DNWM8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T08:33:19.286Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"282911e0-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9588","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T03:58:22.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T03:09:27.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T03:09:27.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2ad1-ReyF4DLScgO7Q3/KjghMI186794\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"225ms"},"msg":"","time":"2019-04-02T08:34:40.482Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3271ab30-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T08:34:57.562Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"410f1fb0-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T08:35:22.080Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b04d0f40-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T08:38:28.715Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"db13d5b0-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T08:39:40.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"deaa1bd0-5522-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T08:39:46.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7a1343d0-5523-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T08:44:07.235Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a0199c00-5523-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T08:45:11.015Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a2a4dac0-5523-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T08:45:15.290Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"11147dd0-5524-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T08:48:20.564Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"612f6370-5524-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.118.85","x-forwarded-proto":"https","x-real-ip":"18.206.118.85","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T08:50:34.994Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6d86b880-5524-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T08:50:55.673Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cc7f4ff0-5524-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.162.202.107","x-forwarded-proto":"https","x-real-ip":"54.162.202.107","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"136ms"},"msg":"","time":"2019-04-02T08:53:35.100Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2276e940-5525-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T08:55:59.247Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"23cbcae0-5525-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"96ms"},"msg":"","time":"2019-04-02T08:56:01.520Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"93639a40-5525-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T08:59:08.698Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bce33ab0-5525-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T09:00:18.317Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ceab6240-5525-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T09:00:48.154Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"35973150-5526-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T09:03:40.826Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7a923070-5526-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T09:05:36.552Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"98bd45d0-5526-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"90ms"},"msg":"","time":"2019-04-02T09:06:27.209Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e75757d0-5526-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T09:08:39.050Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3ed4a6c0-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"80ms"},"msg":"","time":"2019-04-02T09:11:05.854Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"443c2a70-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d520-pTcRtGffZcmZgmJdtMBHWTgeaaA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T09:11:14.914Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"52aa5190-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9808","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法，\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T08:34:40.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T08:34:40.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T08:34:40.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2bad-8El2kiasCm0lcKhkon/xAJ8Otfk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"200ms"},"msg":"","time":"2019-04-02T09:11:39.252Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"52e73380-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9808","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法，\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:11:39.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T08:34:40.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T08:34:40.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"2bad-8El2kiasCm0lcKhkon/xAJ8Otfk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"195ms"},"msg":"","time":"2019-04-02T09:11:39.646Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8e66d460-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d7b9-DLqtCQMXCoZzpCG6wVrA1pmMuIM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T09:13:19.316Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8fe36240-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9808","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:11:39.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T08:34:40.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T08:34:40.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2bad-TG6L9hW63c1kw1JqA4rwjDUElcA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"146ms"},"msg":"","time":"2019-04-02T09:13:21.912Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"93f47db0-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"160323","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryxxGYMHiNS7xQPiD7","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-Gqr0V/qzcN7oX1HpVy9Fp1ypl1U\""},"statusCode":201,"responseTime":"181ms"},"msg":"","time":"2019-04-02T09:13:28.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"94bcd6c0-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9898","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:13:21.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T08:34:40.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T08:34:40.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2bf3-J7yNFR3keTb+piN8XcR07QtJR28\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"157ms"},"msg":"","time":"2019-04-02T09:13:30.059Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"96022800-5527-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"7f23-FCVamMtKrprZRM6oEgqdYuuABRA\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"8184-jmNkkl3LguTS0gxNNY0quF9DN+Y\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T09:13:32.087Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"96147780-5527-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T09:13:32.155Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"962a7080-5527-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T09:13:32.299Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dd74dde0-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T09:15:31.946Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e1746d20-5527-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T09:15:38.656Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51fda160-5528-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T09:18:47.462Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a34a5040-5528-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T09:21:03.882Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07663670-5529-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T09:23:51.831Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c953de0-5529-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.76.245","x-forwarded-proto":"https","x-real-ip":"18.206.76.245","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T09:25:47.895Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4fc65990-5529-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T09:25:53.247Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c5d7b8e0-5529-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T09:29:11.322Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ed8865b0-5529-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T09:30:17.920Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"025c1f90-552a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T09:30:52.866Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"85220f20-552a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T09:34:32.265Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ab8c8050-552a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.167.213.235","x-forwarded-proto":"https","x-real-ip":"54.167.213.235","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T09:35:36.722Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b3ea1280-552a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T09:35:50.749Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3f3874d0-552b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T09:39:44.459Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"578290c0-552b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T09:40:25.220Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5bdbd8c0-552b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T09:40:32.519Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8a54250-552b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T09:44:28.705Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f7cd4390-552b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T09:44:54.153Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"119d3c30-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.96.34","x-forwarded-proto":"https","x-real-ip":"52.90.96.34","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d85b-1wTfKewHleOAPz8lLRf941Or000\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"106ms"},"msg":"","time":"2019-04-02T09:45:37.504Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2df76220-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"9982","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    \\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:13:29.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T08:34:40.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T08:34:40.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2c47-iV+PCrEtemVNjQpOI5tMcnlBUAI\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"245ms"},"msg":"","time":"2019-04-02T09:46:25.210Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"93815740-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d93e-GdUBMIlorOtE1n8z2bXI57hfn88\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T09:49:15.378Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aa8585b0-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d93e-GdUBMIlorOtE1n8z2bXI57hfn88\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T09:49:53.989Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c86c1800-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"125740","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundary5pCtgvoTEWtYGrle","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-UNqkAw9S6mI6+WaKmURCB0XAaAI\""},"statusCode":201,"responseTime":"265ms"},"msg":"","time":"2019-04-02T09:50:44.363Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ce406740-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1d93e-GdUBMIlorOtE1n8z2bXI57hfn88\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T09:50:53.938Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dc122750-552c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10124","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client,\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:46:25.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2cc1-JsyiQvLhGr8XYLM4cggkV5BUSKk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"142ms"},"msg":"","time":"2019-04-02T09:51:17.206Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"086e81e0-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10230","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient，\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:51:17.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2d2b-xscPUlPDmtBXjCZCi1JYXI+d6OA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"165ms"},"msg":"","time":"2019-04-02T09:52:31.655Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4ba5ff10-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1dbc5-+GwHD1HcYAqjveJbxLqMn6N026w\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T09:54:24.308Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c934540-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.167.213.235","x-forwarded-proto":"https","x-real-ip":"54.167.213.235","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1dbc5-+GwHD1HcYAqjveJbxLqMn6N026w\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T09:54:25.865Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51904750-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10399","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:52:31.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2dd4-XOFlR5LJxIVZu/b7ZOezazmL60Q\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"131ms"},"msg":"","time":"2019-04-02T09:54:34.314Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6a533cc0-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.87.63.47","x-forwarded-proto":"https","x-real-ip":"3.87.63.47","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ddc0-oJ4oDFMLDVTDhZeTtkY16GvzaV0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T09:55:15.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"838ff610-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10517","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:54:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2e4a-R5i+8z5EC0TPmrCI478ZxIWtkbU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"158ms"},"msg":"","time":"2019-04-02T09:55:58.226Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4d25670-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10658","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例；\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:55:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2ed7-aK9Yc+qutat7BNMVUCTL7Ojgd8o\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"129ms"},"msg":"","time":"2019-04-02T09:58:41.373Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f5ef49e0-552d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e0d4-aA6gtnPSDaNoWrrEPeX2n9btMt8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T09:59:09.992Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0caad690-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10727","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:58:41.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2f1c-AIB7XrSfT4LUChLxVw5DZRrOgzA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"250ms"},"msg":"","time":"2019-04-02T09:59:48.343Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0ea37240-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10730","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:59:48.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2f1f-k18nXEpy09Ouhe9Jer7diHUqUKI\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"198ms"},"msg":"","time":"2019-04-02T09:59:51.596Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"123f36a0-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e1ac-RNtZuiAxInPY29fAO+zgAlTZ41M\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T09:59:57.508Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1515d640-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e1ac-RNtZuiAxInPY29fAO+zgAlTZ41M\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T10:00:02.271Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80e3a550-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10836","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri;\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T09:59:51.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2f89-mySE35AyY8oR7bM78Zkqed/5imM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"138ms"},"msg":"","time":"2019-04-02T10:03:03.217Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"af3bcfe0-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e2ea-1TG1TOY/qWmgHZ+rk32MM9twLwQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T10:04:20.876Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b973ee70-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10881","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri;\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:03:03.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2fb6-YCdX8jBDp+tK5eIgv7d8kbIUSg8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"177ms"},"msg":"","time":"2019-04-02T10:04:38.155Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bafb2ab0-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e371-R5P/LKgI4n1yI+d/GRFMxFhvcnQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T10:04:40.586Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bbedc810-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10890","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri;\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:04:38.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2fbf-l1rC5nlvgwJKVqQvkRNjsjPYn4M\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"142ms"},"msg":"","time":"2019-04-02T10:04:42.273Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c22e1f90-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.167.213.235","x-forwarded-proto":"https","x-real-ip":"54.167.213.235","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e38c-T/4YJ/8dRQTCOz/faKXwcSAkgWU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T10:04:52.667Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c9c7c580-552e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10925","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri;\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:04:42.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"2fe2-sfgwp39p8nhiSKmfOBjwzKaoDdQ\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"237ms"},"msg":"","time":"2019-04-02T10:05:05.608Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cb49f8b0-552e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8184-jmNkkl3LguTS0gxNNY0quF9DN+Y\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"8590-IioGvixgpjS0yBfF8qWUqG7SpC0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T10:05:07.973Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cb5e9220-552e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T10:05:08.038Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cb732b90-552e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T10:05:08.174Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"154702f0-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10989","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition;\\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:05:05.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3022-5UA2bQFIBU0QdILNI8Povtkq5Qs\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"151ms"},"msg":"","time":"2019-04-02T10:07:12.184Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1a58c580-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"10998","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:07:12.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"302b-Y2MEhVEXJ5xEf6JHvzhubsxgKco\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"121ms"},"msg":"","time":"2019-04-02T10:07:20.662Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c695600-552f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8590-IioGvixgpjS0yBfF8qWUqG7SpC0\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"85d2-amATzX4PJxq+arw4/HP7ym0ESWY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T10:07:24.050Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c8a99a0-552f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T10:07:24.221Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"63ba7a20-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e4c2-/jziIEJjTiS0sDtAf2U81R4jW6g\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T10:09:23.702Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"76af3ad0-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e4c2-/jziIEJjTiS0sDtAf2U81R4jW6g\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T10:09:55.500Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"77ffd6b0-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e4c2-/jziIEJjTiS0sDtAf2U81R4jW6g\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T10:09:57.702Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7873ce30-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11121","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:07:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"30a6-6l59hkZUZZi1MnlVUhyB//1KOIc\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"143ms"},"msg":"","time":"2019-04-02T10:09:58.566Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc81d540-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11136","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理默认１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:09:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"30b5-usQHVhK7UJhSIaakUAbZvXkmbpc\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"172ms"},"msg":"","time":"2019-04-02T10:11:52.772Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bccebcc0-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11136","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理默认１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:11:52.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"30b5-usQHVhK7UJhSIaakUAbZvXkmbpc\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"118ms"},"msg":"","time":"2019-04-02T10:11:53.234Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf775940-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11157","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:11:52.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"30ca-R5x6TcCU6WbLe+Mh2Nce7g7kcog\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"146ms"},"msg":"","time":"2019-04-02T10:12:24.554Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8936b30-552f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"85d2-amATzX4PJxq+arw4/HP7ym0ESWY\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"8671-8go8NS3Gl/ATFsmRQwsjDhkgNbw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T10:13:06.614Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8be4bc0-552f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T10:13:06.815Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"feb4b3b0-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"7614","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundarybeRS9hXWiSmB6CyJ","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-oFxTT+C4Kv5rLttBbeLgCkyBhCo\""},"statusCode":201,"responseTime":"32ms"},"msg":"","time":"2019-04-02T10:13:43.694Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ffa38080-552f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11254","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    \\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:12:24.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3117-xWBdUjzoOvepg+nwI+IX6KR3S7M\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"204ms"},"msg":"","time":"2019-04-02T10:13:45.431Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"068cc230-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e752-WUjEarmoBylA7bSfAc+RUQqNSf8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T10:13:56.861Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"147083a0-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.167.213.235","x-forwarded-proto":"https","x-real-ip":"54.167.213.235","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e752-WUjEarmoBylA7bSfAc+RUQqNSf8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T10:14:20.198Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"427006e0-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.91.12.236","x-forwarded-proto":"https","x-real-ip":"52.91.12.236","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1e752-WUjEarmoBylA7bSfAc+RUQqNSf8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"99ms"},"msg":"","time":"2019-04-02T10:15:37.395Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5c5d4b80-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11492","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent接口，这是spring框架的内部标准，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该接口。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:13:45.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3205-ByjrS/RgaREBStJ01+ddt3Y0f9U\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"175ms"},"msg":"","time":"2019-04-02T10:16:20.969Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b972cb10-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ea1f-Yspi8m3lRzH6nFMuK85H5j6gHo8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T10:18:57.011Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba36de60-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11657","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:16:20.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"32aa-44cpM3Z/qSqhk1dLVsBFO7QfNFU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T10:18:58.399Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc432920-5530-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8671-8go8NS3Gl/ATFsmRQwsjDhkgNbw\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"886f-rT9oMIA7JWnl9XU2oB1kudHbj9s\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"151ms"},"msg":"","time":"2019-04-02T10:19:01.835Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc635b50-5530-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T10:19:01.897Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc7a8cd0-5530-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T10:19:02.048Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dc00c560-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ec0e-XoFYIHRUJjYDPPJWhIzIbXKwJRs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T10:19:54.998Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8736aa0-5530-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ec0e-XoFYIHRUJjYDPPJWhIzIbXKwJRs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T10:20:15.872Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"49d030d0-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"27163","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundarycTNlhgA9XYoVUpH2","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-CSO3AfS+ljG5gGgItFDa4h6NLS4\""},"statusCode":201,"responseTime":"53ms"},"msg":"","time":"2019-04-02T10:22:59.220Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4aa2ea20-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11750","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:18:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"32f3-L9sZ44kUU8JWVEBFdxtLzxzLAAA\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"216ms"},"msg":"","time":"2019-04-02T10:23:00.764Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c8a6ed0-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"886f-rT9oMIA7JWnl9XU2oB1kudHbj9s\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"88d8-tLaQeH1zfYV6GIFA9cosx6nFT3g\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"189ms"},"msg":"","time":"2019-04-02T10:23:03.932Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4cb1f400-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T10:23:04.002Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4cc7c5f0-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T10:23:04.147Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7b80d530-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11775","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包一级目录\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:23:00.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"330c-4BLGOEoJG2nBVjqie/qdvelqY/8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"146ms"},"msg":"","time":"2019-04-02T10:24:22.680Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"850f6d50-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1ed03-t++CrgBBbKBaRxn1UosVtBctvXE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T10:24:38.617Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95438760-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11854","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:24:22.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"335b-c4OEHmJZJH3VDTDFIFnzRhIR40c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"175ms"},"msg":"","time":"2019-04-02T10:25:05.928Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"97788fd0-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1edf0-UDGPGk2WSRLHWyw5YiPHtmYiv1o\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T10:25:09.513Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b386b8a0-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1edf0-UDGPGk2WSRLHWyw5YiPHtmYiv1o\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T10:25:56.577Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b4725120-5531-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"11905","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    \\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:25:05.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"338e-4/+gR37fQiTuaytOvV+lZUoVAy0\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"126ms"},"msg":"","time":"2019-04-02T10:25:58.195Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dda27200-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"157.55.39.18","x-forwarded-proto":"https","x-real-ip":"157.55.39.18","host":"www.lancexlab.cn","connection":"close","cache-control":"no-cache","pragma":"no-cache","accept":"*/*","accept-encoding":"gzip, deflate","user-agent":"Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T10:27:07.170Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"de4df440-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"157.55.39.18","x-forwarded-proto":"https","x-real-ip":"157.55.39.18","host":"www.lancexlab.cn","connection":"close","cache-control":"no-cache","pragma":"no-cache","accept":"*/*","accept-encoding":"gzip, deflate","user-agent":"Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T10:27:08.295Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e0b57e60-5531-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"157.55.39.191","x-forwarded-proto":"https","x-real-ip":"157.55.39.191","host":"www.lancexlab.cn","connection":"close","cache-control":"no-cache","pragma":"no-cache","accept":"*/*","accept-encoding":"gzip, deflate","from":"bingbot(at)microsoft.com","user-agent":"Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"782f-yipMky9jyqxEr9PZ6vmcADeIwPI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"96ms"},"msg":"","time":"2019-04-02T10:27:12.423Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"02d378d0-5532-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12086","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:25:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3443-jIL2qBcVY5t08sWidZ5vegwj2II\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"152ms"},"msg":"","time":"2019-04-02T10:28:09.721Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3a1ebed0-5532-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T10:29:42.389Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4658c7e0-5532-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.146.200","x-forwarded-proto":"https","x-real-ip":"18.232.146.200","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T10:30:02.903Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"52882290-5532-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T10:30:23.342Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8cb2760-5532-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T10:35:02.281Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07e2fc00-5533-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"134ms"},"msg":"","time":"2019-04-02T10:35:27.687Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1275bdb0-5533-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T10:35:45.335Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4b6d790-5533-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T10:39:50.718Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba6c8d00-5533-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T10:40:27.135Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d2a5b900-5533-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.204.69.26","x-forwarded-proto":"https","x-real-ip":"34.204.69.26","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f0a4-DmrUqeSybz3HjYynCBoQiABkMhE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T10:41:07.778Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"02faec10-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12170","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:28:09.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3497-js/GlxNg5l95301pJps23E5r9WU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"144ms"},"msg":"","time":"2019-04-02T10:42:28.963Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4833b780-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f19c-SYiugi2Tnz8c5++ziB2CKimc3Ms\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T10:44:25.011Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6f255a10-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.167.213.235","x-forwarded-proto":"https","x-real-ip":"54.167.213.235","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f19c-SYiugi2Tnz8c5++ziB2CKimc3Ms\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T10:45:30.350Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"74b1f1f0-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12170","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:42:28.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"3497-js/GlxNg5l95301pJps23E5r9WU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"113ms"},"msg":"","time":"2019-04-02T10:45:39.714Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"88f6d950-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f19c-SYiugi2Tnz8c5++ziB2CKimc3Ms\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T10:46:13.666Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a2bd8320-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12238","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:42:28.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T09:46:24.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T09:46:24.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"34db-WfUHmXibBKCEf3yX73WTfM+AgyE\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"209ms"},"msg":"","time":"2019-04-02T10:46:57.063Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ac0b41b0-5534-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"88d8-tLaQeH1zfYV6GIFA9cosx6nFT3g\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"8ab6-LR7GB6gXHu3DpCZ63t+hnnH2VaM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T10:47:12.534Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ac33ff60-5534-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T10:47:12.728Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ca8e8930-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"25509","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryyumCqfXNM8jOTfsy","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-HBR451QmXdxph701/6zCI/lUi+0\""},"statusCode":201,"responseTime":"54ms"},"msg":"","time":"2019-04-02T10:48:03.706Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cb3aa7b0-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12331","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:46:56.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3524-6hz6smj99E2bq8NMNkl3A58wchg\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"238ms"},"msg":"","time":"2019-04-02T10:48:05.021Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"edc127f0-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f317-C2CJS5n7wBgChHKPWpb0jYUdmCM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T10:49:02.773Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef355160-5534-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12377","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:48:04.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3552-VD7PCmUojoQOBTXsKu6vSM0LFjY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"181ms"},"msg":"","time":"2019-04-02T10:49:05.326Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"240efb20-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.36.0","x-forwarded-proto":"https","x-real-ip":"35.173.36.0","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f39c-okkxrPzum23JxQjDfbE2auA+P68\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T10:50:33.855Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"24ee3790-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12459","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:49:05.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"35a4-NT7eqwr+r89OQXqzIvRwFdcWo+U\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"124ms"},"msg":"","time":"2019-04-02T10:50:35.399Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2f296360-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f492-WEpO6KlwrigUF4Z6ZFA6aK0g8X8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T10:50:52.485Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"32d02440-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12495","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:50:35.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"35c8-TYknXS4uB8FbOEn5OCphtqlbJ/g\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"145ms"},"msg":"","time":"2019-04-02T10:50:58.711Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d5bcbc0-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12541","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n\\n    \\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:50:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"35f6-szSY0dIunKoXtRKxuzUtyrkcwr8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"160ms"},"msg":"","time":"2019-04-02T10:51:43.263Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5c16b350-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"23130","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundarynj2iTOyU7lsqwFP6","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-YNMOvep95p5BdrsUfNpEakgkejY\""},"statusCode":201,"responseTime":"53ms"},"msg":"","time":"2019-04-02T10:52:07.867Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"64892d10-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12658","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:51:43.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3657-QT0B50ZzG7RNsnigccvjMOgJ+e4\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"145ms"},"msg":"","time":"2019-04-02T10:52:22.134Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d6b1c30-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12700","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:52:22.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3681-bweSiHRu/tjI1z26CavZXd5FMf8\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"137ms"},"msg":"","time":"2019-04-02T10:53:03.873Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90e05780-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12766","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:53:03.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"36c3-Jzh/x9wbWr9rxey1VaHbhhlAF54\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"136ms"},"msg":"","time":"2019-04-02T10:53:36.515Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9858e0e0-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12766","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:53:36.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"36c3-Jzh/x9wbWr9rxey1VaHbhhlAF54\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"109ms"},"msg":"","time":"2019-04-02T10:53:49.022Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"99edffd0-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f7be-onvSQXrDqKB6DJAyLO6MnBzsXLw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T10:53:51.627Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9b062690-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12766","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:53:36.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"36c3-Jzh/x9wbWr9rxey1VaHbhhlAF54\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"151ms"},"msg":"","time":"2019-04-02T10:53:53.555Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cff9c0f0-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f7be-onvSQXrDqKB6DJAyLO6MnBzsXLw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T10:55:22.278Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dd6b3890-5535-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1f7be-onvSQXrDqKB6DJAyLO6MnBzsXLw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T10:55:44.848Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"04821660-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12828","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:53:36.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3701-mN+X6PJgGBshN5sd36gl5nLG6YE\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"176ms"},"msg":"","time":"2019-04-02T10:56:50.553Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08381980-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"26312","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryHxiy2rNMoFQccBqF","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-uiaHtxIcREV4VqIL9zKkwbKwuvQ\""},"statusCode":201,"responseTime":"57ms"},"msg":"","time":"2019-04-02T10:56:56.658Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"091d7070-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"12918","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:56:50.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3747-t8nkUj29H+K1e5iHHSrGtS9jlJM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"161ms"},"msg":"","time":"2019-04-02T10:56:58.269Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"27814910-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"29145","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundary8IQwPC5apfFjeQIq","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-PBMqopt6i0SIrU6RBQYoW2soZUM\""},"statusCode":201,"responseTime":"50ms"},"msg":"","time":"2019-04-02T10:57:49.140Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c857380-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13132","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:56:58.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3809-yveNdpHyh6Pajqf1Yk2/deUzgJk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"156ms"},"msg":"","time":"2019-04-02T10:58:51.350Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54a0f3a0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T10:59:04.802Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54a141c0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T10:59:04.804Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54a168d0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T10:59:04.805Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54a18fe0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"8ms"},"msg":"","time":"2019-04-02T10:59:04.807Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5ad34160-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.146.138.32","x-forwarded-proto":"https","x-real-ip":"54.146.138.32","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fb24-PAQ4r0nme5/FZiLiIyfCQT5+9Ew\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T10:59:15.233Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"63211c20-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13151","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:58:51.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"381c-EnbRlE/GWXqXC6khApzpTKCi29c\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"163ms"},"msg":"","time":"2019-04-02T10:59:29.288Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"655428c0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8ab6-LR7GB6gXHu3DpCZ63t+hnnH2VaM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"8e68-C9fnwTsuzF3FUibP40SFvIOpUPM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T10:59:32.891Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"657fcca0-5536-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T10:59:33.101Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"68145a30-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.206.110.237","x-forwarded-proto":"https","x-real-ip":"52.206.110.237","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fb60-hZBmRdyesLF7I6otQukWAC9Box4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T10:59:37.463Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7236a6d0-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13170","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:59:29.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"382f-r55L425zW6rCOe0hg702KATxV4w\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"213ms"},"msg":"","time":"2019-04-02T10:59:54.646Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8e0a37a0-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.91.12.236","x-forwarded-proto":"https","x-real-ip":"52.91.12.236","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fb7f-jyN09IJbQPGQZ9ySfp8jhv8rg94\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T11:00:41.161Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"96086bc0-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13256","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，　\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T10:59:54.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3885-szTawE4Fddp4wdVpf+szwz8uoJ0\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"183ms"},"msg":"","time":"2019-04-02T11:00:54.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f2593bc0-5536-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13471","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中。　\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:00:54.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"395c-kSEMKMN1heaobmyKijvUw4Q6eeU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"208ms"},"msg":"","time":"2019-04-02T11:03:29.615Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0d664840-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.91.12.236","x-forwarded-proto":"https","x-real-ip":"52.91.12.236","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fef4-GO3QRvgjbpzV5cznNYMos8W7YIs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"117ms"},"msg":"","time":"2019-04-02T11:04:14.906Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"30d41b40-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"198.108.66.224","x-forwarded-proto":"https","x-real-ip":"198.108.66.224","host":"140.143.4.220","connection":"close","user-agent":"Mozilla/5.0 zgrab/0.x","accept":"*/*","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"782f-uSaIi8dTQFIF4UYPCo7124mr4NM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T11:05:14.311Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"340bc6a0-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fef4-GO3QRvgjbpzV5cznNYMos8W7YIs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T11:05:19.700Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4872dc00-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1fef4-GO3QRvgjbpzV5cznNYMos8W7YIs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T11:05:53.916Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c11ada0-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13676","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:03:29.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3a29-irlNhxaEY0qwKWVOIEmHin+vdjk\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"305ms"},"msg":"","time":"2019-04-02T11:06:00.238Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4f3ed1b0-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13682","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:05:59.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3a2f-kU8NDzF1YczsRouNvJ/hfKrXvGM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"200ms"},"msg":"","time":"2019-04-02T11:06:05.462Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"517b7b40-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"8e68-C9fnwTsuzF3FUibP40SFvIOpUPM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9068-N29LVeZN6iauQo2U78TJx5+q7EE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T11:06:09.084Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51a46000-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:06:09.284Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"73f37c90-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13774","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。\"]]],[1,\"p\",[]],[1,\"p\",[[0,[],0,\"附：基于spring-cloud-gateway增强实现参考。\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:06:05.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3a8b-cIHFOnr2YgR0EfHLZLQLpdicJLU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"170ms"},"msg":"","time":"2019-04-02T11:07:07.015Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"747ad500-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{},"headers":{"x-forwarded-for":"195.112.197.210, 195.112.197.210","x-forwarded-proto":"http","x-real-ip":"195.112.197.210","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.62 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"en-US,en;q=0.5","accept-encoding":"gzip, deflate","dnt":"1","referer":"http://lancexlab.cn/","origin":"http://lancexlab.cn","cache-control":"max-stale=0"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","vary":"Accept, Accept-Encoding","content-type":"text/html; charset=utf-8","content-length":"176"},"statusCode":301,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:07:07.732Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"767a7590-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"195.112.197.210","x-forwarded-proto":"https","x-real-ip":"195.112.197.210","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.62 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"en-US,en;q=0.5","accept-encoding":"gzip, deflate","dnt":"1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"90ab-55DB0ISwpwi/il3uYaO6d8k+JgU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T11:07:11.145Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8c8799d0-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13885","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]],[\"a\",[\"href\",\"https://github.com/IBlogLab/enhance-gateway\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。\"]]],[1,\"p\",[]],[1,\"p\",[[0,[],0,\"附：基于spring-cloud-gateway增强实现参考\"],[0,[1],1,\"enhance-gateway\"],[0,[],0,\"。\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:07:06.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"3afa-EpH0KX1ZBeYPOZibAntCNaNrT6k\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"156ms"},"msg":"","time":"2019-04-02T11:07:48.237Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8e07aa20-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"9068-N29LVeZN6iauQo2U78TJx5+q7EE\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"90f4-yo31VoBYXTd4lxhxJBjx+Qx/uGU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T11:07:50.672Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8e3597f0-5537-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:07:50.898Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c3704d70-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T11:09:20.240Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f7865910-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T11:10:47.628Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f9cc0350-5537-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T11:10:51.443Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"68f0eca0-5538-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T11:13:57.917Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b9fc4cc0-5538-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T11:16:13.898Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bbf2eca0-5538-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T11:16:17.177Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07ffc410-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"123.59.141.118","x-forwarded-proto":"https","x-real-ip":"123.59.141.118","host":"lancexlab.cn","connection":"close","accept-encoding":"identity","referer":"https://lancexlab.cn/","user-agent":"Mozilla/5.0 (Linux; Android 4.4.4; HM 1S Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/37.0.0.0 Mobile MQQBrowser/6.2 TBS/036555 Safari/537.36 MicroMessenger/6.3.23.840 NetType/WIFI Language/zh_CN"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"14ms"},"msg":"","time":"2019-04-02T11:18:24.738Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"082610c0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T11:18:25.017Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1bf1f790-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","x-maimai-reqid":"ebb3984856624783ba19af1eb31af93f","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"90f4-yo31VoBYXTd4lxhxJBjx+Qx/uGU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"157ms"},"msg":"","time":"2019-04-02T11:18:58.344Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c1e37b0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/css,*/*;q=0.1","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T11:18:58.535Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c339470-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:18:58.622Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c2f0090-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:01:21 GMT","etag":"W/\"1ccd-169b4830c20\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T11:18:58.634Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c3939c0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:18:58.655Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c3a4b30-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:18:58.661Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c3912b0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"21ms"},"msg":"","time":"2019-04-02T11:18:58.673Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c8de970-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"26ms"},"msg":"","time":"2019-04-02T11:18:59.234Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c9b56f0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:18:59.299Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1c9bf330-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:18:59.301Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1ca9aed0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:18:59.392Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1caa7220-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:18:59.396Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1cb23a50-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:18:59.448Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1d04a010-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"9ms"},"msg":"","time":"2019-04-02T11:18:59.995Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1df122f0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"9ms"},"msg":"","time":"2019-04-02T11:19:01.547Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e098cf0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:19:01.698Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e25ee90-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:19:01.892Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e313930-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:19:01.958Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e52caf0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:19:02.177Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e78f090-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:19:02.428Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1ecd7930-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:19:02.983Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1ed56870-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"12ms"},"msg":"","time":"2019-04-02T11:19:03.044Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1f161af0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"102ms"},"msg":"","time":"2019-04-02T11:19:03.559Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1f3059b0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:19:03.629Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1f393350-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"32ms"},"msg":"","time":"2019-04-02T11:19:03.718Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"505d0100-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"75a3-2gHoO9C2dbavlqemcmYcwnZ3bGo\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"782f-uSaIi8dTQFIF4UYPCo7124mr4NM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"88ms"},"msg":"","time":"2019-04-02T11:20:26.217Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"61047650-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T11:20:54.110Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"671420e0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca1e0cf72737b08a9e9f0d6/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca1e0cf72737b08a9e9f0d6/","params":{"id":"5ca1e0cf72737b08a9e9f0d6"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"13885","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca1e0cf72737b08a9e9f0d6","created_at":"2019-04-01T09:58:39.000Z","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n ","custom_excerpt":null,"featured":true,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"/content/images/2019/04/--_001.png\",\"cardWidth\":\"\",\"caption\":\"spring-cloud-gateway-core 依赖项截图\"}],[\"image\",{\"src\":\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\",\"caption\":\"spring-cloud-gateway 工程结构\"}],[\"markdown\",{\"markdown\":\"1. actuate \\n    actuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。\\n    ![201904210-15-00](https://lancexlab.cn/content/images/2019/04/201904210-15-00.png)\\n2. config\\n    config包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：\\n    ![201904210-17-10](https://lancexlab.cn/content/images/2019/04/201904210-17-10.png)\\n    \\n*     GatewayAutoConfiguration.java\\n    ![201904210-29-10](https://lancexlab.cn/content/images/2019/04/201904210-29-10.png)\\n    GatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。\\n    Configuration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。\\n    \\n*     GatewayClassPathWarningAutoConfiguration.java\\n    GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。\\n    ![201904210-43-15](https://lancexlab.cn/content/images/2019/04/201904210-43-15.png)\\n    \\n\\n*     GatewayEnvironmentPostProcessor.java\\n    2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。\\n\\n*     GatewayLoadBalancerClientAutoConfiguration.java\\n    负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。\\n\\n*     GatewayMetricsAutoConfiguration.java\\n    负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。\\n\\n*     GatewayNoLoaBalancerClientAutoConfiguration.java\\n    2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。\\n*     GatewayProperties.java\\n    spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。\\n    \\n*     GatewayRedisAutoConfiguration.java\\n    gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。\\n\\n*     GlobalCorsProperties.java\\n    Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。\\n\\n*     LoadBalancerProperties.java\\n    结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。\\n\\n*     HttpClientProperties.java\\n    Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。\\n\\n*     PropertiesRouteDefinitionLocator.java\\n    GatewayProperties的代理类。\\n\\n3. discovery\\n    discovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。\\n    ![201904211-30-53](https://lancexlab.cn/content/images/2019/04/201904211-30-53.png)\\n*     DiscoveryLocatorProperties.java\\n    配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。\\n    \\n*     GatewayDiscoveryClientAutoConfiguration.java\\n    从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();\\n    discoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。\\n    ![201904211-58-06](https://lancexlab.cn/content/images/2019/04/201904211-58-06.png)\\n\\n*     DiscoveryClientRouteDefinitionLocator.java\\n    DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。\\n    ![201904217-13-09](https://lancexlab.cn/content/images/2019/04/201904217-13-09.png)\\n    discoveryClient.getServices()从注册中心获取所有的服务;\\n    ![201904217-50-23](https://lancexlab.cn/content/images/2019/04/201904217-50-23.png)\\n    默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。\\n    discoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。\\n    \\n4. event\\n    此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。\\n    ![201904218-13-26](https://lancexlab.cn/content/images/2019/04/201904218-13-26.png)\\n\\n5. filter\\n    filter包是gateway的核心实现（代码解读放在后续文章）。\\n    filter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；\\n    factory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；\\n    headers包针对Http header层面的过滤器，这正常情况运用不到；\\n    retelimit包下是基于redis+lua scriptde的限流实现。\\n    ![201904218-22-41](https://lancexlab.cn/content/images/2019/04/201904218-22-41.png)\\n\\n6. handler\\n    此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。\\n    ![201904218-47-46](https://lancexlab.cn/content/images/2019/04/201904218-47-46.png)\\n\\n7. route\\n    路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。\\n    ![201904218-51-54](https://lancexlab.cn/content/images/2019/04/201904218-51-54.png)\\n    ![201904218-56-26](https://lancexlab.cn/content/images/2019/04/201904218-56-26.png)\\n\\n8. support\\n    工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。\\n    ![201904218-57-40](https://lancexlab.cn/content/images/2019/04/201904218-57-40.png)\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://spencer.gibb.us/\"]],[\"a\",[\"href\",\"https://github.com/IBlogLab/enhance-gateway\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的\"],[0,[0],1,\"Spencer Gibb\"],[0,[],0,\"。\"]]],[1,\"p\",[[0,[],0,\"一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\"]]],[10,0],[1,\"p\",[[0,[],0,\"二、工程结构解读\"]]],[1,\"p\",[[0,[],0,\"如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\"]]],[10,1],[10,2],[1,\"p\",[[0,[],0,\"三、结语\"]]],[1,\"p\",[[0,[],0,\"　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。\"]]],[1,\"p\",[]],[1,\"p\",[[0,[],0,\"附：基于spring-cloud-gateway增强实现参考\"],[0,[1],1,\"enhance-gateway\"],[0,[],0,\"。\"]]]]}","plaintext":null,"published_at":"2019-04-01T10:11:52.000Z","slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","status":"published","title":"spring-cloud-gateway之架构设计","updated_at":"2019-04-02T11:07:48.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":null,"website":null,"location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"3afa-EpH0KX1ZBeYPOZibAntCNaNrT6k\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"99ms"},"msg":"","time":"2019-04-02T11:21:04.342Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6953d7b0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","method":"GET","originalUrl":"/ghost/api/v2/admin/posts/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"30","page":"1","filter":"status:[draft,scheduled,published]"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"12de6-9V9vRy5jHAYzLEdB1h2KLHpB//c\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T11:21:08.061Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6976c900-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/tags/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/tags/?limit=all","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"64d-KAl/fxdCcdKg0HpNmtmh4e2ABhs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T11:21:08.276Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69776540-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"68b-9AnWLPdgK/ilbHmeyxIMh3QwMCo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T11:21:08.283Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6afe0540-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"68b-9AnWLPdgK/ilbHmeyxIMh3QwMCo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"32ms"},"msg":"","time":"2019-04-02T11:21:10.837Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6aff3dc0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/invites/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/invites/?limit=all","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"555","etag":"W/\"22b-V5CpbJFOmhj8jNi8YxomXo+6kHw\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"34ms"},"msg":"","time":"2019-04-02T11:21:10.847Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6b053130-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:27:26 GMT","etag":"W/\"1e323-169b72e1ce7\"","content-type":"image/jpeg","content-length":123683},"statusCode":200,"responseTime":"33ms"},"msg":"","time":"2019-04-02T11:21:10.885Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6c430860-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/slug/lance/?include=roles%2Ccount.posts","method":"GET","originalUrl":"/ghost/api/v2/admin/users/slug/lance/?include=roles%2Ccount.posts","params":{"slug":"lance"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"include":"roles,count.posts"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"861","etag":"W/\"35d-KSpNtS00uI2VmdlMfBSjy6ExlSQ\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T11:21:13.004Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6c60f0a0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","method":"GET","originalUrl":"/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:33 GMT","etag":"W/\"5b86-169b7300d6b\"","content-type":"image/jpeg","content-length":23430},"statusCode":200,"responseTime":"11ms"},"msg":"","time":"2019-04-02T11:21:13.143Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"744ef820-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20344-j7kP+IWET8kjGdf5SSZkUZQQwfA\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T11:21:26.477Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7e1ff070-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/author/lance/","method":"GET","originalUrl":"/author/lance/","params":{"slug":"lance"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4484-PaDFJY7X41PrEWHd25tGiWAWxf8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T11:21:42.969Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7e374900-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","method":"GET","originalUrl":"/content/images/size/w2000/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/author/lance/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:21:43 GMT","etag":"W/\"5b86-169ddc891b5\"","content-type":"image/jpeg","content-length":23430},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T11:21:43.098Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"998b97b0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/1/?include=roles","method":"PUT","originalUrl":"/ghost/api/v2/admin/users/1/?include=roles","params":{"id":"1"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"885","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"users":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding. ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T10:46:56.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}}},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","content-length":"894","etag":"W/\"37e-u0Jj96w00VRPZru7cYImp34YmZU\""},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T11:22:28.978Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a879eb50-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"203ae-qEpTibHeIQZ6rkpeiFR6wC5EJFM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T11:22:54.014Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b37e0c70-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/1/?include=roles","method":"PUT","originalUrl":"/ghost/api/v2/admin/users/1/?include=roles","params":{"id":"1"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"886","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"users":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:22:28.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}}},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","content-length":"895","etag":"W/\"37f-doQSC2gvn1xhOw72Oc8S5UDy3ww\""},"statusCode":200,"responseTime":"85ms"},"msg":"","time":"2019-04-02T11:23:12.526Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b4b7c4f0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/subscribers/?limit=30&order=created_at%20desc&page=1","method":"GET","originalUrl":"/ghost/api/v2/admin/subscribers/?limit=30&order=created_at%20desc&page=1","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"30","order":"created_at desc","page":"1"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"994","etag":"W/\"3e2-L5Vd1ap0rEYIPJqtWefYY1THXMM\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"18ms"},"msg":"","time":"2019-04-02T11:23:14.514Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b4c07780-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/icons/arrow-up-small.svg","method":"GET","originalUrl":"/ghost/assets/icons/arrow-up-small.svg","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/assets/ghost-dark-fe46aa4daca5203897db474b22279db0.css","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"2ce-7438674ba0\"","content-type":"image/svg+xml","content-length":718,"vary":"Accept-Encoding"},"statusCode":200,"responseTime":"93ms"},"msg":"","time":"2019-04-02T11:23:14.646Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6c23af0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/invites/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/invites/?limit=all","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"555","etag":"W/\"22b-V5CpbJFOmhj8jNi8YxomXo+6kHw\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T11:23:17.958Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6c19eb0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"6c1-U0AidXnmOrGx4CtHzKjh5Qnp0PI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T11:23:17.959Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c456a3e0-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"782f-uSaIi8dTQFIF4UYPCo7124mr4NM\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0"},"statusCode":200,"responseTime":"15ms"},"msg":"","time":"2019-04-02T11:23:40.719Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c459b120-5539-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"782f-uSaIi8dTQFIF4UYPCo7124mr4NM\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"211ms"},"msg":"","time":"2019-04-02T11:23:40.939Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d82cc3e0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","method":"GET","originalUrl":"/ghost/api/v2/admin/posts/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"30","page":"1","filter":"status:[draft,scheduled,published]"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"12ebe-c7Lifys2G54QzHFwjnlv5C6f5lY\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"75ms"},"msg":"","time":"2019-04-02T11:24:14.059Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bbaacaa0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/invites/","method":"POST","originalUrl":"/ghost/api/v2/admin/invites/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"87","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"invites":{"0":{"email":"xushaoxiao@flashhold.com","role_id":"5c989f0d9819ed1e4cb98a8a"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin"},"statusCode":200,"responseTime":"60028ms"},"msg":"","time":"2019-04-02T11:24:26.183Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e57de240-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/tags/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/tags/?limit=all","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"64d-KAl/fxdCcdKg0HpNmtmh4e2ABhs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T11:24:36.386Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e57ecca0-5539-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"6c1-U0AidXnmOrGx4CtHzKjh5Qnp0PI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T11:24:36.393Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":40,"msg":"Error sending email: Failed to send email. Reason: connect ETIMEDOUT 42.120.219.27:25. Please check your email settings and resend the invitation. ","time":"2019-04-02T11:25:33.795Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"123bbdc0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"203b0-4LktsUWcwd29pBSmzTcK8EJeoaU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"82ms"},"msg":"","time":"2019-04-02T11:25:51.471Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"160f8210-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/slugs/post/spring-cloud-gateway%E4%B9%8BGlobalFilter/","method":"GET","originalUrl":"/ghost/api/v2/admin/slugs/post/spring-cloud-gateway%E4%B9%8BGlobalFilter/","params":{"type":"post","name":"spring-cloud-gateway之GlobalFilter"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"59","etag":"W/\"3b-oFTyuNg94XelWzYGE/fIiW8nq9M\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"16ms"},"msg":"","time":"2019-04-02T11:25:57.826Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"161a5780-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/","method":"POST","originalUrl":"/ghost/api/v2/admin/posts/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"1451","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"excerpt":null,"custom_excerpt":null,"featured":false,"feature_image":null,"canonical_url":null,"codeinjection_foot":"","codeinjection_head":"","custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":null,"plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","etag":"W/\"a83-/RxwXA0R893hvHSl6+x+EXTdntU\"","content-encoding":"gzip"},"statusCode":201,"responseTime":"194ms"},"msg":"","time":"2019-04-02T11:25:58.076Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1e0503a0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"90f4-yo31VoBYXTd4lxhxJBjx+Qx/uGU\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"910a-3o/0g2Sz2pWbspFg3aOiNeMnmMs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"79ms"},"msg":"","time":"2019-04-02T11:26:11.242Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"27da41b0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"1657","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":null,"custom_excerpt":null,"featured":false,"feature_image":null,"canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[],\"sections\":[[1,\"p\",[]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:25:57.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/p/c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89/","content-type":"application/json; charset=utf-8","etag":"W/\"a76-5youa+lAxfcl/tLJhvZ4CNqBKUM\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"168ms"},"msg":"","time":"2019-04-02T11:26:27.829Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"35887430-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"203b0-4LktsUWcwd29pBSmzTcK8EJeoaU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T11:26:50.662Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"439122c0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"203b0-4LktsUWcwd29pBSmzTcK8EJeoaU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T11:27:14.224Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"483fb6b0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/images/upload/","method":"POST","originalUrl":"/ghost/api/v2/admin/images/upload/","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"961338","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"multipart/form-data; boundary=----WebKitFormBoundaryGpYgW7QbOXNT7NXi","accept":"text/plain, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"purpose":"image"},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","content-type":"application/json; charset=utf-8","content-length":"97","etag":"W/\"61-VJNJ0lcZtATtD7eE89sGTKJ/s3Y\""},"statusCode":201,"responseTime":"169ms"},"msg":"","time":"2019-04-02T11:27:22.181Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"48634440-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"164ms"},"msg":"","time":"2019-04-02T11:27:22.410Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4862a800-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"1718","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":null,"custom_excerpt":null,"featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[],\"sections\":[[1,\"p\",[]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:26:27.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/p/c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89/","content-type":"application/json; charset=utf-8","etag":"W/\"ab3-1BKxICiVLlLwHtRjmOwfoZWw/Lo\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"191ms"},"msg":"","time":"2019-04-02T11:27:22.434Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8c9e27b0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2253","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":null,"custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[],\"sections\":[[1,\"p\",[]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:27:22.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/p/c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89/","content-type":"application/json; charset=utf-8","etag":"W/\"f2f-uVzc+39E9OGKzMgleUGu3hV1Xpc\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"136ms"},"msg":"","time":"2019-04-02T11:29:16.853Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aa146c00-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2358","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"hr\",{}]],\"markups\":[],\"sections\":[[10,0],[1,\"p\",[]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:29:16.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/p/c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89/","content-type":"application/json; charset=utf-8","etag":"W/\"f41-CMpcxx4no0ZJaD3cLjaRCExrmSo\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"160ms"},"msg":"","time":"2019-04-02T11:30:06.309Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ac607ee0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"4385-3Ad5ONzpFvqj9+tBQKmhem0oQso\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4385-y004NQ2fPep8awGmA9cD6oDu0YU\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T11:30:10.060Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b53a6d00-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2378","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"hr\",{}]],\"markups\":[],\"sections\":[[10,0],[1,\"p\",[[0,[],0,\"loading\"]]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"draft","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:30:06.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/p/c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89/","content-type":"application/json; charset=utf-8","etag":"W/\"f55-vR1v2Ms8hqweQuOkwwKAOYjlOBU\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"153ms"},"msg":"","time":"2019-04-02T11:30:25.004Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6630e80-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"4385-y004NQ2fPep8awGmA9cD6oDu0YU\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"4385-y004NQ2fPep8awGmA9cD6oDu0YU\""},"statusCode":304,"responseTime":"76ms"},"msg":"","time":"2019-04-02T11:30:26.869Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6851570-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:30:27.019Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bae03230-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2382","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"hr\",{}]],\"markups\":[],\"sections\":[[10,0],[1,\"p\",[[0,[],0,\"loading\"]]]]}","plaintext":null,"published_at":null,"slug":"spring-cloud-gatewayzhi-globalfilter","status":"published","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:30:24.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"f6d-eYgnGeSr7VJGl/yRBNJabb/M66k\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"132ms"},"msg":"","time":"2019-04-02T11:30:34.457Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc7f8a50-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"4385-y004NQ2fPep8awGmA9cD6oDu0YU\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4b06-oFjzF3BvtMebG0C0aH7BTfhbiec\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T11:30:37.101Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc91d9d0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"323ms"},"msg":"","time":"2019-04-02T11:30:37.489Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c0c01a30-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:30:44.182Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c32448f0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-tidQZcRXOgdn//trORGjTkR51ro\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"99ms"},"msg":"","time":"2019-04-02T11:30:48.292Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c33deb70-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w2000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w2000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:48 GMT","etag":"W/\"eaa17-169ddd0e429\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"137ms"},"msg":"","time":"2019-04-02T11:30:48.497Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ca71a3a0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-dXDiWEudzG0mnqTVxL/NbIRdnkw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"69ms"},"msg":"","time":"2019-04-02T11:31:00.514Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d11c7cc0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2384","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"hr\",{}]],\"markups\":[],\"sections\":[[10,0],[1,\"p\",[]]]}","plaintext":null,"published_at":"2019-04-02T11:30:34.000Z","slug":"spring-cloud-gatewayzhi-globalfilter","status":"published","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:30:34.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"f59-4dCObkRODCa5vTADHX9Mod5jW+M\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"161ms"},"msg":"","time":"2019-04-02T11:31:11.792Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e68f5cd0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f41-ZFo8reb0wzjN7qUZMspun7TzD0o\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T11:31:47.665Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8d35960-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"17.58.100.160","x-forwarded-proto":"https","x-real-ip":"17.58.100.160","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"gzip, identity","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/600.2.5 (KHTML, like Gecko) Version/8.0.2 Safari/600.2.5 (Applebot/0.1; +http://www.apple.com/go/applebot)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:31:51.419Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8f957f0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"17.58.100.160","x-forwarded-proto":"https","x-real-ip":"17.58.100.160","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"gzip, identity","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/600.2.5 (KHTML, like Gecko) Version/8.0.2 Safari/600.2.5 (Applebot/0.1; +http://www.apple.com/go/applebot)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"116ms"},"msg":"","time":"2019-04-02T11:31:51.781Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e9cdbef0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"bfe69ee81ebe51a5","user-agent":"Twitterbot/1.0","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"54f1050a9263d888","x-b3-traceid":"00ed4ffa00826c0f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:31:53.059Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ea012b00-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"592990d7d99063e9","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"54f1050a9263d888","accept-encoding":"gzip, deflate","x-b3-traceid":"00ed4ffa00826c0f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"96ms"},"msg":"","time":"2019-04-02T11:31:53.489Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eae82fa0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"66.102.8.181","x-forwarded-proto":"https","x-real-ip":"66.102.8.181","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Google-AMPHTML)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"84ms"},"msg":"","time":"2019-04-02T11:31:54.991Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"msg":"amp.parse https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/ 1ms ","time":"2019-04-02T11:31:55.599Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eb4f2ed0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","params":{},"headers":{"x-forwarded-for":"66.102.8.181","x-forwarded-proto":"https","x-real-ip":"66.102.8.181","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Google-AMPHTML)","accept-encoding":"gzip,deflate,br"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-globalfilter","id":"5ca346c572737b08a9e9f1e3","uuid":"c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89","title":"spring-cloud-gateway之GlobalFilter","html":"<!--kg-card-begin: hr--><hr><!--kg-card-end: hr-->","comment_id":"5ca346c572737b08a9e9f1e3","feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","featured":false,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-02T19:25:57.000+08:00","updated_at":"2019-04-02T19:31:11.000+08:00","published_at":"2019-04-02T19:30:34.000+08:00","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3ae2-A4ZCCN2w96dAq/gP6+jVplQnojw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"23ms"},"msg":"","time":"2019-04-02T11:31:55.606Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eb5d1180-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"5cb0dfcfbcf88c92","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"1b245165e41d174c","accept-encoding":"gzip, deflate","x-b3-traceid":"becd2d204462eaa2"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:31:55.678Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eb9efc80-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.182","x-forwarded-proto":"https","x-real-ip":"199.16.157.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"f5409c3b3476d486","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"9242fd8ad4fda8e9","accept-encoding":"gzip, deflate","x-b3-traceid":"f0877d50ae02ef5f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:31:56.109Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eba7d620-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.183","x-forwarded-proto":"https","x-real-ip":"199.59.150.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"e9f6f391ce1179e9","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"34eb7658d5fd6734","accept-encoding":"gzip, deflate","x-b3-traceid":"212b6354b0ee5550"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:31:56.169Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ebce9800-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"a299b8efc7ac7c01","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"d3dac41a9fdd27d6","accept-encoding":"gzip, deflate","x-b3-traceid":"00ed4ffa00826c0f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:31:56.421Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec0c8b60-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"217.182.175.162","x-forwarded-proto":"https","x-real-ip":"217.182.175.162","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T11:31:56.877Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec1f9e30-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"49456fb3d23fd67a","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"7f93c0d5dc366bfb","accept-encoding":"gzip, deflate","x-b3-traceid":"12ea1d78e10ca3df"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T11:31:56.955Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec31edb0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","params":{},"headers":{"x-forwarded-for":"66.102.8.185","x-forwarded-proto":"https","x-real-ip":"66.102.8.185","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"*/*;q=0.8,application/signed-exchange;v=b3","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Google-AMPHTML)","accept-encoding":"gzip,deflate,br"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-globalfilter","id":"5ca346c572737b08a9e9f1e3","uuid":"c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89","title":"spring-cloud-gateway之GlobalFilter","html":"<!--kg-card-begin: hr--><hr><!--kg-card-end: hr-->","comment_id":"5ca346c572737b08a9e9f1e3","feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","featured":false,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-02T19:25:57.000+08:00","updated_at":"2019-04-02T19:31:11.000+08:00","published_at":"2019-04-02T19:30:34.000+08:00","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3ae2-A4ZCCN2w96dAq/gP6+jVplQnojw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"21ms"},"msg":"","time":"2019-04-02T11:31:57.091Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eda5c900-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"ecec252118728cf9","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"77a5e7b50f3cff70","accept-encoding":"gzip, deflate","x-b3-traceid":"aa474ad0f60d8b37"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:31:59.509Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"edbf4470-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"a098c954066bf752","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"c9332990745159c3","accept-encoding":"gzip, deflate","x-b3-traceid":"476f570ae9b93afa"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"91ms"},"msg":"","time":"2019-04-02T11:31:59.764Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ee7b6880-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"54.198.55.229","x-forwarded-proto":"https","x-real-ip":"54.198.55.229","host":"lancexlab.cn","connection":"close","range":"bytes: 0-22","accept":"*/*","user-agent":"Mozilla/5.0 (compatible)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"110ms"},"msg":"","time":"2019-04-02T11:32:01.021Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eeef6000-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"104.196.254.192","x-forwarded-proto":"https","x-real-ip":"104.196.254.192","host":"lancexlab.cn","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T11:32:01.743Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef083f30-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"a2b5e5887ef901af","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"43128d9505539382","accept-encoding":"gzip, deflate","x-b3-traceid":"8f7ac69466f86abf"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T11:32:01.835Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ef70ec10-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"104.196.254.192","x-forwarded-proto":"https","x-real-ip":"104.196.254.192","host":"lancexlab.cn","connection":"close","referer":"https://t.co/aMXu25rtUp"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"84ms"},"msg":"","time":"2019-04-02T11:32:02.598Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f0101240-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"5088fac5af77215c","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"15116d4688822d5e","accept-encoding":"gzip, deflate","x-b3-traceid":"bbb154d60cc41ace"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-globalfilter","id":"5ca346c572737b08a9e9f1e3","uuid":"c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89","title":"spring-cloud-gateway之GlobalFilter","html":"<!--kg-card-begin: hr--><hr><!--kg-card-end: hr-->","comment_id":"5ca346c572737b08a9e9f1e3","feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","featured":false,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-02T19:25:57.000+08:00","updated_at":"2019-04-02T19:31:11.000+08:00","published_at":"2019-04-02T19:30:34.000+08:00","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3ae2-A4ZCCN2w96dAq/gP6+jVplQnojw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"17ms"},"msg":"","time":"2019-04-02T11:32:03.576Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f0524b60-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"b60a3bccee09f87d","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"0b0bb9a44bfcf349","accept-encoding":"gzip, deflate","x-b3-traceid":"476f570ae9b93afa"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:32:03.995Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f0689280-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"dd60e10a854f9961","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"f9f87d73a226c608","accept-encoding":"gzip, deflate","x-b3-traceid":"b91bc8cb156b6106"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:32:04.142Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f0e0f6d0-553a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f41-ZFo8reb0wzjN7qUZMspun7TzD0o\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T11:32:04.973Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f27ea140-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"7310bd002719f057","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"091b2c744bd83039","accept-encoding":"gzip, deflate","x-b3-traceid":"005734ee0019fdf0"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:32:07.641Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f2c6a6c0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"9263fbc85d28ebd9","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"b9565136d47bc5d2","accept-encoding":"gzip, deflate","x-b3-traceid":"7fee6c89d0a1c66b"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:32:08.115Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f2fb9970-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"1d5a10e4676174cc","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"4dbaa7da78f3e74e","accept-encoding":"gzip, deflate","x-b3-traceid":"aba31146fa7b1f3d"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:32:08.460Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3058480-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"f991f07eaf76e407","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"8911317027ca1b8b","accept-encoding":"gzip, deflate","x-b3-traceid":"0e797ef43c16807f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:32:08.526Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f309f150-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"4eaf5896bdb29833","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"996803dbbdbf9d09","accept-encoding":"gzip, deflate","x-b3-traceid":"f328653ea93534af"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:32:08.556Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f30cd780-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.182","x-forwarded-proto":"https","x-real-ip":"199.16.157.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"33c680cef5e5d7ee","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"ac816d6b0b4724ca","accept-encoding":"gzip, deflate","x-b3-traceid":"95765bd818c2b56d"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"4ms"},"msg":"","time":"2019-04-02T11:32:08.574Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3588680-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.182","x-forwarded-proto":"https","x-real-ip":"199.59.150.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"b52db40050c76a71","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"7d4e721f11360a8a","accept-encoding":"gzip, deflate","x-b3-traceid":"1eaff2b18339fa0b"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:32:09.071Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f367efd0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"e24e1d55bca176fc","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"6831a0b9f9fc4b6d","accept-encoding":"gzip, deflate","x-b3-traceid":"a5741bddd62fd45d"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"91ms"},"msg":"","time":"2019-04-02T11:32:09.257Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3908670-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"176.9.136.185","x-forwarded-proto":"https","x-real-ip":"176.9.136.185","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (compatible; TrendsmapResolver/0.1)","accept-encoding":"gzip;q=1.0,deflate;q=0.6,identity;q=0.3","accept":"*/*","range":"bytes=0-4194304"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T11:32:09.510Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3c0be30-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"f42e6e2f77e09673","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"45c0c9e911f7d16d","accept-encoding":"gzip, deflate","x-b3-traceid":"277162b1bac8f570"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"10ms"},"msg":"","time":"2019-04-02T11:32:09.759Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f4209170-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"0ddcb3fc1e3acd89","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"0036e9f845188eb1","accept-encoding":"gzip, deflate","x-b3-traceid":"5461d1725fdd216c"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:32:10.383Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f58ea060-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"217.182.175.162","x-forwarded-proto":"https","x-real-ip":"217.182.175.162","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"75ms"},"msg":"","time":"2019-04-02T11:32:12.850Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f627fa30-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"34.244.22.130","x-forwarded-proto":"https","x-real-ip":"34.244.22.130","host":"lancexlab.cn","connection":"close","user-agent":"IDG Twitter Links Resolver","accept-encoding":"gzip, deflate","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T11:32:13.837Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8dcb9f0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"54.198.55.229","x-forwarded-proto":"https","x-real-ip":"54.198.55.229","host":"lancexlab.cn","connection":"close","range":"bytes: 0-22","accept":"*/*","user-agent":"Mozilla/5.0 (compatible)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T11:32:18.371Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8efa5b0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"87016ffc5d0313ac","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"65342a5533b2847e","accept-encoding":"gzip, deflate","x-b3-traceid":"8d23c4a921478936"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:32:18.452Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f911aca0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"35.199.179.151","x-forwarded-proto":"https","x-real-ip":"35.199.179.151","host":"lancexlab.cn","connection":"close","referer":"http://zpr.io/gydeV"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24050","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"130ms"},"msg":"","time":"2019-04-02T11:32:18.798Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f91751f0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"35.199.179.151","x-forwarded-proto":"https","x-real-ip":"35.199.179.151","host":"lancexlab.cn","connection":"close","referer":"http://zpr.io/gydeV","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"25951","etag":"W/\"655f-Coh4S3272+Almm3dKV9+c7qshVs\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"211ms"},"msg":"","time":"2019-04-02T11:32:18.915Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f918d890-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"35.199.179.151","x-forwarded-proto":"https","x-real-ip":"35.199.179.151","host":"lancexlab.cn","connection":"close","referer":"http://zpr.io/gydeV"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"22150","etag":"W/\"5686-l6ZYJFKAlfw19oWQXLhpbJLtcro\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"218ms"},"msg":"","time":"2019-04-02T11:32:18.932Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f918d891-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.182","x-forwarded-proto":"https","x-real-ip":"199.16.157.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"13beff5a45f82fcb","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"83958a2dbe5ccd4e","accept-encoding":"gzip, deflate","x-b3-traceid":"e0d8427a28fa1ac0"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"222ms"},"msg":"","time":"2019-04-02T11:32:18.936Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f9d300d0-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"225984b8d905aee7","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"3c446b3548dca724","accept-encoding":"gzip, deflate","x-b3-traceid":"00f1c9ec002b99ee"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"12ms"},"msg":"","time":"2019-04-02T11:32:19.947Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fb139720-553a-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"6f8b0a8442674eeb","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"42a3497eaa7ded9d","accept-encoding":"gzip, deflate","x-b3-traceid":"00f1c9ec002b99ee"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:32:22.040Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01055970-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"203.208.60.16","x-forwarded-proto":"https","x-real-ip":"203.208.60.16","host":"lancexlab.cn","connection":"close","accept":"text/plain,text/html,*/*","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:32:32.010Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01f7cfc0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","params":{},"headers":{"x-forwarded-for":"203.208.60.86","x-forwarded-proto":"https","x-real-ip":"203.208.60.86","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br","if-none-match":"W/\"3ae2-A4ZCCN2w96dAq/gP6+jVplQnojw\""},"body":{"post":{"slug":"spring-cloud-gatewayzhi-globalfilter","id":"5ca346c572737b08a9e9f1e3","uuid":"c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89","title":"spring-cloud-gateway之GlobalFilter","html":"<!--kg-card-begin: hr--><hr><!--kg-card-end: hr-->","comment_id":"5ca346c572737b08a9e9f1e3","feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","featured":false,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-02T19:25:57.000+08:00","updated_at":"2019-04-02T19:31:11.000+08:00","published_at":"2019-04-02T19:30:34.000+08:00","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"3ae2-A4ZCCN2w96dAq/gP6+jVplQnojw\""},"statusCode":304,"responseTime":"29ms"},"msg":"","time":"2019-04-02T11:32:33.630Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"04f81770-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"94.130.167.126","x-forwarded-proto":"https","x-real-ip":"94.130.167.126","host":"lancexlab.cn","connection":"close","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","cache-control":"max-age=0","user-agent":"Mozilla/5.0 (X11; U; Linux i686; sk; rv:1.9.1) Gecko/20090630 Fedora/3.5-1.fc11 Firefox/52.7.3","refresh-cache":"1","accept-language":"en-gb,en;q=0.5","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:32:38.635Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"05bfad30-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"88.99.195.213","x-forwarded-proto":"https","x-real-ip":"88.99.195.213","host":"lancexlab.cn","connection":"close","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","cache-control":"max-age=0","user-agent":"Mozilla/5.0 (X11; U; Linux x86_64; en-GB; rv:1.9.0.3) Gecko/2008092510 Ubuntu/8.04 (hardy) Firefox/50.0","refresh-cache":"1","accept-language":"en-gb,en;q=0.5","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:32:39.942Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"06669b90-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"94.130.167.126","x-forwarded-proto":"https","x-real-ip":"94.130.167.126","host":"lancexlab.cn","connection":"close","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","cache-control":"max-age=0","user-agent":"Mozilla/5.0 (X11; U; Linux i686; sk; rv:1.9.1) Gecko/20090630 Fedora/3.5-1.fc11 Firefox/52.7.3","refresh-cache":"1","accept-language":"en-gb,en;q=0.5","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"97ms"},"msg":"","time":"2019-04-02T11:32:41.132Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"06cc3b30-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"88.99.195.213","x-forwarded-proto":"https","x-real-ip":"88.99.195.213","host":"lancexlab.cn","connection":"close","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","cache-control":"max-age=0","user-agent":"Mozilla/5.0 (X11; U; Linux x86_64; en-GB; rv:1.9.0.3) Gecko/2008092510 Ubuntu/8.04 (hardy) Firefox/50.0","referer":"http://zpr.io/gydeV","refresh-cache":"1","accept-language":"en-gb,en;q=0.5","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5df2-jEyoy80Y+/HnMy4976bx0witPe4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"89ms"},"msg":"","time":"2019-04-02T11:32:41.790Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0ecf7860-553b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5ca346c572737b08a9e9f1e3/","method":"PUT","originalUrl":"/ghost/api/v2/admin/posts/5ca346c572737b08a9e9f1e3/","params":{"id":"5ca346c572737b08a9e9f1e3"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","content-length":"2404","origin":"https://lancexlab.cn","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"2.18","referer":"https://lancexlab.cn/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{"posts":{"0":{"id":"5ca346c572737b08a9e9f1e3","created_at":"2019-04-02T11:25:57.000Z","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","featured":false,"feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","canonical_url":null,"codeinjection_foot":null,"codeinjection_head":null,"custom_template":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"html":null,"locale":null,"meta_description":null,"meta_title":null,"mobiledoc":"{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"hr\",{}]],\"markups\":[],\"sections\":[[10,0],[1,\"p\",[[0,[],0,\"loading\"]]]]}","plaintext":null,"published_at":"2019-04-02T11:30:34.000Z","slug":"spring-cloud-gatewayzhi-globalfilter","status":"published","title":"spring-cloud-gateway之GlobalFilter","updated_at":"2019-04-02T11:31:11.000Z","authors":{"0":{"id":"1","name":"lance xu","slug":"lance","email":"13554225105@163.com","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"accessibility":"{\"nightShift\":true}","status":"active","locale":null,"meta_title":null,"meta_description":null,"last_seen":"2019-04-02T10:46:56.000Z","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-04-02T11:23:12.000Z","count":{"posts":3},"facebook":null,"twitter":null,"tour":"[\"getting-started\",\"featured-post\"]","roles":{"0":{"id":"5c989f0d9819ed1e4cb98a8d","name":"Owner","description":"Blog Owner","created_at":"2019-03-25T09:27:41.000Z","updated_at":"2019-03-25T09:27:41.000Z"}}}},"published_by":null,"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","parent":null,"meta_title":null,"meta_description":null,"feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","created_at":"2019-03-28T09:13:36.000Z","updated_at":"2019-03-28T09:20:20.000Z"}}}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","access-control-allow-origin":"https://lancexlab.cn","vary":"Origin, Accept-Encoding","x-cache-invalidate":"/*","content-type":"application/json; charset=utf-8","etag":"W/\"f6d-Isr3dNdv58dH84BmCH8hQ8GtvAY\"","content-encoding":"gzip"},"statusCode":200,"responseTime":"211ms"},"msg":"","time":"2019-04-02T11:32:55.356Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"108eb490-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","cache-control":"max-age=0","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"5e00-tidQZcRXOgdn//trORGjTkR51ro\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"91ms"},"msg":"","time":"2019-04-02T11:32:58.165Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"10b9e340-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","pragma":"no-cache","cache-control":"no-cache","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"image/webp,image/apng,image/*,*/*;q=0.8","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:32:58.359Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21e52e90-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"54.36.150.187","x-forwarded-proto":"https","x-real-ip":"54.36.150.187","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (compatible; AhrefsBot/6.1; +http://ahrefs.com/robot/)","accept":"*/*","accept-encoding":"deflate, gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:33:27.163Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2277d1a0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"54.36.149.204","x-forwarded-proto":"https","x-real-ip":"54.36.149.204","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (compatible; AhrefsBot/6.1; News; +http://ahrefs.com/robot/)","accept":"*/*","accept-encoding":"deflate, gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T11:33:28.195Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"31839850-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"101.86.166.204","x-forwarded-proto":"https","x-real-ip":"101.86.166.204","host":"lancexlab.cn","connection":"close","upgrade-insecure-requests":"1","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","accept-encoding":"gzip, deflate, br","accept-language":"zh-CN,zh;q=0.9,en;q=0.8","if-none-match":"W/\"910a-3o/0g2Sz2pWbspFg3aOiNeMnmMs\""},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"97ms"},"msg":"","time":"2019-04-02T11:33:53.463Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"44ac8860-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{},"headers":{"x-forwarded-for":"52.12.196.134","x-forwarded-proto":"http","x-real-ip":"52.12.196.134","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"92"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:34:25.512Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"453a2260-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"52.12.196.134","x-forwarded-proto":"https","x-real-ip":"52.12.196.134","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"24064","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T11:34:26.516Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69c65db0-553b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"103ms"},"msg":"","time":"2019-04-02T11:35:27.859Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8a394030-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"0b10bb173b63dcff","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"10facf64eb109ffb","accept-encoding":"gzip, deflate","x-b3-traceid":"008ac0f0003f1fa5"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T11:36:22.203Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b2e58b10-553b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T11:37:30.482Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7a7f190-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"98ms"},"msg":"","time":"2019-04-02T11:38:32.204Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7c98350-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/css,*/*;q=0.1","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"4ms"},"msg":"","time":"2019-04-02T11:38:32.331Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cb09f0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:01:21 GMT","etag":"W/\"1ccd-169b4830c20\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:38:32.338Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cc1b61-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"19ms"},"msg":"","time":"2019-04-02T11:38:32.362Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cc4270-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"20ms"},"msg":"","time":"2019-04-02T11:38:32.364Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cc1b60-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T11:38:32.502Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cc4271-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"162ms"},"msg":"","time":"2019-04-02T11:38:32.507Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd2cd0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"166ms"},"msg":"","time":"2019-04-02T11:38:32.517Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd2cd2-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"168ms"},"msg":"","time":"2019-04-02T11:38:32.519Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e1-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"170ms"},"msg":"","time":"2019-04-02T11:38:32.522Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e2-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"172ms"},"msg":"","time":"2019-04-02T11:38:32.527Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e3-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"178ms"},"msg":"","time":"2019-04-02T11:38:32.529Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e4-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"180ms"},"msg":"","time":"2019-04-02T11:38:32.531Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd7af0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"180ms"},"msg":"","time":"2019-04-02T11:38:32.534Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd2cd1-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"188ms"},"msg":"","time":"2019-04-02T11:38:32.538Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd2cd3-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"190ms"},"msg":"","time":"2019-04-02T11:38:32.540Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"191ms"},"msg":"","time":"2019-04-02T11:38:32.542Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd53e5-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"192ms"},"msg":"","time":"2019-04-02T11:38:32.544Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd7af1-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"193ms"},"msg":"","time":"2019-04-02T11:38:32.545Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd7af4-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"196ms"},"msg":"","time":"2019-04-02T11:38:32.548Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd2cd4-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"201ms"},"msg":"","time":"2019-04-02T11:38:32.551Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cda200-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"199ms"},"msg":"","time":"2019-04-02T11:38:32.553Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd7af3-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"207ms"},"msg":"","time":"2019-04-02T11:38:32.559Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7e98e70-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"25ms"},"msg":"","time":"2019-04-02T11:38:32.561Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cb09f1-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"230ms"},"msg":"","time":"2019-04-02T11:38:32.566Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d7cd7af2-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"218ms"},"msg":"","time":"2019-04-02T11:38:32.571Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc528a50-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"199.59.150.183","x-forwarded-proto":"https","x-real-ip":"199.59.150.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"089832ead3ed24f9","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"c17abaf0608a642e","accept-encoding":"gzip, deflate","x-b3-traceid":"9966307bf1a52918"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"128ms"},"msg":"","time":"2019-04-02T11:39:33.751Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc666070-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:33.755Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc772950-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:33.864Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc78fe10-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:33.875Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fcbfa400-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:34.339Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fce1f910-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:34.564Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fd022b40-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:34.775Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fd2591c0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"17.58.100.160","x-forwarded-proto":"https","x-real-ip":"17.58.100.160","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"gzip, identity","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/600.2.5 (KHTML, like Gecko) Version/8.0.2 Safari/600.2.5 (Applebot/0.1; +http://www.apple.com/go/applebot)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T11:39:35.071Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fd646f80-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:35.418Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fd6580f0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:35.426Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fde893a0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:39:36.286Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fe70d670-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:37.178Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"feed8080-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"217.182.175.162","x-forwarded-proto":"https","x-real-ip":"217.182.175.162","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.67 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T11:39:38.074Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff1812f0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:38.274Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff19e7b0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:38.286Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff3add30-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T11:39:38.502Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff3cd900-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:38.515Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc29cca0-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","params":{},"headers":{"x-forwarded-for":"199.59.150.181","x-forwarded-proto":"https","x-real-ip":"199.59.150.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"718cc4c5506dce21","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"d8c69971f17596da","accept-encoding":"gzip, deflate","x-b3-traceid":"be49ea61365ba571"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","id":"5ca1e0cf72737b08a9e9f0d6","uuid":"9231c8f4-0622-4eb0-aec2-945d574daeac","title":"spring-cloud-gateway之架构设计","html":"<p>spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的<a href=\"https://spencer.gibb.us/\">Spencer Gibb</a>。</p><p>一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/--_001.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway-core 依赖项截图</figcaption></figure><!--kg-card-end: image--><p>二、工程结构解读</p><p>如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway 工程结构</figcaption></figure><!--kg-card-end: image--><!--kg-card-begin: markdown--><ol>\n<li>actuate<br>\nactuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-15-00.png\" alt=\"201904210-15-00\"></li>\n<li>config<br>\nconfig包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-17-10.png\" alt=\"201904210-17-10\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>GatewayAutoConfiguration.java\n</code></pre>\n<p><img src=\"https://lancexlab.cn/content/images/2019/04/201904210-29-10.png\" alt=\"201904210-29-10\"><br>\nGatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。<br>\nConfiguration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。</p>\n</li>\n<li>\n<pre><code>GatewayClassPathWarningAutoConfiguration.java\n</code></pre>\n<p>GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-43-15.png\" alt=\"201904210-43-15\"></p>\n</li>\n<li>\n<pre><code>GatewayEnvironmentPostProcessor.java\n</code></pre>\n<p>2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。</p>\n</li>\n<li>\n<pre><code>GatewayLoadBalancerClientAutoConfiguration.java\n</code></pre>\n<p>负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayMetricsAutoConfiguration.java\n</code></pre>\n<p>负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayNoLoaBalancerClientAutoConfiguration.java\n</code></pre>\n<p>2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。</p>\n</li>\n<li>\n<pre><code>GatewayProperties.java\n</code></pre>\n<p>spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。</p>\n</li>\n<li>\n<pre><code>GatewayRedisAutoConfiguration.java\n</code></pre>\n<p>gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。</p>\n</li>\n<li>\n<pre><code>GlobalCorsProperties.java\n</code></pre>\n<p>Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。</p>\n</li>\n<li>\n<pre><code>LoadBalancerProperties.java\n</code></pre>\n<p>结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。</p>\n</li>\n<li>\n<pre><code>HttpClientProperties.java\n</code></pre>\n<p>Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。</p>\n</li>\n<li>\n<pre><code>PropertiesRouteDefinitionLocator.java\n</code></pre>\n<p>GatewayProperties的代理类。</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>discovery<br>\ndiscovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-30-53.png\" alt=\"201904211-30-53\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>DiscoveryLocatorProperties.java\n</code></pre>\n<p>配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。</p>\n</li>\n<li>\n<pre><code>GatewayDiscoveryClientAutoConfiguration.java\n</code></pre>\n<p>从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();<br>\ndiscoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-58-06.png\" alt=\"201904211-58-06\"></p>\n</li>\n<li>\n<pre><code>DiscoveryClientRouteDefinitionLocator.java\n</code></pre>\n<p>DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-13-09.png\" alt=\"201904217-13-09\"><br>\ndiscoveryClient.getServices()从注册中心获取所有的服务;<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-50-23.png\" alt=\"201904217-50-23\"><br>\n默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。<br>\ndiscoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。</p>\n</li>\n</ul>\n<ol start=\"4\">\n<li>\n<p>event<br>\n此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-13-26.png\" alt=\"201904218-13-26\"></p>\n</li>\n<li>\n<p>filter<br>\nfilter包是gateway的核心实现（代码解读放在后续文章）。<br>\nfilter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；<br>\nfactory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；<br>\nheaders包针对Http header层面的过滤器，这正常情况运用不到；<br>\nretelimit包下是基于redis+lua scriptde的限流实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-22-41.png\" alt=\"201904218-22-41\"></p>\n</li>\n<li>\n<p>handler<br>\n此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-47-46.png\" alt=\"201904218-47-46\"></p>\n</li>\n<li>\n<p>route<br>\n路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-51-54.png\" alt=\"201904218-51-54\"><br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-56-26.png\" alt=\"201904218-56-26\"></p>\n</li>\n<li>\n<p>support<br>\n工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-57-40.png\" alt=\"201904218-57-40\"></p>\n</li>\n</ol>\n<!--kg-card-end: markdown--><p>三、结语</p><p>　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。</p><p></p><p>附：基于spring-cloud-gateway增强实现参考<a href=\"https://github.com/IBlogLab/enhance-gateway\">enhance-gateway</a>。</p>","comment_id":"5ca1e0cf72737b08a9e9f0d6","feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","featured":true,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-01T17:58:39.000+08:00","updated_at":"2019-04-02T19:07:48.000+08:00","published_at":"2019-04-01T18:11:52.000+08:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n "},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0"},"statusCode":200,"responseTime":"5265ms"},"msg":"","time":"2019-04-02T11:39:38.622Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff5f7c30-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:38.742Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff824670-553b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"140.143.4.220","x-forwarded-proto":"https","x-real-ip":"140.143.4.220","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 Safari/537.36","accept-encoding":"gzip,deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:38.969Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"msg":"amp.parse https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/ 5591ms ","time":"2019-04-02T11:39:38.973Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"04303e20-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"https","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close","referer":"https://t.co/yUpjoXZRTA"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T11:39:46.892Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"044e9b90-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"http","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"0ms"},"msg":"","time":"2019-04-02T11:39:47.018Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"044ee9b0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"http","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T11:39:47.026Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"046b7260-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"https","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close","referer":"http://lancexlab.cn"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"94ms"},"msg":"","time":"2019-04-02T11:39:47.301Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"046cf900-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"https","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36","referer":"http://lancexlab.cn"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"142ms"},"msg":"","time":"2019-04-02T11:39:47.359Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"047ab4a0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"78.46.19.211","x-forwarded-proto":"https","x-real-ip":"78.46.19.211","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (compatible; TrendsmapResolver/0.1)","accept-encoding":"gzip;q=1.0,deflate;q=0.6,identity;q=0.3","accept":"*/*","range":"bytes=0-4194304"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"224ms"},"msg":"","time":"2019-04-02T11:39:47.531Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0494cc50-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"https","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"41087","etag":"W/\"a07f-qbuX8kYAW/rrNd9prvGl6cttpH0\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"159ms"},"msg":"","time":"2019-04-02T11:39:47.637Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0494cc51-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.197.31.22","x-forwarded-proto":"https","x-real-ip":"35.197.31.22","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"37286","etag":"W/\"91a6-8sRRsN2BWp1Aa5ng8wHUgj7kHQk\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"171ms"},"msg":"","time":"2019-04-02T11:39:47.649Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08162ae0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.182","x-forwarded-proto":"https","x-real-ip":"199.16.157.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"b3eb1a344b28aefd","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"0b94f3b41f4c366e","accept-encoding":"gzip, deflate","x-b3-traceid":"009300210043be52"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:39:53.364Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08530cd0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.183","x-forwarded-proto":"https","x-real-ip":"199.16.157.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"56a01cc9af014382","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"f2341fd7adafa27b","accept-encoding":"gzip, deflate","x-b3-traceid":"00d79c7800ae1259"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:39:53.762Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"088d7dc0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.180","x-forwarded-proto":"https","x-real-ip":"199.16.157.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"e479c3e3aa73df05","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"637544bc896ad40f","accept-encoding":"gzip, deflate","x-b3-traceid":"005f270f0043e98f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T11:39:54.146Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"091683e0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.182","x-forwarded-proto":"https","x-real-ip":"199.16.157.182","host":"lancexlab.cn","connection":"close","x-b3-spanid":"bf91071079d1119e","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"1adfd8fd70f5b758","accept-encoding":"gzip, deflate","x-b3-traceid":"005f270f0043e98f"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T11:39:55.044Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0a2052c0-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.16.157.181","x-forwarded-proto":"https","x-real-ip":"199.16.157.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"c663e727903dae17","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"4d0c288b59970ef5","accept-encoding":"gzip, deflate","x-b3-traceid":"00b5aa5e0039587b"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T11:39:56.789Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0b94a340-553c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"94.130.167.126","x-forwarded-proto":"https","x-real-ip":"94.130.167.126","host":"lancexlab.cn","connection":"close","accept-charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","cache-control":"max-age=0","user-agent":"Mozilla/5.0 (X11; U; Linux i686; sk; rv:1.9.1) Gecko/20090630 Fedora/3.5-1.fc11 Firefox/52.7.3","refresh-cache":"1","accept-language":"en-gb,en;q=0.5","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"95ms"},"msg":"","time":"2019-04-02T11:39:59.317Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51d31ee0-553c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T11:41:57.146Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5f048040-553c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T11:42:19.259Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c72573f0-553c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T11:45:13.958Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f55c0cc0-553c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T11:46:31.515Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"24051670-553d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T11:47:49.782Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d4ff970-553d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"79ms"},"msg":"","time":"2019-04-02T11:50:19.607Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc791a50-553d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T11:52:05.557Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c181b520-553d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T11:52:13.994Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"385dde80-553e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T11:55:33.395Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"827bb730-553e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T11:57:37.754Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"857bd7d0-553e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T11:57:42.805Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"362e85f0-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T12:02:39.243Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c833a80-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T12:03:16.711Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"57eaff70-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://t.co/yUpjoXZRTA"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"179ms"},"msg":"","time":"2019-04-02T12:03:35.965Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58204041-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"12ms"},"msg":"","time":"2019-04-02T12:03:36.145Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58204042-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"13ms"},"msg":"","time":"2019-04-02T12:03:36.146Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58204044-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"15ms"},"msg":"","time":"2019-04-02T12:03:36.148Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206751-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"16ms"},"msg":"","time":"2019-04-02T12:03:36.150Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206755-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"18ms"},"msg":"","time":"2019-04-02T12:03:36.153Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206756-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"21ms"},"msg":"","time":"2019-04-02T12:03:36.154Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206757-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"22ms"},"msg":"","time":"2019-04-02T12:03:36.155Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58208e60-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"22ms"},"msg":"","time":"2019-04-02T12:03:36.156Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58208e62-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"23ms"},"msg":"","time":"2019-04-02T12:03:36.158Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58204043-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"27ms"},"msg":"","time":"2019-04-02T12:03:36.159Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206750-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"27ms"},"msg":"","time":"2019-04-02T12:03:36.161Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206753-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"28ms"},"msg":"","time":"2019-04-02T12:03:36.162Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58208e61-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"28ms"},"msg":"","time":"2019-04-02T12:03:36.163Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58204040-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"32ms"},"msg":"","time":"2019-04-02T12:03:36.166Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206752-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"34ms"},"msg":"","time":"2019-04-02T12:03:36.168Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58206754-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T12:03:36.170Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58208e63-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T12:03:36.177Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58201930-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T12:03:36.178Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6a304640-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"85ms"},"msg":"","time":"2019-04-02T12:04:06.522Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6aa06d30-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"9ms"},"msg":"","time":"2019-04-02T12:04:07.182Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6aa06d31-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"11ms"},"msg":"","time":"2019-04-02T12:04:07.183Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"82916ca0-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-BSuef3/Hk32Kq9Eao+6N6TwtQWE\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T12:04:47.394Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"852732b0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:04:51.679Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"853f2780-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/favicon.png","method":"GET","originalUrl":"/favicon.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"br, gzip, deflate","if-none-match":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"image/png","content-length":22234,"etag":"\"b588a0bc9e25c8ee42bc7deb77f9a0c9\"","cache-control":"public, max-age=86400"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:04:51.835Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8d797a40-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\""},"statusCode":304,"responseTime":"80ms"},"msg":"","time":"2019-04-02T12:05:05.717Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8da37070-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:05:05.913Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90922bf0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/ghost/","params":{"0":"/"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","accept-ranges":"bytes","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"d72-7438674ba0\"","content-type":"text/html; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"200ms"},"msg":"","time":"2019-04-02T12:05:11.032Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90f3d3f0-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/me/?include=roles","params":{"id":"me"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"895","etag":"W/\"37f-AoP4r1DQE3lEIMXX3f1GDOPQ3/8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T12:05:11.515Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9107aa10-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/site/","method":"GET","originalUrl":"/ghost/api/v2/admin/site/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"75","etag":"W/\"4b-b+52MI9EmXxR8ps91ABHdlHWX68\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:05:11.604Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"91119520-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/config/","method":"GET","originalUrl":"/ghost/api/v2/admin/config/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"197","etag":"W/\"c5-xgJ5VKKFeX6bysRsfdMXbg+Cj0U\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T12:05:11.673Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9113df10-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/settings/?type=blog%2Ctheme%2Cprivate%2Cmembers","method":"GET","originalUrl":"/ghost/api/v2/admin/settings/?type=blog%2Ctheme%2Cprivate%2Cmembers","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"type":"blog,theme,private,members"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"2c53-m4sAbvLBvzOtI141fuD7McKq18c\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"26ms"},"msg":"","time":"2019-04-02T12:05:11.709Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"91167720-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/notifications/","method":"GET","originalUrl":"/ghost/api/v2/admin/notifications/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"20","etag":"W/\"14-rGnko0plFblBZ6cCxL9htMA8NKo\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"22ms"},"msg":"","time":"2019-04-02T12:05:11.721Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"91287880-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/pages/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","method":"GET","originalUrl":"/ghost/api/v2/admin/pages/?limit=30&page=1&filter=status%3A%5Bdraft%2Cscheduled%2Cpublished%5D","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"limit":"30","page":"1","filter":"status:[draft,scheduled,published]"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"1085-agocnfsq9gl15IX0mp0g7t3/iCk\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"25ms"},"msg":"","time":"2019-04-02T12:05:11.842Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"914f6170-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/tags/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/tags/?limit=all","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"64d-KAl/fxdCcdKg0HpNmtmh4e2ABhs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"32ms"},"msg":"","time":"2019-04-02T12:05:12.105Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"914f8880-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"6c1-T6Fe2P2l/mCCnLjeKwWbXWp70j0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"34ms"},"msg":"","time":"2019-04-02T12:05:12.107Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":50,"err":{"domain":"https://lancexlab.cn","code":"ETIMEDOUT","message":"Request timed out","context":"\"Checking for updates failed, your site will continue to function.\"","help":"\"If you get this error repeatedly, please seek help from https://docs.ghost.org.\"","stack":"RequestError: Request timed out\n    at timeoutFn (/var/www/ghost/versions/2.18.3/node_modules/got/index.js:333:53)\n    at asPromise (/var/www/ghost/versions/2.18.3/node_modules/got/index.js:411:18)\n    at got (/var/www/ghost/versions/2.18.3/node_modules/got/index.js:651:10)\n    at request (/var/www/ghost/versions/2.18.3/core/server/lib/request.js:24:12)\n    at then (/var/www/ghost/versions/2.18.3/core/server/update-check.js:164:20)\n    at tryCatcher (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/util.js:16:23)\n    at Promise._settlePromiseFromHandler (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:512:31)\n    at Promise._settlePromise (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:569:18)\n    at Promise._settlePromise0 (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:614:10)\n    at Promise._settlePromises (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:694:18)\n    at Promise._fulfill (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:638:18)\n    at Promise._settlePromise (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:582:21)\n    at Promise._settlePromise0 (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:614:10)\n    at Promise._settlePromises (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:694:18)\n    at Promise._fulfill (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:638:18)\n    at Promise._resolveCallback (/var/www/ghost/versions/2.18.3/node_modules/bluebird/js/release/promise.js:432:57)"},"msg":"Request timed out","time":"2019-04-02T12:05:19.521Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a501170-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/ghost/","params":{"0":"/"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","accept-ranges":"bytes","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"d72-7438674ba0\"","content-type":"text/html; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"4ms"},"msg":"","time":"2019-04-02T12:05:27.181Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a832f60-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/me/?include=roles","params":{"id":"me"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"895","etag":"W/\"37f-AoP4r1DQE3lEIMXX3f1GDOPQ3/8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"19ms"},"msg":"","time":"2019-04-02T12:05:27.530Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a90eb00-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/site/","method":"GET","originalUrl":"/ghost/api/v2/admin/site/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"75","etag":"W/\"4b-b+52MI9EmXxR8ps91ABHdlHWX68\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:05:27.603Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a9a12c0-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/config/","method":"GET","originalUrl":"/ghost/api/v2/admin/config/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"197","etag":"W/\"c5-xgJ5VKKFeX6bysRsfdMXbg+Cj0U\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"11ms"},"msg":"","time":"2019-04-02T12:05:27.673Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a9c0e90-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/settings/?type=blog%2Ctheme%2Cprivate%2Cmembers","method":"GET","originalUrl":"/ghost/api/v2/admin/settings/?type=blog%2Ctheme%2Cprivate%2Cmembers","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"type":"blog,theme,private,members"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"2c53-m4sAbvLBvzOtI141fuD7McKq18c\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T12:05:27.722Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a9f1bd0-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/notifications/","method":"GET","originalUrl":"/ghost/api/v2/admin/notifications/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"20","etag":"W/\"14-rGnko0plFblBZ6cCxL9htMA8NKo\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"31ms"},"msg":"","time":"2019-04-02T12:05:27.725Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9aaf6f80-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/5c98c1b3e628302f591eda23/?status=all","method":"GET","originalUrl":"/ghost/api/v2/admin/posts/5c98c1b3e628302f591eda23/?status=all","params":{"id":"5c98c1b3e628302f591eda23"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"status":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"40e1-SxmlNJ5qr14vFBj6fM5kh6jW6p0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"33ms"},"msg":"","time":"2019-04-02T12:05:27.834Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9af18190-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/microservices_architecture.png","method":"GET","originalUrl":"/content/images/2019/04/microservices_architecture.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/ghost/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 09:10:15 GMT","etag":"W/\"59a9-169d829dc0e\"","content-type":"image/png","content-length":22953},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T12:05:28.272Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9af18191-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/spring_cloud_gateway_diagram.png","method":"GET","originalUrl":"/content/images/2019/04/spring_cloud_gateway_diagram.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/ghost/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 09:13:30 GMT","etag":"W/\"4138-169d82cd496\"","content-type":"image/png","content-length":16696},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T12:05:28.282Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9af15a81-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/themes/","method":"GET","originalUrl":"/ghost/api/v2/admin/themes/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"64e-o3v9HhxylhSSNiPOQHGIamKf5AI\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"96ms"},"msg":"","time":"2019-04-02T12:05:28.329Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9af13370-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/tags/?limit=all","method":"GET","originalUrl":"/ghost/api/v2/admin/tags/?limit=all","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"limit":"all"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"64d-KAl/fxdCcdKg0HpNmtmh4e2ABhs\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"101ms"},"msg":"","time":"2019-04-02T12:05:28.333Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9af15a80-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/users/?limit=all&include=roles","method":"GET","originalUrl":"/ghost/api/v2/admin/users/?limit=all&include=roles","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","app-pragma":"no-cache","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","referer":"https://lancexlab.cn/ghost/","x-ghost-version":"2.18"},"body":{},"query":{"limit":"all","include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"6c1-T6Fe2P2l/mCCnLjeKwWbXWp70j0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"103ms"},"msg":"","time":"2019-04-02T12:05:28.336Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c6ccec50-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://t.co/b1iVwGgxVg?amp=1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\""},"statusCode":304,"responseTime":"75ms"},"msg":"","time":"2019-04-02T12:06:41.890Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"de364530-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://t.co/yUpjoXZRTA?amp=1"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","id":"5ca1e0cf72737b08a9e9f0d6","uuid":"9231c8f4-0622-4eb0-aec2-945d574daeac","title":"spring-cloud-gateway之架构设计","html":"<p>spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的<a href=\"https://spencer.gibb.us/\">Spencer Gibb</a>。</p><p>一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/--_001.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway-core 依赖项截图</figcaption></figure><!--kg-card-end: image--><p>二、工程结构解读</p><p>如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway 工程结构</figcaption></figure><!--kg-card-end: image--><!--kg-card-begin: markdown--><ol>\n<li>actuate<br>\nactuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-15-00.png\" alt=\"201904210-15-00\"></li>\n<li>config<br>\nconfig包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-17-10.png\" alt=\"201904210-17-10\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>GatewayAutoConfiguration.java\n</code></pre>\n<p><img src=\"https://lancexlab.cn/content/images/2019/04/201904210-29-10.png\" alt=\"201904210-29-10\"><br>\nGatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。<br>\nConfiguration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。</p>\n</li>\n<li>\n<pre><code>GatewayClassPathWarningAutoConfiguration.java\n</code></pre>\n<p>GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-43-15.png\" alt=\"201904210-43-15\"></p>\n</li>\n<li>\n<pre><code>GatewayEnvironmentPostProcessor.java\n</code></pre>\n<p>2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。</p>\n</li>\n<li>\n<pre><code>GatewayLoadBalancerClientAutoConfiguration.java\n</code></pre>\n<p>负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayMetricsAutoConfiguration.java\n</code></pre>\n<p>负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayNoLoaBalancerClientAutoConfiguration.java\n</code></pre>\n<p>2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。</p>\n</li>\n<li>\n<pre><code>GatewayProperties.java\n</code></pre>\n<p>spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。</p>\n</li>\n<li>\n<pre><code>GatewayRedisAutoConfiguration.java\n</code></pre>\n<p>gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。</p>\n</li>\n<li>\n<pre><code>GlobalCorsProperties.java\n</code></pre>\n<p>Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。</p>\n</li>\n<li>\n<pre><code>LoadBalancerProperties.java\n</code></pre>\n<p>结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。</p>\n</li>\n<li>\n<pre><code>HttpClientProperties.java\n</code></pre>\n<p>Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。</p>\n</li>\n<li>\n<pre><code>PropertiesRouteDefinitionLocator.java\n</code></pre>\n<p>GatewayProperties的代理类。</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>discovery<br>\ndiscovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-30-53.png\" alt=\"201904211-30-53\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>DiscoveryLocatorProperties.java\n</code></pre>\n<p>配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。</p>\n</li>\n<li>\n<pre><code>GatewayDiscoveryClientAutoConfiguration.java\n</code></pre>\n<p>从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();<br>\ndiscoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-58-06.png\" alt=\"201904211-58-06\"></p>\n</li>\n<li>\n<pre><code>DiscoveryClientRouteDefinitionLocator.java\n</code></pre>\n<p>DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-13-09.png\" alt=\"201904217-13-09\"><br>\ndiscoveryClient.getServices()从注册中心获取所有的服务;<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-50-23.png\" alt=\"201904217-50-23\"><br>\n默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。<br>\ndiscoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。</p>\n</li>\n</ul>\n<ol start=\"4\">\n<li>\n<p>event<br>\n此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-13-26.png\" alt=\"201904218-13-26\"></p>\n</li>\n<li>\n<p>filter<br>\nfilter包是gateway的核心实现（代码解读放在后续文章）。<br>\nfilter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；<br>\nfactory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；<br>\nheaders包针对Http header层面的过滤器，这正常情况运用不到；<br>\nretelimit包下是基于redis+lua scriptde的限流实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-22-41.png\" alt=\"201904218-22-41\"></p>\n</li>\n<li>\n<p>handler<br>\n此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-47-46.png\" alt=\"201904218-47-46\"></p>\n</li>\n<li>\n<p>route<br>\n路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-51-54.png\" alt=\"201904218-51-54\"><br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-56-26.png\" alt=\"201904218-56-26\"></p>\n</li>\n<li>\n<p>support<br>\n工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-57-40.png\" alt=\"201904218-57-40\"></p>\n</li>\n</ol>\n<!--kg-card-end: markdown--><p>三、结语</p><p>　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。</p><p></p><p>附：基于spring-cloud-gateway增强实现参考<a href=\"https://github.com/IBlogLab/enhance-gateway\">enhance-gateway</a>。</p>","comment_id":"5ca1e0cf72737b08a9e9f0d6","feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","featured":true,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-01T17:58:39.000+08:00","updated_at":"2019-04-02T19:07:48.000+08:00","published_at":"2019-04-01T18:11:52.000+08:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n "},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"75a0-rPwA8xRKemz+yTZ6DuFBDk1eaMQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T12:07:21.170Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dfb14c70-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:25:56 GMT","etag":"W/\"ea85d-169dc14fb2d\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T12:07:23.584Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dfd30540-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/?__twitter_impression=true","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/?__twitter_impression=true","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/"},"body":{},"query":{"__twitter_impression":"true"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T12:07:23.864Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e15b04d0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"http","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"4ms"},"msg":"","time":"2019-04-02T12:07:26.371Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e15c6460-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"http","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:07:26.375Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e1d230a0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"54.198.55.229","x-forwarded-proto":"https","x-real-ip":"54.198.55.229","host":"lancexlab.cn","connection":"close","range":"bytes: 0-22","accept":"*/*","user-agent":"Mozilla/5.0 (compatible)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"164ms"},"msg":"","time":"2019-04-02T12:07:27.311Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e23d7590-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"https","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"87ms"},"msg":"","time":"2019-04-02T12:07:27.937Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e2857b10-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"https","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close","referer":"https://t.co/yUpjoXZRTA"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"75ms"},"msg":"","time":"2019-04-02T12:07:28.398Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e28701b0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"HEAD","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"https","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"128ms"},"msg":"","time":"2019-04-02T12:07:28.460Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e294e460-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"https","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36","referer":"http://lancexlab.cn"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"87ms"},"msg":"","time":"2019-04-02T12:07:28.510Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e29ad7d0-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"HEAD","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"35.247.23.153","x-forwarded-proto":"https","x-real-ip":"35.247.23.153","host":"lancexlab.cn","connection":"close","referer":"http://lancexlab.cn"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"110ms"},"msg":"","time":"2019-04-02T12:07:28.572Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f5a93b00-553f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T12:08:00.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f7a07720-553f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/?__twitter_impression=true","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/?__twitter_impression=true","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://t.co/yUpjoXZRTA?amp=1"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji","id":"5ca1e0cf72737b08a9e9f0d6","uuid":"9231c8f4-0622-4eb0-aec2-945d574daeac","title":"spring-cloud-gateway之架构设计","html":"<p>spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的<a href=\"https://spencer.gibb.us/\">Spencer Gibb</a>。</p><p>一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java 进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/--_001.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway-core 依赖项截图</figcaption></figure><!--kg-card-end: image--><p>二、工程结构解读</p><p>如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。</p><!--kg-card-begin: image--><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://lancexlab.cn/content/images/2019/04/201904119-04-02.png\" class=\"kg-image\"><figcaption>spring-cloud-gateway 工程结构</figcaption></figure><!--kg-card-end: image--><!--kg-card-begin: markdown--><ol>\n<li>actuate<br>\nactuate 包下GatewayControllerEndpoint.java是一个内嵌endpoint监控api管理类，方便通过api来观察当前的routes配置和filter配置信息；其中有个POST（/routes/{id}）可以运行时添加route配置。spring-boot和spring-cloud内嵌的管理类api的设计初衷便是为了方便与管理类平台集成，比如spring-cloud-admin。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-15-00.png\" alt=\"201904210-15-00\"></li>\n<li>config<br>\nconfig包下是gateway工程配置类或者项目启动初始化类, 分类和命名都非常的清晰，通过类名便可知道其中的内部作用，其包内类图如图所示：<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-17-10.png\" alt=\"201904210-17-10\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>GatewayAutoConfiguration.java\n</code></pre>\n<p><img src=\"https://lancexlab.cn/content/images/2019/04/201904210-29-10.png\" alt=\"201904210-29-10\"><br>\nGatewayAutoConfiguration类从头部注解可以了解其中的类加载顺序和依赖条件。<br>\nConfiguration注解是spring ioc的标准配置注入注解；spring.cloud.gateway.enabled配置默认是开启的，即只要引入了spring-cloud-gateway-starter便开启了网关；AutoConfigureBefore和AutoConfigureAfter是配置注入的前后顺序保证；ConditionalOnClass标注必须依赖的bean条件，RouteLocator、ForwardPathFilter等实例bean都是为WebFilter(DispatcherHandler) 服务的，而GatewayAutoConfiguration类则是负责RouteLocatorBuilder、RetryGatewayFilterFactory等全局单一实例注入的。这个与我们自己spring-boot项目中需要一个注入配置类的作用类似。</p>\n</li>\n<li>\n<pre><code>GatewayClassPathWarningAutoConfiguration.java\n</code></pre>\n<p>GatewayClassPathWarningAutoConfiguration作用比较单一，是gateway工程启动过程中的一个加载检查机制，当绑定条件丢失时会有log警告输出。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904210-43-15.png\" alt=\"201904210-43-15\"></p>\n</li>\n<li>\n<pre><code>GatewayEnvironmentPostProcessor.java\n</code></pre>\n<p>2.2.0-SNAPSHOT版本新增的一个配置类，用于操作进程内部全局环境变量的值，作用与spring-cloud-admin可以动态修改spring-boot的日志级别类是。</p>\n</li>\n<li>\n<pre><code>GatewayLoadBalancerClientAutoConfiguration.java\n</code></pre>\n<p>负责LoadBalancerClientFilter（负载均衡过滤器，在下游服务分布式多实例情况下做请求负载路由）的初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayMetricsAutoConfiguration.java\n</code></pre>\n<p>负责GatewayMetricsFilter（请求监控全局过滤器）初始化注入。</p>\n</li>\n<li>\n<pre><code>GatewayNoLoaBalancerClientAutoConfiguration.java\n</code></pre>\n<p>2.2.0-SNAPSHOT新增配置类，其中声明了一个受保护的内部全局过滤器，在处理请求是没有负载均衡计算，当RibbonAutoConfiguration类缺失情况下才会启动，之前gateway工程必须依赖netflix.ribbon作为默认的负载均衡引入，在2.2.0正式版本发布之后将会取代这个限制，即默认可以不开启负载均衡。</p>\n</li>\n<li>\n<pre><code>GatewayProperties.java\n</code></pre>\n<p>spring.cloud.gateway这个配置项下的配置信息定义。主要包括routes、defaultFilters。</p>\n</li>\n<li>\n<pre><code>GatewayRedisAutoConfiguration.java\n</code></pre>\n<p>gateway的请求限流是通过redis + lua　script　来实现的，此类作用不言而喻。</p>\n</li>\n<li>\n<pre><code>GlobalCorsProperties.java\n</code></pre>\n<p>Http Cors层面的配置，通常采用默认即可，即http请求不做限制，可以google了解一下Cors。</p>\n</li>\n<li>\n<pre><code>LoadBalancerProperties.java\n</code></pre>\n<p>结合负载均衡等过滤器使用，其中只有一个配置属性（private boolean use404）。</p>\n</li>\n<li>\n<pre><code>HttpClientProperties.java\n</code></pre>\n<p>Gateway依赖webflux，其HttpClient默认丢弃了apache的HttpClient，而是采用的reactor-netty框架封装的HttpClient，采用的是异步编程模式，HttpClientProperties则是为HttpClient而配置的。</p>\n</li>\n<li>\n<pre><code>PropertiesRouteDefinitionLocator.java\n</code></pre>\n<p>GatewayProperties的代理类。</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li>discovery<br>\ndiscovery包其实跟config包作用很类似，主要是服务发现方面的配置以及服务发现逻辑实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-30-53.png\" alt=\"201904211-30-53\"></li>\n</ol>\n<ul>\n<li>\n<pre><code>DiscoveryLocatorProperties.java\n</code></pre>\n<p>配置实现类，srping.cloud.gateway.discovery.locator.enabled默认为false, 必须在配置文件将其配置为true，才能开启服务发现的功能；srping.cloud.gateway.discovery.locator.routeIdPrefix显式为下有路由服务添加一个前缀标识；其他配置项采用默认配置即可。</p>\n</li>\n<li>\n<pre><code>GatewayDiscoveryClientAutoConfiguration.java\n</code></pre>\n<p>从代码来看，主要是两个注入方法discoveryClientRouteDefinitionLocator()和discoveryLocatorProperties();<br>\ndiscoveryLocatorProperties()方法向IOC注入一个DiscoveryLocatorProperties类的实例，注意此方法初始化了默认的predicate和FilterDefinition，为具体的服务发现逻辑计算与转换（discoveryClient.getServices()）备用。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904211-58-06.png\" alt=\"201904211-58-06\"></p>\n</li>\n<li>\n<pre><code>DiscoveryClientRouteDefinitionLocator.java\n</code></pre>\n<p>DiscoveryClientRouteDefinitionLocator这个类可以认为是服务发现的一个代理类，其final类型的属性主要有DiscoveryClient、DiscoveryLocatorProperties，丛载实现getRouteDefinitions方法。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-13-09.png\" alt=\"201904217-13-09\"><br>\ndiscoveryClient.getServices()从注册中心获取所有的服务;<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904217-50-23.png\" alt=\"201904217-50-23\"><br>\n默认注入的DiscoveryClient是一个代理client，其中注入了两个具体的实现类对象，分别是SimpleDicoveryClient和EurekaDiscoveryClient（这是netflix.eureka提供的实现，如果采用zk或者自己实现的注册中心作为服务发现服务需要自己实现DiscoveryClient这个接口来注入），SimpleDiscoveryClient是gateway自身进程实例的代理，eureka中的才能获取到注册中心的服务实例。<br>\ndiscoveryClient.getServices()方法的第84行获取了所有的serviceInstance，然后在89行开始遍历所有的serviceInstance实例，将每个serviceInstance信息转换成对应的RouteDedinition对象，依次设置serviceId和利用正则表达式将serviceInstance的服务ｉd转换成对应的路由ｕri，并转换出各个服务特有的predicate和filterDefinition（注意此方法返回结果有内存缓存，会定期做过期清理，默认服务发现间隔１分钟，不会每次服务调用都会调用此方法）。</p>\n</li>\n</ul>\n<ol start=\"4\">\n<li>\n<p>event<br>\n此包定义进程的事件封装，所有类都继承至ApplicationEvent抽象类，这是spring框架的内部标准，这个标准也是继承了jdk的EventObject，至于集成spring开发的应用如果需要采用事件发布订阅或者观察者模式等最好也实现该抽象类；抽象类没有抽象方法的约束，只有一个时间戳的mark字段，对具体实现没有任何影响。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-13-26.png\" alt=\"201904218-13-26\"></p>\n</li>\n<li>\n<p>filter<br>\nfilter包是gateway的核心实现（代码解读放在后续文章）。<br>\nfilter包一级目录是全局过滤器的实现，均实现了GlobalFilter接口和Ordered接口；<br>\nfactory包下是基于工厂模式实现的工厂过滤器，为可配置的过滤器，可针对服务粒度进行可选配置，或者在代码中能够实现api级别的过滤；<br>\nheaders包针对Http header层面的过滤器，这正常情况运用不到；<br>\nretelimit包下是基于redis+lua scriptde的限流实现。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-22-41.png\" alt=\"201904218-22-41\"></p>\n</li>\n<li>\n<p>handler<br>\n此包下主要是Predicate类工厂声明，在配置路由设置断言的时候常用来断言path、header、method等（源码解读放在后续文章）。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-47-46.png\" alt=\"201904218-47-46\"></p>\n</li>\n<li>\n<p>route<br>\n路由层的抽象与定义，这个与下游服务配置深度绑定，可以想象将一个服务实例抽象为一个RouteDefinition，然后为此route增加其predicate和filter等抽象配置。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-51-54.png\" alt=\"201904218-51-54\"><br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-56-26.png\" alt=\"201904218-56-26\"></p>\n</li>\n<li>\n<p>support<br>\n工具包，里面有各种filter逻辑和配置初始化所用的工具类，等同于我们平常的ｕtil包。<br>\n<img src=\"https://lancexlab.cn/content/images/2019/04/201904218-57-40.png\" alt=\"201904218-57-40\"></p>\n</li>\n</ol>\n<!--kg-card-end: markdown--><p>三、结语</p><p>　　本篇文章旨在剖析spring-cloud-gateway-core工程下的结构，总结下来其实我觉得最大的收获是开源作者对于代码的合理设计使得包结构非常的简洁清晰，值得广大Java爱好者学习，能够深化行为和命名注释至自己的code当中；其次对于actuate、config、discovery、event简单包下的源码做了解读，后续章节将会重点专注与filter、handler和route下源码的解读，也是gateway框架架构设计精华部分。</p><p></p><p>附：基于spring-cloud-gateway增强实现参考<a href=\"https://github.com/IBlogLab/enhance-gateway\">enhance-gateway</a>。</p>","comment_id":"5ca1e0cf72737b08a9e9f0d6","feature_image":"https://lancexlab.cn/content/images/2019/04/201904211-25-43.png","featured":true,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-01T17:58:39.000+08:00","updated_at":"2019-04-02T19:07:48.000+08:00","published_at":"2019-04-01T18:11:52.000+08:00","custom_excerpt":null,"codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","excerpt":"spring-cloud-gateway作为cloud体系的一员，其设计思想非常巧妙，项目leader是spring开源主要作者之一的Spencer Gibb\n[https://spencer.gibb.us/]。\n\n一、我们首先从gateway的dependencies查看其所依赖　项，gateway本身对spring-boot-starter有依赖，gateway在微服务架构体系当中也是以Java\n进程的方式而存在，这样我们在做二次元开发时可以不需要再次依赖此项；gateway-core的源码采用流表达式编码，这里要求我们的jdk保持在1.8版本以上以及对reactor异步模型有初步认知；其次对eureka的引入，默认采用eureka为服务注册中心；还有其他的引入比如redis、hystrix等均为功能功能性必要依赖。\n\nspring-cloud-gateway-core 依赖项截图二、工程结构解读\n\n如图工程代码结构非常的清晰和明确，这得益于作者的优秀设计思想，采用工厂模式、门面模式等优秀的代码设计。\n\nspring-cloud-gateway 工程结构 1. actuate\n "},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{"__twitter_impression":"true"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"75a0-rPwA8xRKemz+yTZ6DuFBDk1eaMQ\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T12:08:03.785Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07b71e20-5540-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T12:08:30.782Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0e16e480-5540-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/amp/?__twitter_impression=true"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\""},"statusCode":304,"responseTime":"63ms"},"msg":"","time":"2019-04-02T12:08:41.480Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"13f8ef60-5540-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"104ms"},"msg":"","time":"2019-04-02T12:08:51.391Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"157f6850-5540-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\""},"statusCode":304,"responseTime":"84ms"},"msg":"","time":"2019-04-02T12:08:53.930Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"218282e0-5540-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{},"headers":{"x-forwarded-for":"54.202.225.77","x-forwarded-proto":"http","x-real-ip":"54.202.225.77","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"94"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:09:14.000Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"21fd7f40-5540-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"54.202.225.77","x-forwarded-proto":"https","x-real-ip":"54.202.225.77","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"39186","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T12:09:14.867Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4abb0830-5540-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T12:10:23.210Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c16943c0-5540-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T12:13:42.325Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c19cfdf0-5540-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"153ms"},"msg":"","time":"2019-04-02T12:13:42.762Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f91e4810-5540-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T12:15:15.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b458dc0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"103ms"},"msg":"","time":"2019-04-02T12:17:06.820Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b6bb360-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/css,*/*;q=0.1","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T12:17:06.971Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b7a3250-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:07.064Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b857cf0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T12:17:07.139Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b883c10-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:01:21 GMT","etag":"W/\"1ccd-169b4830c20\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:07.156Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b918ae0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T12:17:07.222Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b931180-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:07.227Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b96bb00-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T12:17:07.257Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b9a3d70-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:07.275Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3baeafd0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:07.408Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3bd2d9a0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:07.645Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3c312640-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:08.264Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3c552900-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:08.498Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3cca31f0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:09.266Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3d41fa00-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:10.052Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3e64f630-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:11.958Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3e798fa0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:12.093Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3eaa63a0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:12.413Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3faf0260-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:14.121Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3faf0261-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T12:17:14.122Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fb08900-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:14.132Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fb20fa0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:14.140Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fb40b70-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:14.153Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fb9b0c0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:14.195Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fc21530-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T12:17:14.245Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fc39bd0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T12:17:14.260Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3fc5beb0-5541-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"BossZhipin/7.013/1004 Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 Screen/375X667","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T12:17:14.272Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7bb55f70-5541-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T12:18:54.866Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"84bb8db0-5541-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T12:19:10.009Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b7fb0f70-5541-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T12:20:36.008Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3f02ee70-5542-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T12:24:22.534Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"42336de0-5542-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T12:24:27.886Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"733115f0-5542-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T12:25:50.092Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f1a18e10-5542-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T12:29:22.212Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"06388d10-5543-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T12:29:56.760Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"30fcbb70-5543-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T12:31:08.497Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"89426370-5543-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T12:33:36.629Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b308f7f0-5543-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"125ms"},"msg":"","time":"2019-04-02T12:34:46.765Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dc069720-5543-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T12:35:55.465Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"47c0b720-5544-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"79ms"},"msg":"","time":"2019-04-02T12:38:56.227Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d7919f0-5544-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T12:39:05.791Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"749b9080-5544-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T12:40:11.457Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e6c4b920-5544-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T12:43:22.988Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8d4e630-5544-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T12:43:53.288Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"04263cf0-5545-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"165.193.233.219","x-forwarded-proto":"https","x-real-ip":"165.193.233.219","host":"lancexlab.cn","connection":"close","accept-encoding":"gzip, deflate","user-agent":"GridBot/1.0 crawler@sysomos.com"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T12:44:12.284Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1dd84d50-5545-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T12:44:55.399Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"701a31a0-5545-11e9-a41f-1dc48d552e2c","userId":null},"url":"/rss/","method":"GET","originalUrl":"/rss/","params":{},"headers":{"x-forwarded-for":"206.25.68.219","x-forwarded-proto":"https","x-real-ip":"206.25.68.219","host":"lancexlab.cn","connection":"close","accept-encoding":"gzip, deflate","user-agent":"GridBot/1.0 crawler@sysomos.com"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/xml; charset=utf-8","etag":"W/\"b647-0Q+xdW5PIR8fvzqon/Dl+aIc0E0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"94ms"},"msg":"","time":"2019-04-02T12:47:13.434Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9b8b41d0-5545-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T12:48:26.271Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bf578880-5545-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T12:49:26.328Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e91bac00-5545-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T12:50:36.392Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3759bb50-5546-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T12:52:47.670Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5fe02eb0-5546-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"153ms"},"msg":"","time":"2019-04-02T12:53:55.766Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8ae66f20-5546-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T12:55:07.849Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f0a1ad70-5546-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T12:57:58.526Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"18768410-5547-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T12:59:05.346Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"536556a0-5547-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T13:00:44.237Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aab023e0-5547-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.80.1","x-forwarded-proto":"https","x-real-ip":"54.198.80.1","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T13:03:10.669Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6a77ea0-5547-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.85.171.124","x-forwarded-proto":"https","x-real-ip":"3.85.171.124","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T13:03:30.744Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f5b37a90-5547-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T13:05:16.518Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"59d1d1c0-5548-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.174.108.255","x-forwarded-proto":"https","x-real-ip":"54.174.108.255","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T13:08:04.489Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"751cf8b0-5548-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T13:08:50.306Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bc6bf9f0-5548-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T13:10:49.930Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1743e590-5549-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T13:13:22.329Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"242c5710-5549-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T13:13:43.984Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58c8a9b0-5549-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T13:15:12.255Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dad645c0-5549-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T13:18:50.442Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ed6d2f00-5549-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T13:19:21.634Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1a15d4d0-554a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T13:20:36.565Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9cacc520-554a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T13:24:15.645Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba4f4990-554a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.234.140.213","x-forwarded-proto":"https","x-real-ip":"54.234.140.213","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T13:25:05.381Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e412f7e0-554a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.152.124.75","x-forwarded-proto":"https","x-real-ip":"54.152.124.75","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T13:26:15.447Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"096b83e0-554b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"106.38.241.121","x-forwarded-proto":"https","x-real-ip":"106.38.241.121","host":"www.lancexlab.cn","connection":"close","accept":"*/*","accept-language":"zh-cn","accept-encoding":"gzip,deflate","user-agent":"Sogou web spider/4.0(+http://www.sogou.com/docs/help/webmasters.htm#07)"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T13:27:18.121Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1f64aaf0-554b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"111.202.101.90","x-forwarded-proto":"https","x-real-ip":"111.202.101.90","host":"www.lancexlab.cn","connection":"close","accept":"*/*","accept-language":"zh-cn","accept-encoding":"gzip,deflate","user-agent":"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Trident/4.0)"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T13:27:54.916Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"555012d0-554b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T13:29:25.417Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5c179bb0-554b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T13:29:36.800Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"87d60890-554b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T13:30:50.176Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fdbc6040-554b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T13:34:07.992Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0141b670-554c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T13:34:13.890Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"407e3840-554c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T13:35:59.998Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b4f71d40-554c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T13:39:15.401Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bdf11680-554c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T13:39:30.475Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa3ce100-554c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"122ms"},"msg":"","time":"2019-04-02T13:41:11.693Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"52bea7a0-554d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T13:43:40.104Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"590037a0-554d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T13:43:50.611Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bcc23e00-554d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T13:46:37.974Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f044e340-554d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T13:48:04.395Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"00c79280-554e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T13:48:32.108Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69800b40-554e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T13:51:27.779Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9df8a940-554e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T13:52:55.815Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ad24c930-554e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.24.6.10","x-forwarded-proto":"https","x-real-ip":"100.24.6.10","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T13:53:21.283Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e0d31250-554e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"34.220.229.100","x-forwarded-proto":"http","x-real-ip":"34.220.229.100","host":"lancexlab.cn","connection":"close","user-agent":"Go-http-client/1.1","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"1ms"},"msg":"","time":"2019-04-02T13:54:47.927Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f43317f0-554e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"199.59.150.181","x-forwarded-proto":"https","x-real-ip":"199.59.150.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"db0be4a73dc83bed","user-agent":"Twitterbot/1.0","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"a0f95e4018303a30","x-b3-traceid":"00d4c655003dcea1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T13:55:20.434Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f4e0bd10-554e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.181","x-forwarded-proto":"https","x-real-ip":"199.59.150.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"0f01fa0ce893f765","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"a0f95e4018303a30","accept-encoding":"gzip, deflate","x-b3-traceid":"00d4c655003dcea1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T13:55:21.577Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f5ff4c70-554e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"199.59.150.181","x-forwarded-proto":"https","x-real-ip":"199.59.150.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"0e6385f8ed0e1135","user-agent":"Twitterbot/1.0","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"3a9aed19e7343d36","x-b3-traceid":"00d4c655003dcea1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T13:55:23.450Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f6385dd0-554e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.181","x-forwarded-proto":"https","x-real-ip":"199.59.150.181","host":"lancexlab.cn","connection":"close","x-b3-spanid":"bc618f0b2aaa6a6c","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"3a9aed19e7343d36","accept-encoding":"gzip, deflate","x-b3-traceid":"00d4c655003dcea1"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T13:55:23.827Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"135cd8a0-554f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T13:56:12.761Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5cb64fe0-554f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T13:58:15.813Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5d1d4f10-554f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T13:58:16.496Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a4c19c40-554f-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.91.62.11","x-forwarded-proto":"https","x-real-ip":"101.91.62.11","host":"www.lancexlab.cn","connection":"close","accept-encoding":"deflate, gzip","referer":"http://www.lancexlab.cn/","accept":"*/*","accept-language":"zh-cn","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_4 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13G35 QQ/6.5.3.410 V1_IPH_SQ_6.5.3_1_APP_A Pixel/750 Core/UIWebView NetType/2G Mem/117"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T14:00:16.726Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"adb972a0-554f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T14:00:31.741Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01318d00-5550-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T14:02:51.783Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"290d6880-5550-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"155ms"},"msg":"","time":"2019-04-02T14:03:58.756Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"739b1a00-5550-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T14:06:03.758Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cbec81d0-5550-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T14:08:31.902Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d869d570-5550-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T14:08:52.860Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3d1180e0-5551-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T14:11:41.723Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6defe120-5551-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T14:13:03.720Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7ea86d70-5551-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T14:13:31.760Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e43d5f10-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","x-maimai-reqid":"c888f303f97647ada3f148aaa7e150d4","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T14:16:22.213Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e45be390-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/screen.css?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/screen.css?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/css,*/*;q=0.1","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"9e68-7438674ba0\"","content-type":"text/css; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T14:16:22.349Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e466e010-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/jquery.fitvids.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/jquery.fitvids.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"777-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:22.420Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e46cfa90-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-15-00.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-15-00.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:15:51 GMT","etag":"W/\"9748-169dbd4cff6\"","content-type":"image/png","content-length":38728},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T14:16:22.461Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e47007d0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:01:21 GMT","etag":"W/\"1ccd-169b4830c20\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:22.480Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e47007d1-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T14:16:22.483Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e46f4480-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"14ms"},"msg":"","time":"2019-04-02T14:16:22.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4714050-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904119-04-02.png","method":"GET","originalUrl":"/content/images/2019/04/201904119-04-02.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 11:04:56 GMT","etag":"W/\"4e90-169d892d8bc\"","content-type":"image/png","content-length":20112},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T14:16:22.489Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e47203a0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-17-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-17-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:17:33 GMT","etag":"W/\"43c9-169dbd65f52\"","content-type":"image/png","content-length":17353},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:22.492Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e47b2b60-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-43-15.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-43-15.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:46:01 GMT","etag":"W/\"f2cb-169dbf07029\"","content-type":"image/png","content-length":62155},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:22.553Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e47c15c0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904210-29-10.png","method":"GET","originalUrl":"/content/images/2019/04/201904210-29-10.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 02:29:29 GMT","etag":"W/\"8862-169dbe14d35\"","content-type":"image/png","content-length":34914},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:22.559Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4856490-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-30-53.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-30-53.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:31:05 GMT","etag":"W/\"1982-169dc19b235\"","content-type":"image/png","content-length":6530},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:22.619Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4cd1bf0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:23.089Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4cea290-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:23.099Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e59a5700-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:24.435Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e62be8a0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-13-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-13-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:13:43 GMT","etag":"W/\"1518-169dd8a5287\"","content-type":"image/png","content-length":5400},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:25.389Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e64711c0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-22-41.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-22-41.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:22:59 GMT","etag":"W/\"4c8f-169dd92cc8b\"","content-type":"image/png","content-length":19599},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:25.567Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e6c36db0-5551-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T14:16:26.444Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7181d60-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-47-46.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-47-46.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:48:03 GMT","etag":"W/\"438a-169dda9c174\"","content-type":"image/png","content-length":17290},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:26.937Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e740db10-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-51-54.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-51-54.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:52:07 GMT","etag":"W/\"3b78-169ddad7b34\"","content-type":"image/png","content-length":15224},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T14:16:27.203Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7903390-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:27.724Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7ec3640-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-57-40.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-57-40.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:57:49 GMT","etag":"W/\"52a1-169ddb2b050\"","content-type":"image/png","content-length":21153},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:28.328Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e82128f0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:28.674Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e82bfe60-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T14:16:28.750Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e869cab0-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:29.150Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e87eb240-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:29.287Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e887da00-5551-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T14:16:29.347Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"200887e0-5552-11e9-a41f-1dc48d552e2c","userId":null},"url":"/tag/spring-cloud-gateway/","method":"GET","originalUrl":"/tag/spring-cloud-gateway/","params":{"slug":"spring-cloud-gateway"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"4b06-oFjzF3BvtMebG0C0aH7BTfhbiec\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"95ms"},"msg":"","time":"2019-04-02T14:18:02.559Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"202b7930-5552-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/infinitescroll.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/infinitescroll.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"3f0-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","content-length":1008,"vary":"Accept-Encoding"},"statusCode":200,"responseTime":"25ms"},"msg":"","time":"2019-04-02T14:18:02.718Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"203c4210-5552-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57/{iPhone10,1} [iOS 12.1.4]/MaiMai 5.0.4(5.0.4.4)","accept-language":"zh-cn","referer":"https://lancexlab.cn/tag/spring-cloud-gateway/","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 14:18:02 GMT","etag":"W/\"15d6-169de6a0118\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"109ms"},"msg":"","time":"2019-04-02T14:18:02.911Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2641b370-5552-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T14:18:12.945Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39150970-5552-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T14:18:44.534Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95abbc10-5552-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T14:21:19.871Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d00fb3c0-5552-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T14:22:57.844Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e38eb310-5552-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T14:23:30.541Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"505c17d0-5553-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T14:26:33.093Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8c33c3c0-5553-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T14:28:13.484Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"97a59ad0-5553-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T14:28:32.716Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"153772c0-5554-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.84.82.111","x-forwarded-proto":"https","x-real-ip":"3.84.82.111","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T14:32:03.350Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4aeb28d0-5554-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T14:33:33.451Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4de13750-5554-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.71.209","x-forwarded-proto":"https","x-real-ip":"18.206.71.209","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T14:33:38.429Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c08164b0-5554-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T14:36:50.740Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fed3ad90-5554-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T14:38:35.301Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0c62bf50-5555-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T14:38:58.030Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7f38c9c0-5555-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T14:42:10.693Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9be1fa10-5555-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T14:42:58.780Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a794aab0-5555-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T14:43:18.414Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"44bb3a20-5556-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T14:47:42.065Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5a2a97c0-5556-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T14:48:18.021Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"64f8b4c0-5556-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"122ms"},"msg":"","time":"2019-04-02T14:48:36.231Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4b86930-5556-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T14:52:10.508Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"00716d20-5557-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T14:52:57.013Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08d6a070-5557-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T14:53:11.104Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a0efb310-5557-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T14:57:26.284Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a74148a0-5557-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T14:57:36.867Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c1a4f5c0-5557-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T14:58:21.139Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"37b93b40-5558-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T15:01:39.251Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"419ad560-5558-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T15:01:55.840Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"67d20190-5558-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.215.14.18","x-forwarded-proto":"https","x-real-ip":"18.215.14.18","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T15:02:59.950Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec1b0eb0-5558-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T15:06:41.870Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eed043a0-5558-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T15:06:46.414Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0628fab0-5559-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.215.14.18","x-forwarded-proto":"https","x-real-ip":"18.215.14.18","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T15:07:25.590Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8cf97600-5559-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"90ms"},"msg":"","time":"2019-04-02T15:11:11.803Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ae449010-5559-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"165ms"},"msg":"","time":"2019-04-02T15:12:07.737Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ca298600-5559-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T15:12:54.418Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3d7b9e40-555a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T15:16:07.887Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4b1dc2d0-555a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T15:16:30.767Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6fda0ed0-555a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T15:17:32.394Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f18f2aa0-555a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T15:21:10.014Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3aa4270-555a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T15:21:13.550Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"23dad680-555b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T15:22:34.387Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aedcc680-555b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T15:26:27.605Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b82220a0-555b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T15:26:43.157Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cbd79940-555b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.227.56.59","x-forwarded-proto":"https","x-real-ip":"34.227.56.59","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T15:27:16.240Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5c98f0f0-555c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T15:31:19.091Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"752c9900-555c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T15:32:00.332Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"918c3d30-555c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T15:32:47.922Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"110dfe40-555d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T15:36:21.844Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"362e3c30-555d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.174.106.161","x-forwarded-proto":"https","x-real-ip":"35.174.106.161","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T15:37:24.132Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"570e3860-555d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"120ms"},"msg":"","time":"2019-04-02T15:38:19.361Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d5348820-555d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.238.28.136","x-forwarded-proto":"https","x-real-ip":"34.238.28.136","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T15:41:50.937Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d8f057a0-555d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T15:41:57.187Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1ee79110-555e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"69ms"},"msg":"","time":"2019-04-02T15:43:54.600Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8689dee0-555e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T15:46:48.462Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9c54f110-555e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T15:47:25.003Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d5a5f220-555e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.209.229.63","x-forwarded-proto":"https","x-real-ip":"18.209.229.63","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T15:49:01.178Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4937ab70-555f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T15:52:15.063Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d389a40-555f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T15:52:21.791Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"72014250-555f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T15:53:23.495Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f67a3910-555f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T15:57:05.748Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"09e27c10-5560-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T15:57:38.299Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1899e130-5560-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T15:58:03.002Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"99008400-5560-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"172.104.100.219","x-forwarded-proto":"https","x-real-ip":"172.104.100.219","host":"140.143.4.220:443","connection":"close","user-agent":"Go-http-client/1.1","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"78ms"},"msg":"","time":"2019-04-02T16:01:38.448Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c28eca70-5560-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T16:02:48.138Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c4aa5770-5560-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"167ms"},"msg":"","time":"2019-04-02T16:02:51.800Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5e20fe40-5561-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T16:07:09.166Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8df3bae0-5561-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"89ms"},"msg":"","time":"2019-04-02T16:08:29.416Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"03bc7870-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T16:11:46.982Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"10886140-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.174.237.193","x-forwarded-proto":"https","x-real-ip":"54.174.237.193","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T16:12:08.455Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5b1ffdd0-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.174.237.193","x-forwarded-proto":"https","x-real-ip":"54.174.237.193","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T16:14:13.601Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b012aa40-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T16:16:36.122Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf3ce020-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.232.165.195","x-forwarded-proto":"https","x-real-ip":"18.232.165.195","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T16:17:28.404Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ffd89210-5562-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"88ms"},"msg":"","time":"2019-04-02T16:18:49.994Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69b20b30-5563-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T16:21:47.547Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90a3adc0-5563-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"77ms"},"msg":"","time":"2019-04-02T16:22:52.907Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a77fbac0-5563-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.238.28.136","x-forwarded-proto":"https","x-real-ip":"34.238.28.136","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T16:23:31.238Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"18327000-5564-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T16:26:40.330Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2d0391d0-5564-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T16:27:15.249Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"704dfac0-5564-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"144ms"},"msg":"","time":"2019-04-02T16:29:08.222Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cda47af0-5564-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"73ms"},"msg":"","time":"2019-04-02T16:31:44.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e213cdb0-5564-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T16:32:18.999Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1bff12f0-5565-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T16:33:56.175Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7eba30a0-5565-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T16:36:41.823Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8a1376a0-5565-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T16:37:00.856Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b9c2a5b0-5565-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.174.237.193","x-forwarded-proto":"https","x-real-ip":"54.174.237.193","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T16:38:20.873Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"252508c0-5566-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T16:41:21.018Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5f93aed0-5566-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.174.237.193","x-forwarded-proto":"https","x-real-ip":"54.174.237.193","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T16:42:59.075Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"98909c70-5566-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"74.82.47.3","x-forwarded-proto":"https","x-real-ip":"74.82.47.3","host":"140.143.4.220","connection":"close"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"84ms"},"msg":"","time":"2019-04-02T16:44:34.701Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ea5c1840-5566-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.231.244.220","x-forwarded-proto":"https","x-real-ip":"34.231.244.220","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T16:46:51.912Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f9e1a2d0-5566-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.231.244.220","x-forwarded-proto":"https","x-real-ip":"34.231.244.220","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T16:47:17.929Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"114e7e20-5567-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T16:47:57.257Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a0ac7540-5567-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T16:51:57.766Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c1960e60-5567-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"87ms"},"msg":"","time":"2019-04-02T16:52:53.022Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c68c0b90-5567-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T16:53:01.413Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69f870c0-5568-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T16:57:35.485Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6f715990-5568-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T16:57:44.668Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"757607a0-5568-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T16:57:54.760Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0789cff0-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T17:01:59.834Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"12480e70-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T17:02:17.875Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"311222f0-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T17:03:09.520Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b1c14070-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T17:06:45.427Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ba541370-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T17:06:59.795Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ec1d21d0-5569-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T17:08:23.342Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fdce17e0-5569-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"106.120.173.81","x-forwarded-proto":"https","x-real-ip":"106.120.173.81","host":"www.lancexlab.cn","connection":"close","accept":"*/*","accept-language":"zh-cn","accept-encoding":"gzip,deflate","user-agent":"Sogou web spider/4.0(+http://www.sogou.com/docs/help/webmasters.htm#07)","if-modified-since":"Thu, 28 Mar 2019 22:09:25 GMT"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T17:08:53.033Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"51e09d80-556a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T17:11:14.052Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6ca926f0-556a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T17:11:58.981Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9737c660-556a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T17:13:10.384Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1bf36b70-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"81ms"},"msg":"","time":"2019-04-02T17:16:53.114Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2bf8fb70-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T17:17:19.983Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"47b819e0-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T17:18:06.514Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"baedf790-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T17:21:19.806Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"de52c9e0-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T17:22:19.185Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fd092f50-556b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T17:23:10.729Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"82123110-556c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T17:26:53.919Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a33529b0-556c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T17:27:49.512Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bae99550-556c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/rss/","method":"GET","originalUrl":"/rss/","params":{},"headers":{"x-forwarded-for":"62.210.215.110","x-forwarded-proto":"https","x-real-ip":"62.210.215.110","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.66 Safari/537.36","cache-control":"max-age=0, no-cache","pragma":"no-cache","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/xml; charset=utf-8","etag":"W/\"b647-0Q+xdW5PIR8fvzqon/Dl+aIc0E0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T17:28:29.282Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c811f600-556c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T17:28:51.366Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ccad01f0-556c-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"5.39.46.85","x-forwarded-proto":"https","x-real-ip":"5.39.46.85","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.62 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8","accept-language":"*","cache-control":"max-age=0","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"118ms"},"msg":"","time":"2019-04-02T17:28:59.143Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3c579600-556d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T17:32:06.420Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5bab4ce0-556d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.86.66.70","x-forwarded-proto":"https","x-real-ip":"54.86.66.70","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"148ms"},"msg":"","time":"2019-04-02T17:32:59.077Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9054e5f0-556d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T17:34:27.352Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07a072f0-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T17:37:47.495Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"20d2cc00-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T17:38:29.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"323071f0-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T17:38:58.892Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c96fed70-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T17:43:12.631Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cbe7f250-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T17:43:16.783Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f9659b60-556e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T17:44:33.106Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"63712100-556f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T17:47:31.011Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6a9e4980-556f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T17:47:43.054Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"90244e20-556f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T17:48:46.031Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"05dd2d30-5570-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.86.66.70","x-forwarded-proto":"https","x-real-ip":"54.86.66.70","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"105ms"},"msg":"","time":"2019-04-02T17:52:03.565Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0a428320-5570-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"107.21.33.33","x-forwarded-proto":"https","x-real-ip":"107.21.33.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T17:52:10.888Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4be68f10-5570-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.80.213.244","x-forwarded-proto":"https","x-real-ip":"54.80.213.244","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T17:54:01.010Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aa3a33f0-5570-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T17:56:39.268Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ce8a50a0-5570-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.207.105.194","x-forwarded-proto":"https","x-real-ip":"18.207.105.194","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T17:57:40.192Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0d6cf2a0-5571-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"183ms"},"msg":"","time":"2019-04-02T17:59:25.829Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"38f3adb0-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","if-none-match":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\""},"statusCode":304,"responseTime":"129ms"},"msg":"","time":"2019-04-02T18:00:38.797Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206301-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904218-56-26.png","method":"GET","originalUrl":"/content/images/2019/04/201904218-56-26.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 10:56:56 GMT","etag":"W/\"57b9-169ddb1e34c\"","content-type":"image/png","content-length":22457},"statusCode":200,"responseTime":"10ms"},"msg":"","time":"2019-04-02T18:00:38.973Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"392014e2-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904211-58-06.png","method":"GET","originalUrl":"/content/images/2019/04/201904211-58-06.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:58:21 GMT","etag":"W/\"150f0-169dc32a9b1\"","content-type":"image/png","content-length":86256},"statusCode":200,"responseTime":"16ms"},"msg":"","time":"2019-04-02T18:00:38.974Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206300-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-50-23.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-50-23.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:50:44 GMT","etag":"W/\"18f36-169dd754682\"","content-type":"image/png","content-length":102198},"statusCode":200,"responseTime":"15ms"},"msg":"","time":"2019-04-02T18:00:38.976Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206302-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","method":"GET","originalUrl":"/content/images/size/w100/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 23:29:53 GMT","etag":"W/\"e43-169b7305ac3\"","content-type":"image/jpeg","content-length":3651},"statusCode":200,"responseTime":"18ms"},"msg":"","time":"2019-04-02T18:00:38.980Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206305-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w30/2019/03/----_20190325174953.png","method":"GET","originalUrl":"/content/images/size/w30/2019/03/----_20190325174953.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:06:30 GMT","etag":"W/\"2f2-169b487c568\"","content-type":"image/png","content-length":754},"statusCode":200,"responseTime":"21ms"},"msg":"","time":"2019-04-02T18:00:38.982Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"392014e1-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/--_001.png","method":"GET","originalUrl":"/content/images/2019/04/--_001.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:42:01 GMT","etag":"W/\"19d3e-169d87ddda3\"","content-type":"image/png","content-length":105790},"statusCode":200,"responseTime":"24ms"},"msg":"","time":"2019-04-02T18:00:38.984Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39203bf0-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904217-13-09.png","method":"GET","originalUrl":"/content/images/2019/04/201904217-13-09.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 09:13:28 GMT","etag":"W/\"1f479-169dd5329bd\"","content-type":"image/png","content-length":128121},"statusCode":200,"responseTime":"27ms"},"msg":"","time":"2019-04-02T18:00:38.987Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206304-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/redis-micro-logo.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/redis-micro-logo.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 26 Mar 2019 03:33:22 GMT","etag":"W/\"35c3f-169b80f4525\"","content-type":"image/png","content-length":220223},"statusCode":200,"responseTime":"29ms"},"msg":"","time":"2019-04-02T18:00:38.990Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39206303-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"36ms"},"msg":"","time":"2019-04-02T18:00:38.997Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"392014e0-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T18:00:38.998Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"39417f90-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","method":"GET","originalUrl":"/content/images/size/w600/2019/03/menu.saveimg.savepath20190328171657.jpg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 01 Apr 2019 10:11:40 GMT","etag":"W/\"15d6-169d86213a3\"","content-type":"image/jpeg","content-length":5590},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T18:00:39.181Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6810aee0-5571-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T18:01:57.762Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"95768a30-5571-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T18:03:13.927Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"997a1110-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/wp-login.php","method":"GET","originalUrl":"/wp-login.php","params":{},"headers":{"x-forwarded-for":"37.187.79.106","x-forwarded-proto":"http","x-real-ip":"37.187.79.106","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/wp-login.php","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"67"},"statusCode":301,"responseTime":"0ms"},"msg":"","time":"2019-04-02T18:03:20.611Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9ab7c130-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/wp-login.php","method":"GET","originalUrl":"/wp-login.php","params":{},"headers":{"x-forwarded-for":"37.187.79.106","x-forwarded-proto":"https","x-real-ip":"37.187.79.106","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0","referer":"http://lancexlab.cn/wp-login.php","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"/wp-login.php/"},"statusCode":301,"responseTime":"2ms"},"msg":"","time":"2019-04-02T18:03:22.695Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":50,"err":{"id":"9e4813e0-5571-11e9-a41f-1dc48d552e2c","domain":"https://lancexlab.cn","code":null,"name":"ValidationError","statusCode":422,"level":"normal","message":"Validation (isSlug) failed for slug","stack":"ValidationError: Validation (isSlug) failed for slug\n    at new ValidationError (/var/www/ghost/versions/2.18.3/node_modules/ghost-ignition/lib/errors/index.js:121:23)\n    at each (/var/www/ghost/versions/2.18.3/core/server/data/validation/index.js:348:35)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4911:15\n    at baseForOwn (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:2996:24)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4880:18\n    at Function.forEach (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:9344:14)\n    at Object.validate (/var/www/ghost/versions/2.18.3/core/server/data/validation/index.js:320:7)\n    at _.each (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:46:47)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4911:15\n    at baseForOwn (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:2996:24)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4880:18\n    at Function.forEach (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:9344:14)\n    at validate (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:41:7)\n    at Object.browse (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:105:32)\n    at Object.read (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:115:21)\n    at allShared (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/handle.js:34:58)"},"msg":"Validation (isSlug) failed for slug","time":"2019-04-02T18:03:28.674Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":50,"err":{"id":"9e48fe40-5571-11e9-a41f-1dc48d552e2c","domain":"https://lancexlab.cn","code":null,"name":"ValidationError","statusCode":422,"level":"normal","message":"Validation (isSlug) failed for slug","stack":"ValidationError: Validation (isSlug) failed for slug\n    at new ValidationError (/var/www/ghost/versions/2.18.3/node_modules/ghost-ignition/lib/errors/index.js:121:23)\n    at each (/var/www/ghost/versions/2.18.3/core/server/data/validation/index.js:348:35)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4911:15\n    at baseForOwn (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:2996:24)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4880:18\n    at Function.forEach (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:9344:14)\n    at Object.validate (/var/www/ghost/versions/2.18.3/core/server/data/validation/index.js:320:7)\n    at _.each (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:46:47)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4911:15\n    at baseForOwn (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:2996:24)\n    at /var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:4880:18\n    at Function.forEach (/var/www/ghost/versions/2.18.3/node_modules/lodash/lodash.js:9344:14)\n    at validate (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:41:7)\n    at Object.browse (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:105:32)\n    at Object.read (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/input/all.js:115:21)\n    at allShared (/var/www/ghost/versions/2.18.3/core/server/api/shared/validators/handle.js:34:58)"},"msg":"Validation (isSlug) failed for slug","time":"2019-04-02T18:03:28.681Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9e463f20-5571-11e9-a41f-1dc48d552e2c","userId":null},"url":"/wp-login.php/","method":"GET","originalUrl":"/wp-login.php/","params":{},"headers":{"x-forwarded-for":"37.187.79.106","x-forwarded-proto":"https","x-real-ip":"37.187.79.106","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:62.0) Gecko/20100101 Firefox/62.0","referer":"https://lancexlab.cn/wp-login.php","accept-encoding":"gzip"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"text/html; charset=utf-8","etag":"W/\"1a42-QSJkTZ8fABU0Fpo+/xgso1rBNp4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":404,"responseTime":"53ms"},"msg":"","time":"2019-04-02T18:03:28.712Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ce591200-5571-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T18:04:49.357Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2903d320-5572-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T18:07:21.473Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"38142db0-5572-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.207.105.194","x-forwarded-proto":"https","x-real-ip":"18.207.105.194","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T18:07:46.748Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"72332d20-5572-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.207.105.194","x-forwarded-proto":"https","x-real-ip":"18.207.105.194","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T18:09:24.268Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c31189d0-5572-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.207.106.93","x-forwarded-proto":"https","x-real-ip":"18.207.106.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T18:11:39.954Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa16ed30-5572-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T18:13:12.241Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"28fbee70-5573-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T18:14:30.913Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7a568000-5573-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T18:16:47.399Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a75bc4c0-5573-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T18:18:02.938Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dae3c130-5573-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T18:19:29.400Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"23a25800-5574-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"149ms"},"msg":"","time":"2019-04-02T18:21:31.543Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5c8db970-5574-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T18:23:06.952Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a8b3be30-5574-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.239.94.21","x-forwarded-proto":"https","x-real-ip":"34.239.94.21","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T18:25:14.688Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"db441430-5574-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T18:26:39.528Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"18f429a0-5575-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T18:28:23.014Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"57ea7ab0-5575-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T18:30:08.675Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b626ee10-5575-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T18:32:46.748Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"148e4200-5576-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T18:35:25.150Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"247107c0-5576-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T18:35:51.804Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5f08b9a0-5576-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T18:37:30.084Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b3aa38d0-5576-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T18:39:52.080Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f009d970-5576-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T18:41:33.364Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"08147b60-5577-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T18:42:13.702Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7434b030-5577-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.170.70.76","x-forwarded-proto":"https","x-real-ip":"35.170.70.76","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T18:45:15.101Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8968d990-5577-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"71ms"},"msg":"","time":"2019-04-02T18:45:50.706Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"aadb03a0-5577-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.143.8","x-forwarded-proto":"https","x-real-ip":"3.92.143.8","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T18:46:46.807Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3b1e2aa0-5578-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"140ms"},"msg":"","time":"2019-04-02T18:50:48.924Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"44537f30-5578-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T18:51:04.283Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"652e2430-5578-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.170.70.76","x-forwarded-proto":"https","x-real-ip":"35.170.70.76","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T18:51:59.387Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fb95b640-5578-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T18:56:11.729Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ff814850-5578-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T18:56:18.317Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0c2d4d10-5579-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.170.70.76","x-forwarded-proto":"https","x-real-ip":"35.170.70.76","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T18:56:39.568Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"99d11110-5579-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.226.79.190","x-forwarded-proto":"http","x-real-ip":"101.226.79.190","host":"lancexlab.cn","connection":"close","accept-encoding":"deflate, gzip","accept":"*/*","accept-language":"zh-cn","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_4 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13G35 QQ/6.5.3.410 V1_IPH_SQ_6.5.3_1_APP_A Pixel/750 Core/UIWebView NetType/2G Mem/117"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/plain; charset=utf-8","content-length":"55"},"statusCode":301,"responseTime":"3ms"},"msg":"","time":"2019-04-02T19:00:37.157Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"99f0ce10-5579-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"101.226.79.190","x-forwarded-proto":"https","x-real-ip":"101.226.79.190","host":"lancexlab.cn","connection":"close","accept-encoding":"deflate, gzip","referer":"http://lancexlab.cn/","accept":"*/*","accept-language":"zh-cn","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_4 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Mobile/13G35 QQ/6.5.3.410 V1_IPH_SQ_6.5.3_1_APP_A Pixel/750 Core/UIWebView NetType/2G Mem/117"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"80ms"},"msg":"","time":"2019-04-02T19:00:37.442Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b76d05d0-5579-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.24.121.101","x-forwarded-proto":"https","x-real-ip":"100.24.121.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T19:01:26.903Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b7778d20-5579-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T19:01:26.946Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c2179540-5579-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T19:01:44.769Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6247bb30-557a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T19:06:13.520Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"69c8f720-557a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T19:06:26.114Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7680bbb0-557a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T19:06:47.478Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1182e480-557b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T19:11:07.510Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"11fcf680-557b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.200.13.243","x-forwarded-proto":"https","x-real-ip":"52.200.13.243","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T19:11:08.328Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1b9ad0e0-557b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.197.217.252","x-forwarded-proto":"https","x-real-ip":"54.197.217.252","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"123ms"},"msg":"","time":"2019-04-02T19:11:24.525Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"65e733a0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","if-none-match":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\""},"statusCode":304,"responseTime":"95ms"},"msg":"","time":"2019-04-02T19:13:29.146Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"660a24f0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T19:13:29.288Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"660d5940-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T19:13:29.314Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6bf0eac0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T19:13:39.251Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6cc99783-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/assets/built/infinitescroll.js?v=df61ece7fa","method":"GET","originalUrl":"/assets/built/infinitescroll.js?v=df61ece7fa","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"*/*","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{"v":"df61ece7fa"}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Sat, 26 Oct 1985 08:15:00 GMT","etag":"W/\"3f0-7438674ba0\"","content-type":"application/javascript; charset=UTF-8","content-length":1008,"vary":"Accept-Encoding"},"statusCode":200,"responseTime":"4ms"},"msg":"","time":"2019-04-02T19:13:40.606Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6cc99782-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904211-25-43.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904211-25-43.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 03:26:10 GMT","etag":"W/\"ea85d-169dc153109\"","content-type":"image/png","content-length":960605},"statusCode":200,"responseTime":"15ms"},"msg":"","time":"2019-04-02T19:13:40.616Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6cc99781-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"17ms"},"msg":"","time":"2019-04-02T19:13:40.619Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6cc99780-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/F026AB14-863E-47DC-9E79-7E98B24EC37A.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:02:24 GMT","etag":"W/\"1ccd-169b484051c\"","content-type":"image/png","content-length":7373},"statusCode":200,"responseTime":"25ms"},"msg":"","time":"2019-04-02T19:13:40.627Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6ccb1e20-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/56601E4F-A6F3-4670-A146-3EA171255A30.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:02:25 GMT","etag":"W/\"2974f-169b48405e8\"","content-type":"image/jpeg","content-length":169807},"statusCode":200,"responseTime":"20ms"},"msg":"","time":"2019-04-02T19:13:40.631Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7c0ee4c0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-jia-gou-she-ji/","params":{"slug":"spring-cloud-gatewayzhi-jia-gou-she-ji"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","if-none-match":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","accept-encoding":"br, gzip, deflate"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"9912-I/TS1GLvOP5GRJJMzHc3DSocVn8\""},"statusCode":304,"responseTime":"83ms"},"msg":"","time":"2019-04-02T19:14:06.304Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7c2ec8d0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"6ms"},"msg":"","time":"2019-04-02T19:14:06.437Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d1e58f0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\""},"statusCode":304,"responseTime":"90ms"},"msg":"","time":"2019-04-02T19:14:08.090Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7e1eb1f0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","if-none-match":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/spring-cloud-gatewayzhi-jia-gou-she-ji/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\""},"statusCode":304,"responseTime":"83ms"},"msg":"","time":"2019-04-02T19:14:09.764Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7ef2f1e0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/size/w1000/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:30:37 GMT","etag":"W/\"eaa17-169ddd0b929\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"7ms"},"msg":"","time":"2019-04-02T19:14:11.078Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8165edb0-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/author/ghost/","method":"GET","originalUrl":"/author/ghost/","params":{"slug":"ghost"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"65cf-6A7RXAE5eKUINr34ohVSp+/IR34\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T19:14:15.244Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"879a8560-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/about/","method":"GET","originalUrl":"/about/","params":{"slug":"about"},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/author/ghost/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3683-/iNbCMvAYGIsvBX7LnCcwHjMM/E\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"29ms"},"msg":"","time":"2019-04-02T19:14:25.620Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"87ae3470-557b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/size/w1000/2019/03/307C03A9-4368-4F43-829A-AD71CEE01706.jpeg","method":"GET","originalUrl":"/content/images/size/w1000/2019/03/307C03A9-4368-4F43-829A-AD71CEE01706.jpeg","params":{},"headers":{"x-forwarded-for":"223.104.213.26","x-forwarded-proto":"https","x-real-ip":"223.104.213.26","host":"lancexlab.cn","connection":"close","accept":"image/png,image/svg+xml,image/*;q=0.8,video/*;q=0.8,*/*;q=0.5","accept-encoding":"br, gzip, deflate","user-agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57 MicroMessenger/7.0.3(0x17000321) NetType/4G Language/zh_CN","accept-language":"zh-cn","referer":"https://lancexlab.cn/about/"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Mon, 25 Mar 2019 11:11:33 GMT","etag":"W/\"14196-169b48c62e0\"","content-type":"image/jpeg","content-length":82326},"statusCode":200,"responseTime":"19ms"},"msg":"","time":"2019-04-02T19:14:25.740Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b044d470-557b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T19:15:33.888Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c898b460-557b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.24.121.101","x-forwarded-proto":"https","x-real-ip":"100.24.121.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T19:16:14.678Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4ce43280-557c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T19:19:56.623Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"82bfe2f0-557c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T19:21:26.991Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e8895210-557c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"133ms"},"msg":"","time":"2019-04-02T19:24:17.853Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2a5dbcd0-557d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.197.217.252","x-forwarded-proto":"https","x-real-ip":"54.197.217.252","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T19:26:08.207Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"33419600-557d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T19:26:23.114Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"adb3b760-557d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T19:29:48.550Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dc7a8240-557d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.197.217.252","x-forwarded-proto":"https","x-real-ip":"54.197.217.252","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T19:31:07.029Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7d43d70-557d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T19:31:26.084Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"61fe3240-557e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T19:34:51.022Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"89c52630-557e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T19:35:57.763Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"93768890-557e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.69.157","x-forwarded-proto":"https","x-real-ip":"54.198.69.157","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T19:36:14.021Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eb57c970-557e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"222.180.149.236","x-forwarded-proto":"http","x-real-ip":"222.180.149.236","host":"lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","accept-encoding":"","accept-language":"zh-CN,zh;q=0.8","cache-control":"max-age=0"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=31536000","location":"https://lancexlab.cn/","vary":"Accept, Accept-Encoding","content-type":"text/html; charset=utf-8","content-length":"98"},"statusCode":301,"responseTime":"0ms"},"msg":"","time":"2019-04-02T19:38:41.418Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0410d3d0-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.170.70.76","x-forwarded-proto":"https","x-real-ip":"35.170.70.76","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T19:39:22.948Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2d603c80-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.197.217.252","x-forwarded-proto":"https","x-real-ip":"54.197.217.252","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T19:40:32.256Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"54a46be0-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.24.121.101","x-forwarded-proto":"https","x-real-ip":"100.24.121.101","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T19:41:38.143Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c3773d90-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"107.21.33.33","x-forwarded-proto":"https","x-real-ip":"107.21.33.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T19:44:44.069Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d350db90-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T19:45:10.643Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fc70f6e0-557f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T19:46:19.646Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"60258fc0-5580-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T19:49:06.931Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"94c3b720-5580-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.90.200.184","x-forwarded-proto":"https","x-real-ip":"52.90.200.184","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"165ms"},"msg":"","time":"2019-04-02T19:50:35.325Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c70bb980-5580-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T19:51:59.567Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e09448e0-5580-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"60.191.38.77","x-forwarded-proto":"https","x-real-ip":"60.191.38.77","host":"www.lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:47.0) Gecko/20100101 Firefox/47.0","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"85ms"},"msg":"","time":"2019-04-02T19:52:42.436Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fb65d300-5580-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.93.57.52","x-forwarded-proto":"https","x-real-ip":"3.93.57.52","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T19:53:27.389Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"499bcc00-5581-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.164.183.167","x-forwarded-proto":"https","x-real-ip":"54.164.183.167","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T19:55:38.603Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"803a5740-5581-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T19:57:10.242Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a9f9bfd0-5581-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T19:58:20.286Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"05df4ae0-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T20:00:54.477Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2f066b10-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T20:02:03.499Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"55045ed0-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T20:03:07.240Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b390c6f0-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.43.102","x-forwarded-proto":"https","x-real-ip":"100.25.43.102","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T20:05:45.863Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d008d520-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T20:06:33.645Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eef2a6a0-5582-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T20:07:25.495Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5729e170-5583-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T20:10:20.334Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7d7c5dd0-5583-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T20:11:24.627Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f8432ee0-5583-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"118ms"},"msg":"","time":"2019-04-02T20:14:50.697Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2da8ec00-5584-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T20:16:20.226Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3c99fec0-5584-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/","params":{},"headers":{"x-forwarded-for":"60.191.38.77","x-forwarded-proto":"https","x-real-ip":"60.191.38.77","host":"www.lancexlab.cn","connection":"close","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:47.0) Gecko/20100101 Firefox/47.0","accept":"*/*"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","content-length":"32690","etag":"W/\"7fb2-6Aq0/cYP1s9GcA3VvbGTO4qr8t4\"","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"99ms"},"msg":"","time":"2019-04-02T20:16:45.328Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3d586cc0-5584-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T20:16:46.530Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cdd42ff0-5584-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T20:20:48.943Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e1f2f1b0-5584-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T20:21:22.689Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4d7a41e0-5585-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T20:24:23.094Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"67ea2400-5585-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T20:25:07.439Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"97ef8960-5585-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T20:26:28.019Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1ab37d20-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T20:30:07.402Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"25ff0780-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"75ms"},"msg":"","time":"2019-04-02T20:30:26.373Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5a666770-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T20:31:54.264Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf320050-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T20:35:10.217Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dea49f20-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"163ms"},"msg":"","time":"2019-04-02T20:35:36.246Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f9854470-5586-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"76ms"},"msg":"","time":"2019-04-02T20:36:21.254Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"77481770-5587-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T20:39:52.217Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9d75cdc0-5587-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.212.10.93","x-forwarded-proto":"https","x-real-ip":"18.212.10.93","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T20:40:56.269Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a7c21090-5587-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T20:41:13.548Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"210093f0-5588-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T20:44:36.967Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"71131520-5588-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T20:46:51.300Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0c649670-5589-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T20:51:11.874Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6d6077f0-5589-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T20:53:54.606Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d1365470-5589-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T20:56:42.093Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e7d33590-5589-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T20:57:20.029Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"296e19c0-558a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T20:59:10.092Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"933f5580-558a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"100.25.43.102","x-forwarded-proto":"https","x-real-ip":"100.25.43.102","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T21:02:07.618Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a167e820-558a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T21:02:31.398Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"db216f00-558a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T21:04:08.244Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3281c010-558b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"65ms"},"msg":"","time":"2019-04-02T21:06:34.835Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4f6efe40-558b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"126ms"},"msg":"","time":"2019-04-02T21:07:23.427Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"82266440-558b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"2cf44ce5e52ed966","user-agent":"Twitterbot/1.0","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"137490408352ea62","x-b3-traceid":"00df2cb0001efcd8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T21:08:48.391Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"823f4370-558b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.180","x-forwarded-proto":"https","x-real-ip":"199.59.150.180","host":"lancexlab.cn","connection":"close","x-b3-spanid":"59182be073f34961","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"137490408352ea62","accept-encoding":"gzip, deflate","x-b3-traceid":"00df2cb0001efcd8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T21:08:48.558Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8272fda0-558b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"199.59.150.183","x-forwarded-proto":"https","x-real-ip":"199.59.150.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"a1dbc0d668ad3710","user-agent":"Twitterbot/1.0","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"3b672e091f30159e","x-b3-traceid":"00df2cb0001efcd8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"1ms"},"msg":"","time":"2019-04-02T21:08:48.893Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"828bb5c0-558b-11e9-a41f-1dc48d552e2c","userId":null},"url":"/2019/04/201904219-27-11.png","method":"GET","originalUrl":"/content/images/2019/04/201904219-27-11.png","params":{},"headers":{"x-forwarded-for":"199.59.150.183","x-forwarded-proto":"https","x-real-ip":"199.59.150.183","host":"lancexlab.cn","connection":"close","x-b3-spanid":"3f9186853f2d5ec1","user-agent":"Twitterbot/1.0","accept":"*/*","x-b3-sampled":"false","x-b3-flags":"2","x-b3-parentspanid":"3b672e091f30159e","accept-encoding":"gzip, deflate","x-b3-traceid":"00df2cb0001efcd8"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","accept-ranges":"bytes","cache-control":"public, max-age=31536000","last-modified":"Tue, 02 Apr 2019 11:27:22 GMT","etag":"W/\"eaa17-169ddcdbe41\"","content-type":"image/png","content-length":961047},"statusCode":200,"responseTime":"5ms"},"msg":"","time":"2019-04-02T21:08:49.058Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9e36aff0-558b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T21:09:35.527Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d645bb20-558b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T21:11:09.568Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f2054ec0-558b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T21:11:56.120Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4503a540-558c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T21:14:15.365Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8af53960-558c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T21:16:12.710Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"91f3fee0-558c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T21:16:24.446Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dded0030-558c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T21:18:31.905Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"249190a0-558d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"54ms"},"msg":"","time":"2019-04-02T21:20:30.433Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4569ebb0-558d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T21:21:25.521Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8b8c05b0-558d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T21:23:23.190Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bf83daf0-558d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T21:24:50.389Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa64a3c0-558d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"50ms"},"msg":"","time":"2019-04-02T21:26:29.167Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26d15200-558e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/robots.txt","method":"GET","originalUrl":"/robots.txt","params":{},"headers":{"x-forwarded-for":"203.208.60.50","x-forwarded-proto":"https","x-real-ip":"203.208.60.50","host":"lancexlab.cn","connection":"close","accept":"text/plain,text/html,*/*","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","content-type":"text/plain","content-length":88,"etag":"\"f15f756fcf0b8854e4d47b134faf739c\"","cache-control":"public, max-age=3600","vary":"Accept-Encoding"},"statusCode":200,"responseTime":"2ms"},"msg":"","time":"2019-04-02T21:27:43.653Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"276072a0-558e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/sitemap-posts.xml","method":"GET","originalUrl":"/sitemap-posts.xml","params":{"resource":"posts"},"headers":{"x-forwarded-for":"203.208.60.70","x-forwarded-proto":"https","x-real-ip":"203.208.60.70","host":"lancexlab.cn","connection":"close","accept":"*/*","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=3600","content-type":"text/xml; charset=utf-8","etag":"W/\"512-/aBdZg/hOTFZwuZ2zMO5Zpf+leg\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"3ms"},"msg":"","time":"2019-04-02T21:27:44.591Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"392d0700-558e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T21:28:14.495Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c51d860-558e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"203.208.60.74","x-forwarded-proto":"https","x-real-ip":"203.208.60.74","host":"lancexlab.cn","connection":"close","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"68ms"},"msg":"","time":"2019-04-02T21:28:46.636Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"887f4570-558e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"163ms"},"msg":"","time":"2019-04-02T21:30:27.692Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b638e610-558e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T21:31:44.293Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"msg":"amp.parse https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/ 2ms ","time":"2019-04-02T21:32:09.675Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c55ec470-558e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","params":{},"headers":{"x-forwarded-for":"203.208.60.33","x-forwarded-proto":"https","x-real-ip":"203.208.60.33","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,text/html,application/xhtml+xml,application/signed-exchange;v=b3,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{"post":{"slug":"spring-cloud-gatewayzhi-globalfilter","id":"5ca346c572737b08a9e9f1e3","uuid":"c3cd39fb-81ff-41ae-afe8-2da4b6bc7b89","title":"spring-cloud-gateway之GlobalFilter","html":"<!--kg-card-begin: hr--><hr><!--kg-card-end: hr--><p>loading</p>","comment_id":"5ca346c572737b08a9e9f1e3","feature_image":"https://lancexlab.cn/content/images/2019/04/201904219-27-11.png","featured":false,"page":false,"meta_title":null,"meta_description":null,"created_at":"2019-04-02T19:25:57.000+08:00","updated_at":"2019-04-02T19:32:55.000+08:00","published_at":"2019-04-02T19:30:34.000+08:00","custom_excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。","codeinjection_head":null,"codeinjection_foot":null,"og_image":null,"og_title":null,"og_description":null,"twitter_image":null,"twitter_title":null,"twitter_description":null,"custom_template":null,"canonical_url":null,"authors":{"0":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"}},"tags":{"0":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"}},"primary_author":{"id":"1","name":"lance xu","slug":"lance","profile_image":"https://lancexlab.cn/content/images/2019/03/D38D5162-C79C-4439-AB54-8B3B04129CA1.jpeg","cover_image":"https://lancexlab.cn/content/images/2019/03/4108A4F6-6264-48B0-B0BC-56A3BF582E38.jpeg","bio":"By lance, love coding.  ","website":"https://lancexlab.cn/author/lance/","location":null,"facebook":null,"twitter":null,"meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/author/lance/"},"primary_tag":{"id":"5c9c904072737b08a9e9f072","name":"spring-cloud-gateway","slug":"spring-cloud-gateway","description":"A little research and sharing on the open source project spring-cloud-gateway.","feature_image":"https://lancexlab.cn/content/images/2019/03/menu.saveimg.savepath20190328171657.jpg","visibility":"public","meta_title":null,"meta_description":null,"url":"https://lancexlab.cn/tag/spring-cloud-gateway/"},"url":"https://lancexlab.cn/spring-cloud-gatewayzhi-globalfilter/","excerpt":"讲解关于spring-cloud-gateway全局过滤器的设计与实现，剖析代码原理。"},"_locals":{"version":"2.18.3","safeVersion":"2.18","relativeUrl":"/spring-cloud-gatewayzhi-globalfilter/amp/","apiVersion":"v2","secure":true,"context":{"0":"amp","1":"post"}}},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"3af0-63eQn4IAeYRAJx83th4KHwU9oXo\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"23ms"},"msg":"","time":"2019-04-02T21:32:09.681Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e4222230-558e-11e9-a41f-1dc48d552e2c","userId":null},"url":"/spring-cloud-gatewayzhi-globalfilter/","method":"GET","originalUrl":"/spring-cloud-gatewayzhi-globalfilter/","params":{"slug":"spring-cloud-gatewayzhi-globalfilter"},"headers":{"x-forwarded-for":"203.208.60.88","x-forwarded-proto":"https","x-real-ip":"203.208.60.88","host":"lancexlab.cn","connection":"close","amp-cache-transform":"google;v=\"1\"","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,text/html,application/xhtml+xml,application/signed-exchange;v=b3,application/xml;q=0.9,*/*;q=0.8","from":"googlebot(at)googlebot.com","user-agent":"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","accept-encoding":"gzip,deflate,br"},"body":{},"query":{}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"public, max-age=0","content-type":"text/html; charset=utf-8","etag":"W/\"5e00-pAPMUDIRWQ3Kg62RHyFnexTprUw\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"125ms"},"msg":"","time":"2019-04-02T21:33:01.394Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f1d2c5b0-558e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.200.240.79","x-forwarded-proto":"https","x-real-ip":"34.200.240.79","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T21:33:24.281Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"2c5dcd60-558f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"72ms"},"msg":"","time":"2019-04-02T21:35:02.528Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"58db6b90-558f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.205.155.9","x-forwarded-proto":"https","x-real-ip":"34.205.155.9","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T21:36:17.146Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8d235ca0-558f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.205.155.9","x-forwarded-proto":"https","x-real-ip":"34.205.155.9","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T21:37:44.860Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f167b260-558f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T21:40:33.084Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1d018040-5590-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.205.155.9","x-forwarded-proto":"https","x-real-ip":"34.205.155.9","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"83ms"},"msg":"","time":"2019-04-02T21:41:46.265Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"31e67830-5590-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T21:42:21.298Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"938354a0-5590-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.205.155.9","x-forwarded-proto":"https","x-real-ip":"34.205.155.9","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"57ms"},"msg":"","time":"2019-04-02T21:45:05.060Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b5055d30-5590-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"66ms"},"msg":"","time":"2019-04-02T21:46:01.287Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cfa96eb0-5590-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T21:46:45.971Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"30324310-5591-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T21:49:27.933Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"787ede30-5591-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T21:51:29.217Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8cebbff0-5591-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"151ms"},"msg":"","time":"2019-04-02T21:52:03.592Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ed01fc60-5591-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T21:54:44.699Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"27273d60-5592-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T21:56:22.241Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a0afc210-5592-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T21:59:46.157Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d4d3fe80-5592-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"59ms"},"msg":"","time":"2019-04-02T22:01:13.638Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8f9968e0-5593-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T22:06:26.979Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9a86a6a0-5593-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T22:06:45.300Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"07255a40-5594-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T22:09:47.533Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4965cd40-5594-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"53ms"},"msg":"","time":"2019-04-02T22:11:38.698Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b1e95350-5594-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"52.23.206.239","x-forwarded-proto":"https","x-real-ip":"52.23.206.239","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T22:14:34.048Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"ecbef890-5594-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"47ms"},"msg":"","time":"2019-04-02T22:16:12.746Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"1548a040-5595-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"58ms"},"msg":"","time":"2019-04-02T22:17:20.767Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7b531000-5595-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T22:20:11.947Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9d8ea490-5595-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T22:21:09.378Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"dfeb7930-5595-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"55ms"},"msg":"","time":"2019-04-02T22:23:00.731Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"354d8940-5596-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"61ms"},"msg":"","time":"2019-04-02T22:25:23.987Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3bf26ef0-5596-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"121ms"},"msg":"","time":"2019-04-02T22:25:35.197Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"852ff9c0-5596-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T22:27:37.999Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e6a21cb0-5596-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T22:30:21.482Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"01b3e420-5597-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T22:31:06.895Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26563f80-5597-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T22:32:08.377Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b54ebe10-5597-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T22:36:08.220Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e6e8f440-5597-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T22:37:31.440Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"564a9870-5598-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.90.16.134","x-forwarded-proto":"https","x-real-ip":"3.90.16.134","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"44ms"},"msg":"","time":"2019-04-02T22:40:38.308Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6705bcd0-5598-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T22:41:06.376Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fae8c6e0-5598-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.231.70.115","x-forwarded-proto":"https","x-real-ip":"34.231.70.115","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T22:45:14.485Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"148c7f60-5599-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.231.70.115","x-forwarded-proto":"https","x-real-ip":"34.231.70.115","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"74ms"},"msg":"","time":"2019-04-02T22:45:57.537Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"321decd0-5599-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.231.70.115","x-forwarded-proto":"https","x-real-ip":"34.231.70.115","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T22:46:47.116Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"b6fbe6f0-5599-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T22:50:30.026Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cf8afb20-5599-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"39ms"},"msg":"","time":"2019-04-02T22:51:11.226Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"f3b5b580-5599-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"62ms"},"msg":"","time":"2019-04-02T22:52:11.928Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"59488440-559a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"70ms"},"msg":"","time":"2019-04-02T22:55:02.347Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"919052b0-559a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"123ms"},"msg":"","time":"2019-04-02T22:56:36.825Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a6b70e90-559a-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T22:57:12.248Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"15a41f00-559b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T23:00:18.332Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3e813de0-559b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T23:01:26.891Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"5b476c10-559b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T23:02:15.165Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c72bf770-559b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"60ms"},"msg":"","time":"2019-04-02T23:05:16.196Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"fa5cac20-559b-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T23:06:42.064Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0bb6cfa0-559c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T23:07:11.178Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"61f81c20-559c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T23:09:35.889Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c4d567d0-559c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"37ms"},"msg":"","time":"2019-04-02T23:12:21.747Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d197b3b0-559c-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T23:12:43.162Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"224b7df0-559d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T23:14:58.555Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6437b670-559d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T23:16:49.152Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"7bd2a6a0-559d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T23:17:28.756Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"cd9dad40-559d-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T23:19:45.984Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"218b1eb0-559e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T23:22:06.798Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"26ebeba0-559e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.86.83.84","x-forwarded-proto":"https","x-real-ip":"3.86.83.84","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"125ms"},"msg":"","time":"2019-04-02T23:22:15.902Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"6eb10740-559e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"43ms"},"msg":"","time":"2019-04-02T23:24:16.224Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"c0f4c050-559e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T23:26:34.247Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e2f0dae0-559e-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"63ms"},"msg":"","time":"2019-04-02T23:27:31.279Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0769b540-559f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"46ms"},"msg":"","time":"2019-04-02T23:28:32.451Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"88257cf0-559f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"42ms"},"msg":"","time":"2019-04-02T23:32:08.426Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"98271550-559f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T23:32:35.290Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"bf36ee40-559f-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"41ms"},"msg":"","time":"2019-04-02T23:33:40.814Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3abd8ce0-55a0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"51ms"},"msg":"","time":"2019-04-02T23:37:08.067Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3de7f1d0-55a0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"49ms"},"msg":"","time":"2019-04-02T23:37:13.375Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"80fddd40-55a0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"48ms"},"msg":"","time":"2019-04-02T23:39:05.926Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"e67e5c80-55a0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"35ms"},"msg":"","time":"2019-04-02T23:41:56.204Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"eea80d70-55a0-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.171.146.33","x-forwarded-proto":"https","x-real-ip":"35.171.146.33","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"38ms"},"msg":"","time":"2019-04-02T23:42:09.902Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"35efe2c0-55a1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.91.0.71","x-forwarded-proto":"https","x-real-ip":"3.91.0.71","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"40ms"},"msg":"","time":"2019-04-02T23:44:09.493Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"9dd13560-55a1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"54.198.16.118","x-forwarded-proto":"https","x-real-ip":"54.198.16.118","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T23:47:03.787Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"a69aa8c0-55a1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"34.236.192.178","x-forwarded-proto":"https","x-real-ip":"34.236.192.178","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"67ms"},"msg":"","time":"2019-04-02T23:47:18.545Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"d9d39ad0-55a1-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.92.141.40","x-forwarded-proto":"https","x-real-ip":"3.92.141.40","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"125ms"},"msg":"","time":"2019-04-02T23:48:44.541Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"4c746470-55a2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"18.206.175.128","x-forwarded-proto":"https","x-real-ip":"18.206.175.128","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"56ms"},"msg":"","time":"2019-04-02T23:51:56.785Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"611f60a0-55a2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"84ms"},"msg":"","time":"2019-04-02T23:52:31.488Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"8cf721e0-55a2-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"45ms"},"msg":"","time":"2019-04-02T23:53:45.005Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"054ccbe0-55a3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T23:57:06.899Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"0fe72eb0-55a3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"3.82.50.90","x-forwarded-proto":"https","x-real-ip":"3.82.50.90","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"64ms"},"msg":"","time":"2019-04-02T23:57:24.701Z","v":0}
{"name":"Log","hostname":"VM-0-4-ubuntu","pid":2217,"level":30,"req":{"meta":{"requestId":"3012cf00-55a3-11e9-a41f-1dc48d552e2c","userId":"1"},"url":"/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","method":"GET","originalUrl":"/ghost/api/v0.1/posts/?include=author%2Ctags&formats=mobiledoc%2Chtml%2Cplaintext&order=updated_at%20desc&status=published","params":{},"headers":{"x-forwarded-for":"35.173.185.40","x-forwarded-proto":"https","x-real-ip":"35.173.185.40","host":"lancexlab.cn","connection":"close","user-agent":"Zapier","content-type":"application/json; charset=utf-8","accept-encoding":"gzip,deflate","accept":"*/*"},"body":{},"query":{"include":"author,tags","formats":"mobiledoc,html,plaintext","order":"updated_at desc","status":"published"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","etag":"W/\"20f6e-lCdyEwLMLvWOFFzhojj6J7oT8L0\"","vary":"Accept-Encoding","content-encoding":"gzip"},"statusCode":200,"responseTime":"52ms"},"msg":"","time":"2019-04-02T23:58:18.661Z","v":0}
